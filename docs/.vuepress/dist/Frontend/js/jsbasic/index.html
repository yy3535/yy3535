<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JS基础 | yy3535</title>
    <meta name="description" content="yy3535的笔记">
    <link rel="icon" href="/img/favicon.ico">
  <script src="/img/类图.png"></script>
    
    <link rel="preload" href="/assets/css/0.styles.21816eaa.css" as="style"><link rel="preload" href="/assets/js/app.50f8ab08.js" as="script"><link rel="preload" href="/assets/js/25.223b5ff2.js" as="script"><link rel="prefetch" href="/assets/js/10.3435ca1d.js"><link rel="prefetch" href="/assets/js/11.23c434f0.js"><link rel="prefetch" href="/assets/js/12.8a174cb5.js"><link rel="prefetch" href="/assets/js/13.d2e67b08.js"><link rel="prefetch" href="/assets/js/14.04a411c6.js"><link rel="prefetch" href="/assets/js/15.83e03233.js"><link rel="prefetch" href="/assets/js/16.7b89664e.js"><link rel="prefetch" href="/assets/js/17.322814e5.js"><link rel="prefetch" href="/assets/js/18.f4a9f25c.js"><link rel="prefetch" href="/assets/js/19.03e74c86.js"><link rel="prefetch" href="/assets/js/2.867d5d8e.js"><link rel="prefetch" href="/assets/js/20.e0e76371.js"><link rel="prefetch" href="/assets/js/21.d21e094a.js"><link rel="prefetch" href="/assets/js/22.aa9aca84.js"><link rel="prefetch" href="/assets/js/23.19834df7.js"><link rel="prefetch" href="/assets/js/24.ed2f410a.js"><link rel="prefetch" href="/assets/js/26.e586462e.js"><link rel="prefetch" href="/assets/js/27.d20152c5.js"><link rel="prefetch" href="/assets/js/28.d330b7e2.js"><link rel="prefetch" href="/assets/js/29.c900a6b0.js"><link rel="prefetch" href="/assets/js/3.02a75d06.js"><link rel="prefetch" href="/assets/js/30.af134b0c.js"><link rel="prefetch" href="/assets/js/31.60e11f00.js"><link rel="prefetch" href="/assets/js/32.dfdf0884.js"><link rel="prefetch" href="/assets/js/33.ab7ebf75.js"><link rel="prefetch" href="/assets/js/34.20a671cf.js"><link rel="prefetch" href="/assets/js/35.decc16bb.js"><link rel="prefetch" href="/assets/js/36.ea9369b1.js"><link rel="prefetch" href="/assets/js/37.03dc1006.js"><link rel="prefetch" href="/assets/js/38.eb39266c.js"><link rel="prefetch" href="/assets/js/39.b2f0fe35.js"><link rel="prefetch" href="/assets/js/4.b535f761.js"><link rel="prefetch" href="/assets/js/40.e184620e.js"><link rel="prefetch" href="/assets/js/41.584be5e5.js"><link rel="prefetch" href="/assets/js/42.3ab15439.js"><link rel="prefetch" href="/assets/js/43.dab423c9.js"><link rel="prefetch" href="/assets/js/44.d067a166.js"><link rel="prefetch" href="/assets/js/45.8b9bc0e4.js"><link rel="prefetch" href="/assets/js/46.ad24c826.js"><link rel="prefetch" href="/assets/js/47.b4f893b7.js"><link rel="prefetch" href="/assets/js/5.c4ab59e7.js"><link rel="prefetch" href="/assets/js/6.55a85baf.js"><link rel="prefetch" href="/assets/js/7.9f5e3965.js"><link rel="prefetch" href="/assets/js/8.557d9691.js"><link rel="prefetch" href="/assets/js/9.411314a2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.21816eaa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.jpg" alt="yy3535" class="logo"> <span class="site-name can-hide">yy3535</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Frontend/" class="nav-link router-link-active">前端</a></div><div class="nav-item"><a href="/Backend/" class="nav-link">后端</a></div><div class="nav-item"><a href="/Operation/" class="nav-link">运维</a></div><div class="nav-item"><a href="https://github.com/yy3535/yy3535" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Frontend/" class="nav-link router-link-active">前端</a></div><div class="nav-item"><a href="/Backend/" class="nav-link">后端</a></div><div class="nav-item"><a href="/Operation/" class="nav-link">运维</a></div><div class="nav-item"><a href="https://github.com/yy3535/yy3535" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>js</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Frontend/js/jsbasic/" class="active sidebar-link">JS基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#变量" class="sidebar-link">变量</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#原型和原型链" class="sidebar-link">原型和原型链</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#作用域和闭包" class="sidebar-link">作用域和闭包</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#异步" class="sidebar-link">异步</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#内置对象-正则表达式" class="sidebar-link">内置对象-正则表达式</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#内置对象-日期函数" class="sidebar-link">内置对象-日期函数</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#内置对象-数组常用-api" class="sidebar-link">内置对象-数组常用 API</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#内置对象-字符串常用-api" class="sidebar-link">内置对象-字符串常用 API</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#内置对象-对象常用-api" class="sidebar-link">内置对象-对象常用 API</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#内置对象-function-api" class="sidebar-link">内置对象-Function API</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#面试题" class="sidebar-link">面试题</a></li></ul></li><li><a href="/Frontend/js/jsbasic/zepto.html" class="sidebar-link">zepto源码解读</a></li><li><a href="/Frontend/js/jsbasic/shenrubibao.html" class="sidebar-link">深入理解javascript原型链和闭包</a></li><li><a href="/Frontend/js/jswebapi/" class="sidebar-link">JS-WEB-API</a></li><li><a href="/Frontend/js/devenv/" class="sidebar-link">开发环境</a></li><li><a href="/Frontend/js/runenv/" class="sidebar-link">运行环境</a></li><li><a href="/Frontend/js/es6/" class="sidebar-link">ES6</a></li><li><a href="/Frontend/js/designpatterns/" class="sidebar-link">前端设计模式</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>css</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Frontend/css.html" class="sidebar-link">HTML和css</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>vue</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Frontend/vue.html" class="sidebar-link">vue</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>webpack</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Frontend/webpack.html" class="sidebar-link">webpack</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>前端知识点大纲</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Frontend/viewskills.html" class="sidebar-link">前端知识点大纲</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>JS数据结构与算法</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Frontend/algorithm.html" class="sidebar-link">前端算法</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>小工具</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Frontend/vuepress.html" class="sidebar-link">vuepress</a></li><li><a href="/Frontend/markdown.html" class="sidebar-link">markdown</a></li><li><a href="/Frontend/github.io.html" class="sidebar-link">github.io网站搭建</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>自动化测试</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Frontend/automatedTest.html" class="sidebar-link">js单元测试的一门语言Jest</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>其他</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Frontend/other.html" class="sidebar-link">其他</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>错误</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Frontend/error.html" class="sidebar-link">准则</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="js基础"><a href="#js基础" aria-hidden="true" class="header-anchor">#</a> JS基础</h1> <p></p><div class="table-of-contents"><ul><li><a href="#变量">变量</a><ul><li><a href="#类型">类型</a></li><li><a href="#显示类型转换">显示类型转换</a></li><li><a href="#隐式类型转换">隐式类型转换</a></li><li><a href="#二进制和八进制表示法-es6">二进制和八进制表示法[ES6]</a></li><li><a href="#number-api-es6-全局方法移到了number对象上">Number API[ES6,全局方法移到了Number对象上]</a></li><li><a href="#math对象">Math对象</a></li><li><a href="#运算符">运算符</a></li><li><a href="#json">JSON</a></li></ul></li><li><a href="#原型和原型链">原型和原型链</a><ul><li><a href="#构造函数">构造函数</a></li><li><a href="#原型">原型</a></li><li><a href="#原型链">原型链</a></li><li><a href="#原型链继承">原型链继承</a></li><li><a href="#zepto（或其他框架）-源码中如何使用原型链">zepto（或其他框架） 源码中如何使用原型链</a></li></ul></li><li><a href="#作用域和闭包">作用域和闭包</a><ul><li><a href="#变量提升">变量提升</a></li><li><a href="#this">this</a></li><li><a href="#作用域">作用域</a></li><li><a href="#作用域链">作用域链</a></li><li><a href="#闭包">闭包</a></li></ul></li><li><a href="#异步">异步</a><ul><li><a href="#什么是异步">什么是异步</a></li><li><a href="#异步的实现机制，以及对单线程的理解">异步的实现机制，以及对单线程的理解</a></li><li><a href="#异步的问题和解决方案">异步的问题和解决方案</a></li><li><a href="#同步和异步的区别">同步和异步的区别</a></li><li><a href="#关于-settimeout-的笔试题">关于setTimeout的笔试题</a></li><li><a href="#前端使用异步的场景">前端使用异步的场景</a></li></ul></li><li><a href="#内置对象-正则表达式">内置对象-正则表达式</a><ul><li><a href="#正则对象">正则对象</a></li><li><a href="#正则api">正则api:</a></li><li><a href="#字符串的正则方法">字符串的正则方法</a></li><li><a href="#规则">规则</a></li><li><a href="#字符类">字符类</a></li><li><a href="#量词">量词</a></li><li><a href="#捕获组">捕获组</a></li></ul></li><li><a href="#内置对象-日期函数">内置对象-日期函数</a></li><li><a href="#内置对象-数组常用-api">内置对象-数组常用 API</a><ul><li><a href="#数组自带方法">数组自带方法</a></li><li><a href="#实例方法">实例方法</a></li><li><a href="#扩展运算符（数组）-es6">扩展运算符（数组）[ES6]</a></li><li><a href="#将空位转为undefined-es6">将空位转为undefined[ES6]</a></li></ul></li><li><a href="#内置对象-字符串常用-api">内置对象-字符串常用 API</a><ul><li><a href="#查找">查找</a></li><li><a href="#合并、切割">合并、切割</a></li><li><a href="#匹配">匹配</a></li><li><a href="#格式化">格式化</a></li></ul></li><li><a href="#内置对象-对象常用-api">内置对象-对象常用 API</a><ul><li><a href="#属性">属性</a></li><li><a href="#object-构造函数的方法">Object 构造函数的方法</a></li><li><a href="#object-实例的方法">Object 实例的方法</a></li></ul></li><li><a href="#内置对象-function-api">内置对象-Function API</a><ul><li><a href="#函数参数的默认值-es6">函数参数的默认值[ES6]</a></li><li><a href="#rest-参数-es6">rest 参数[ES6]</a></li><li><a href="#函数内严格模式">函数内严格模式</a></li><li><a href="#函数的name属性">函数的name属性</a></li><li><a href="#箭头函数">箭头函数</a></li><li><a href="#尾调用优化">尾调用优化</a></li><li><a href="#函数参数的尾逗号">函数参数的尾逗号</a></li><li><a href="#delete-操作符">delete 操作符</a></li></ul></li><li><a href="#面试题">面试题</a><ul><li><a href="#写一个能遍历对象和数组的-foreach-函数">写一个能遍历对象和数组的forEach函数</a></li><li><a href="#实现一个深拷贝">实现一个深拷贝</a></li><li><a href="#settimeout设置为0有什么作用？">setTimeout设置为0有什么作用？</a></li></ul></li></ul></div><p></p> <h2 id="变量"><a href="#变量" aria-hidden="true" class="header-anchor">#</a> 变量</h2> <h3 id="类型"><a href="#类型" aria-hidden="true" class="header-anchor">#</a> 类型</h3> <ul><li><p>值类型：string,boolean,number,undefined</p></li> <li><p>引用类型：object(date,RegExp),array,function,null（引用类型可以自由设置属性，除了null）</p></li> <li><p><code>typeof</code>可以区分类型有<code>number</code> <code>string</code> <code>boolean</code> <code>undefined</code>（值类型） <code>function</code> <code>object</code>（引用类型）</p></li> <li><p>js内置函数（数据封装类对象）</p> <ul><li><code>Object</code> <code>Array</code> <code>Boolean</code> <code>Number</code> <code>String</code> <code>Function</code> <code>Date</code> <code>RegExp</code> <code>Error</code></li></ul></li> <li><p><code>===</code>和<code>==</code></p> <ul><li><code>==</code>会先试图类型转换，然后再比较，<code>===</code>不会类型转换</li> <li>必须用<code>===</code>。</li> <li>唯一用<code>==</code>的地方：obj.a === null || obj.a === undefined ，简写形式obj.a == null</li></ul></li></ul> <h3 id="显示类型转换"><a href="#显示类型转换" aria-hidden="true" class="header-anchor">#</a> 显示类型转换</h3> <ul><li>Number函数
<ul><li><strong>数值</strong>：转换后还是原来的值</li> <li><strong>字符串</strong>：如果可以被解析为数值，则转换为相应的数值，否则得到NaN.空字符串转为0</li> <li><strong>布尔值</strong>：true转成1，false转成0</li> <li><strong>undefined</strong>：转成NaN</li> <li><strong>null</strong>：转成0</li> <li><strong>对象</strong>：先调用自身的valueOf，不行再调用自身的toString，再不行就报错
<ul><li>Object的valueOf返回对象本身，toString返回&quot;[object Object]&quot;的字符串</li> <li>Array的valueOf返回对象本身，toString返回调用join(',')所返回的字符串。</li> <li>Function的valueOf返回对象本身，toString返回函数中包含的代码转为字符串的值。</li></ul></li></ul></li> <li>Number等同于一元正号(+)</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&gt;</span> <span class="token operator">+</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">//相当于 Number({})</span>
<span class="token number">NaN</span>
</code></pre></div><ul><li>String函数
<ul><li><strong>数值</strong>：转为相应的字符串</li> <li><strong>字符串</strong>：转换后还是原来的值</li> <li><strong>布尔值</strong>：true转成'true'，false转成'false'</li> <li><strong>undefined</strong>：转成'undefined'</li> <li><strong>null</strong>：转成'null'</li> <li><strong>对象</strong>：先调用自身的toString，不行再调用自身的valueOf，再不行就报错</li></ul></li> <li>Boolean函数
<ul><li>undefined/null/-0/+0/NaN/''(空字符串)==&gt;false</li> <li>其他一律为true</li></ul></li></ul> <h3 id="隐式类型转换"><a href="#隐式类型转换" aria-hidden="true" class="header-anchor">#</a> 隐式类型转换</h3> <ul><li>四则运算
<ul><li><strong>+</strong>：只要其中一个是String类型，表达式的值转为String。若无字符串，表达式便转为Number类型</li> <li><strong>其余</strong>：只要其中一个是Number类型，表达式的值便转为Number。</li> <li><strong>非法字符</strong>：对于非法字符的情况通常会返回NaN</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'1'</span> <span class="token operator">*</span> <span class="token string">'a'</span>     <span class="token comment">// =&gt; NaN</span>
</code></pre></div><ul><li>判断语句
<ul><li>转换规则同Boolean的构造函数。</li></ul></li> <li>Native调用
<ul><li>比如console.log、alert调用自动转为字符串类型</li></ul></li></ul> <h4 id="常见题目"><a href="#常见题目" aria-hidden="true" class="header-anchor">#</a> 常见题目</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token comment">// &quot;&quot;</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// [object Object]</span>
<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">+</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token comment">// [object Object]</span>
<span class="token comment">// 所有浏览器都认为{}是区块语句，计算+[]，得出0</span>
<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">+</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// [object Object][object Object]</span>
<span class="token comment">// 谷歌浏览器是正常结果，火狐会把第一个{}当做区块语句，计算+{}，得出NaN</span>
<span class="token boolean">true</span><span class="token operator">+</span><span class="token boolean">true</span>
<span class="token comment">// 2</span>
<span class="token number">1</span><span class="token operator">+</span><span class="token punctuation">{</span>a<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">}</span>
<span class="token comment">// 1[object Object]</span>
</code></pre></div><h3 id="二进制和八进制表示法-es6"><a href="#二进制和八进制表示法-es6" aria-hidden="true" class="header-anchor">#</a> 二进制和八进制表示法[ES6]</h3> <ul><li>用前缀0b（或0B）和0o（或0O）表示。<div class="language-js extra-class"><pre class="language-js"><code><span class="token number">0b111110111</span> <span class="token operator">===</span> <span class="token number">503</span> <span class="token comment">// true</span>
<span class="token number">0o767</span> <span class="token operator">===</span> <span class="token number">503</span> <span class="token comment">// true</span>
</code></pre></div></li></ul> <h3 id="number-api-es6-全局方法移到了number对象上"><a href="#number-api-es6-全局方法移到了number对象上" aria-hidden="true" class="header-anchor">#</a> Number API[ES6,全局方法移到了Number对象上]</h3> <ul><li>Number.isFinite()
<ul><li>检查一个数值是否为有限的（finite）</li></ul></li> <li>Number.isNaN()
<ul><li>检查一个值是否为NaN</li></ul></li> <li>Number.parseInt()</li> <li>Number.parseFloat()</li> <li>Number.isInteger()
<ul><li>判断一个数值是否为整数。</li> <li>不是数值，返回false</li> <li>25 和 25.0 被视为同一个值</li> <li>数据精度的要求较高，不建议使用</li></ul></li> <li>Number.EPSILON
<ul><li>表示一个极小的常量（是 JavaScript 能够表示的最小精度）</li></ul></li> <li>Number.isSafeInteger()
<ul><li>判断一个整数是否落在这个范围之内。</li> <li>Number.MAX_SAFE_INTEGER（范围上限）</li> <li>Number.MIN_SAFE_INTEGER（范围下限）</li></ul></li></ul> <h3 id="math对象"><a href="#math对象" aria-hidden="true" class="header-anchor">#</a> Math对象</h3> <table><thead><tr><th style="text-align:left">功能</th> <th style="text-align:right">API</th></tr></thead> <tbody><tr><td style="text-align:left">random()</td> <td style="text-align:right">[0,1)</td></tr> <tr><td style="text-align:left">ceil(x)</td> <td style="text-align:right">向上取整</td></tr> <tr><td style="text-align:left">floor(x)</td> <td style="text-align:right">向下取整</td></tr> <tr><td style="text-align:left">round(x)</td> <td style="text-align:right">四舍五入</td></tr> <tr><td style="text-align:left">abs(x)</td> <td style="text-align:right">绝对值</td></tr> <tr><td style="text-align:left">max(x,y,z,...n)</td> <td style="text-align:right">求最大值</td></tr> <tr><td style="text-align:left">min(x,y,z...n)</td> <td style="text-align:right">求最小值</td></tr></tbody></table> <ul><li><p>Math.random()</p> <ul><li>常用于清除浏览器缓存，频繁访问一个链接，就在链接后加一个random()</li></ul></li> <li><p>Math.pow(x,y)</p> <ul><li>返回 x 的 y 次幂。
以下ES6新增：</li></ul></li> <li><p>Math.trunc()</p> <ul><li>去除一个数的小数部分，返回整数部分</li> <li>非数值，内部Number方法将其先转为数值。</li> <li>空值和无法截取整数的值，返回NaN</li></ul></li> <li><p>Math.sign()</p> <ul><li>判断一个数到底是正数、负数、还是零。对于非数值，会先将其转换为数值。</li> <li>参数为正数，返回+1；</li> <li>参数为负数，返回-1；</li> <li>参数为 0，返回0；</li> <li>参数为-0，返回-0;</li> <li>其他值，返回NaN。</li></ul></li> <li><p>Math.cbrt()</p> <ul><li>计算一个数的立方根</li> <li>内部也是先使用Number方法将其转为数值</li></ul></li> <li><p>Math.fround()</p> <ul><li>返回一个数的32位单精度浮点数形式。</li></ul></li> <li><p>Math.hypot()</p> <ul><li>返回所有参数的平方和的平方根。</li></ul></li> <li><p>对数方法</p></li> <li><p>双曲函数方法</p></li> <li><p>指数运算符（**）</p> <ul><li>右结合，多个指数运算符连用时，是从最右边开始计算的。<div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 相当于 2 ** (3 ** 2)</span>
<span class="token number">2</span> <span class="token operator">**</span> <span class="token number">3</span> <span class="token operator">**</span> <span class="token number">2</span>
<span class="token comment">// 512</span>
</code></pre></div></li></ul></li></ul> <h4 id="获取随机数，要求是长度一致的字符串格式"><a href="#获取随机数，要求是长度一致的字符串格式" aria-hidden="true" class="header-anchor">#</a> 获取随机数，要求是长度一致的字符串格式</h4> <p>使用<code>Math.random()</code>可获取字符串，但是返回的是一个小于 1 的小数，而且小数点后面长度不同</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> random <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> random <span class="token operator">=</span> random <span class="token operator">+</span> <span class="token string">'0000000000'</span>  <span class="token comment">// 后面加上 10 个零</span>
<span class="token keyword">var</span> random <span class="token operator">=</span> random<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>random<span class="token punctuation">)</span>
</code></pre></div><h3 id="运算符"><a href="#运算符" aria-hidden="true" class="header-anchor">#</a> 运算符</h3> <ul><li>优先级
<ul><li>https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Operator_Precedence</li> <li>new带参数比new无参数优先级高</li></ul></li> <li>求余%</li></ul> <h3 id="json"><a href="#json" aria-hidden="true" class="header-anchor">#</a> JSON</h3> <ul><li>JSON是一种数据格式。</li> <li><code>parse</code>和<code>stringify</code></li></ul> <h2 id="原型和原型链"><a href="#原型和原型链" aria-hidden="true" class="header-anchor">#</a> 原型和原型链</h2> <h3 id="构造函数"><a href="#构造函数" aria-hidden="true" class="header-anchor">#</a> 构造函数</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
    <span class="token keyword">this</span><span class="token punctuation">.</span>class <span class="token operator">=</span> <span class="token string">'class-1'</span>
    <span class="token comment">// return this  // 默认有这一行</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> f1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token string">'zhangsan'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> f2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token string">'lisi'</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><p><code>Foo</code>是<code>f</code>的构造函数,有<code>name</code> <code>age</code> <code>class</code>三个属性</p></li> <li><p>带<code>new</code>执行时，函数中的<code>this</code>就会变成一个空对象，让程序为其属性赋值，然后最终返回。默认带一个<code>return this</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'foo'</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token string">'beijing'</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><p>创建一个新对象</p></li> <li><p><code>this</code>指向这个新对象</p></li> <li><p>执行代码，即对<code>this</code>赋值</p></li> <li><p>返回<code>this</code></p></li> <li><p>创建一个新对象。它继承自foo.prototype</p></li> <li><p>执行foo构造函数里的代码。执行时相应的参数被传入，同时this会被指定为这个新实例。new foo等同于new foo()，只能用在不传递任何参数的情况</p></li> <li><p>如果构造函数返回了一个对象，那么返回这个对象。否则，返回this</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">new2</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">func</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> o<span class="token operator">=</span>Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>func<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> k<span class="token operator">=</span><span class="token function">func</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> k<span class="token operator">===</span><span class="token string">'object'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> k
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> o
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>其他</p> <ul><li><code>var a = {}</code>是<code>var a = new Object()</code>语法糖</li> <li><code>var a = []</code>是<code>var a = new Array()</code>语法糖</li> <li><code>function Foo(){...}</code>是<code>var Foo = new Function(...)</code>语法糖</li></ul></li> <li><p>判断一个函数是否是一个变量的构造函数</p> <ul><li><code>instanceof</code>(原理:一层一层往上，能否对应到<code>xxx.prototype</code>)(判断数组和伪数组：实际应用中只需要判断<code>length</code>属性是否是数字即可)</li> <li>constructor===构造函数（更准确）</li></ul></li></ul> <h3 id="原型"><a href="#原型" aria-hidden="true" class="header-anchor">#</a> 原型</h3> <h4 id="显示原型和隐式原型"><a href="#显示原型和隐式原型" aria-hidden="true" class="header-anchor">#</a> 显示原型和隐式原型</h4> <ul><li>引用类型有一个<code>__proto__</code>(隐式原型)属性，属性值是一个普通的对象</li> <li>函数有一个<code>prototype</code>（显示原型）属性，属性值是一个普通的对象</li> <li>引用类型的<code>__proto__</code>属性值指向它的构造函数的<code>prototype</code>属性值</li></ul> <h3 id="原型链"><a href="#原型链" aria-hidden="true" class="header-anchor">#</a> 原型链</h3> <ul><li>当试图得到一个对象的某个属性时，如果这个对象本身没有这个属性，那么会去它的<code>__proto__</code>（即它的构造函数的<code>prototype</code>）中寻找</li> <li>如果在<code>f.__proto__</code>中没有找到<code>toString</code>，那么就继续去<code>f.__proto__.__proto__</code>中寻找，因为<code>f.__proto__</code>是一个普通的对象。这样一直往上找，是一个链式的结构，叫做“原型链”。直到找到最上层<code>Object.prototype.__proto__ === null</code>都没有找到，返回<code>undefined</code>。</li> <li>如何判断一个这个属性是不是对象本身的属性呢
<ul><li>使用<code>hasOwnProperty</code>，常用在遍历对象的时候</li></ul></li></ul> <h3 id="原型链继承"><a href="#原型链继承" aria-hidden="true" class="header-anchor">#</a> 原型链继承</h3> <ul><li>使用案例</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 构造函数</span>
<span class="token keyword">function</span> <span class="token function">DomElement</span><span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> result <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span>
    <span class="token keyword">var</span> length <span class="token operator">=</span> result<span class="token punctuation">.</span>length
    <span class="token keyword">var</span> i
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> selectorResult<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">=</span> length
<span class="token punctuation">}</span>
<span class="token comment">// 修改原型</span>
<span class="token class-name">DomElement</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
    constructor<span class="token punctuation">:</span> DomElement<span class="token punctuation">,</span>
    <span class="token function-variable function">get</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">[</span>index<span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">forEach</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> i
        <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span>
            <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> elem<span class="token punctuation">,</span> i<span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">break</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">on</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">elem</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            elem<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> fn<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用</span>
<span class="token keyword">var</span> $div <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DomElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
$div<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>构造函数继承</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 第一种，借助构造函数实现继承(这种无法继承parent原型对象上的方法)</span>
<span class="token keyword">function</span> <span class="token function">Parent1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">'parent1'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Parent1</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">say</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Child1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">Parent1</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// call,apply改变函数执行上下文，即this</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>type<span class="token operator">=</span><span class="token string">'child1'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 第二种，借助原型链实现继承(这种继承是继承了同一个parent实例，导致修改的也是同一个)</span>
<span class="token keyword">function</span> <span class="token function">Parent2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">'parent2'</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>play<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Child2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>type<span class="token operator">=</span><span class="token string">'child2'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Child2</span><span class="token punctuation">.</span>prototype<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Parent2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> s1<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Child2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> s2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Child2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
s1<span class="token punctuation">.</span>play<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span>play<span class="token punctuation">,</span>s2<span class="token punctuation">.</span>play<span class="token punctuation">)</span><span class="token comment">// [1,2,3,4],[1,2,3,4]</span>
<span class="token comment">// 第三种，组合继承方式(组合以上两种，避免了以上两个的问题)(缺点：继承时父级构造函数执行了两遍)</span>
<span class="token keyword">function</span> <span class="token function">Parent3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">'parent3'</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Child3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">Parent3</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>type<span class="token operator">=</span><span class="token string">'child3'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Child3</span><span class="token punctuation">.</span>prototype<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Parent3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 组合继承方式优化1(问题：constructorwei指向Child4)</span>
<span class="token keyword">function</span> <span class="token function">Parent4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">'parent4'</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Child4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">Parent4</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>type<span class="token operator">=</span><span class="token string">'child4'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Child4</span><span class="token punctuation">.</span>prototype<span class="token operator">=</span><span class="token class-name">Parent4</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
<span class="token keyword">var</span> s4<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Child4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s4<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// Parent4</span>
<span class="token comment">// 组合继承方式优化2(最终方案)</span>
<span class="token keyword">function</span> Parent5<span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">'parent5'</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Child5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">Parent5</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>type<span class="token operator">=</span><span class="token string">'child5'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Child5</span><span class="token punctuation">.</span>prototype<span class="token operator">=</span>Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Parent5</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 隔离父类和子类的原型对象</span>
<span class="token class-name">Child5</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor<span class="token operator">=</span>Child5<span class="token punctuation">;</span><span class="token comment">// 覆盖自雷的原型对象</span>
</code></pre></div><h3 id="zepto（或其他框架）-源码中如何使用原型链"><a href="#zepto（或其他框架）-源码中如何使用原型链" aria-hidden="true" class="header-anchor">#</a> zepto（或其他框架） 源码中如何使用原型链</h3> <ul><li>重写数组_<em>proto</em>_，里面要用到原数组属性的直接=Array.prototype.xxx，其余添加它想要添加的方法。</li></ul> <h2 id="作用域和闭包"><a href="#作用域和闭包" aria-hidden="true" class="header-anchor">#</a> 作用域和闭包</h2> <h3 id="变量提升"><a href="#变量提升" aria-hidden="true" class="header-anchor">#</a> 变量提升</h3> <ul><li><code>&lt;script&gt;</code>中的变量提升：变量定义，函数声明
<ul><li>在一段 JS 脚本（即一个<code>&lt;script&gt;</code>标签中）执行之前，会先创建一个全局执行上下文环境，先把代码中即将执行的变量、函数声明都拿出来。变量先暂时赋值为<code>undefined</code>，函数则先声明好可使用。再开始正式执行程序。</li></ul></li> <li>函数中的变量提升：变量定义，函数声明，this，arguments
<ul><li>一个函数在执行之前，也会创建一个<strong>函数执行上下文</strong>环境，跟<strong>全局上下文</strong>差不多，不过<strong>函数执行上线文</strong>中会多出<code>this</code> <code>arguments</code>和函数的参数。</li></ul></li></ul> <h3 id="this"><a href="#this" aria-hidden="true" class="header-anchor">#</a> this</h3> <ul><li>this指向决定于在哪里执行，和在哪里定义无关
<ul><li>全局中this指向window</li> <li>构造函数中
<ul><li>指向当前实例对象</li></ul></li> <li>用于<code>call</code> <code>apply</code> <code>bind</code> <ul><li>调用时指定this的指向</li></ul></li></ul></li></ul> <div class="warning custom-block"><p class="custom-block-title">注意</p> <ul><li>对象属性</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">fn</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
a<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// this === a</span>
<span class="token keyword">var</span> fn1 <span class="token operator">=</span> a<span class="token punctuation">.</span>fn
<span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// this === window</span>
</code></pre></div><ul><li>普通函数</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// window</span>
</code></pre></div></div> <div class="warning custom-block"><p class="custom-block-title">面试题</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&quot;The Window&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> object <span class="token operator">=</span> <span class="token punctuation">{</span>
    name <span class="token punctuation">:</span> <span class="token string">&quot;My Object&quot;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">getNameFunc</span> <span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
             <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">getName</span><span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
object<span class="token punctuation">.</span><span class="token function">getNameFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//The Window</span>
object<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//My Object</span>
<span class="token comment">//函数 getNameFunc 内返回一个闭包，因此 this 指向全局对象，所以 this.name 即为定义在全部作用域下的 name（&quot;The Window&quot;）。</span>
<span class="token comment">//函数 getName 内并未返回闭包，因此 this 指向当前对象，所以 this.name 即为当前作用域下的 name（&quot;My Object&quot;）。</span>
</code></pre></div><p><strong>this看执行的时候，自由变量看定义的时候</strong></p></div> <h3 id="作用域"><a href="#作用域" aria-hidden="true" class="header-anchor">#</a> 作用域</h3> <p>没有块级作用域，只有全局作用域和函数作用域。</p> <ul><li>全局作用域
<ul><li>如果写了很多行 JS 代码，变量定义都没有用函数包括，就全部都在全局作用域中。容易撞车。</li></ul></li> <li>防止全局作用域污染
<ul><li><code>(function(){....})()</code>，jquery等使用匿名函数</li></ul></li></ul> <h3 id="作用域链"><a href="#作用域链" aria-hidden="true" class="header-anchor">#</a> 作用域链</h3> <ul><li>自由变量
<ul><li>当前作用域没有定义的变量，叫做自由变量。</li></ul></li> <li>作用域链
<ul><li>自由变量需要向父级作用域寻找。如果父级也没呢？再一层一层向上寻找，直到找到全局作用域。这种一层一层的关系，就是作用域链。</li> <li>自由变量按照变量定义时的作用域链</li></ul></li></ul> <h3 id="闭包"><a href="#闭包" aria-hidden="true" class="header-anchor">#</a> 闭包</h3> <ul><li>作用域内部调用作用域外部变量
<ul><li>函数作为返回值</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token constant">F1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">100</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> f1 <span class="token operator">=</span> <span class="token constant">F1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">200</span>
<span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//100</span>
</code></pre></div><ul><li>函数作为参数传递</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token constant">F1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">100</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token constant">F2</span><span class="token punctuation">(</span><span class="token parameter">f1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">200</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> f1 <span class="token operator">=</span> <span class="token constant">F1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token constant">F2</span><span class="token punctuation">(</span>f1<span class="token punctuation">)</span><span class="token comment">//100</span>
</code></pre></div></li> <li>闭包的应用
<ul><li>创造作用域，避免全局污染</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">isFirstLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> _list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>_list<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            _list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 使用</span>
<span class="token keyword">var</span> firstLoad <span class="token operator">=</span> <span class="token function">isFirstLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">firstLoad</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token function">firstLoad</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
<span class="token function">firstLoad</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><ul><li>创建 10 个 a 标签，点击的时候弹出来对应的序号</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 错误的写法</span>
<span class="token keyword">var</span> i<span class="token punctuation">,</span> a
<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
    a<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token string">'&lt;br&gt;'</span>
    a<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">alert</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 正确的写法</span>
<span class="token keyword">var</span> i
<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
        a<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token string">'&lt;br&gt;'</span>
        a<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token function">alert</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><code>DocumentFragment</code>优化</li></ul></li></ul> <h2 id="异步"><a href="#异步" aria-hidden="true" class="header-anchor">#</a> 异步</h2> <h3 id="什么是异步"><a href="#什么是异步" aria-hidden="true" class="header-anchor">#</a> 什么是异步</h3> <p>异步的场景</p> <ul><li>定时 <code>setTimeout</code> <code>setInverval</code></li> <li>网络请求，如 <code>ajax</code> <code>&lt;img&gt;</code>加载（常用语打点统计）</li> <li>事件绑定</li></ul> <h3 id="异步的实现机制，以及对单线程的理解"><a href="#异步的实现机制，以及对单线程的理解" aria-hidden="true" class="header-anchor">#</a> 异步的实现机制，以及对单线程的理解</h3> <h3 id="异步的问题和解决方案"><a href="#异步的问题和解决方案" aria-hidden="true" class="header-anchor">#</a> 异步的问题和解决方案</h3> <p>异步遇到的最大的问题</p> <ul><li>callback-hell</li> <li>易读性差，即书写顺序和执行顺序不一致</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'start'</span><span class="token punctuation">)</span>
$<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'./data1.json'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data1<span class="token punctuation">)</span>
    $<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'./data2.json'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data2<span class="token punctuation">)</span>
        $<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'./data3.json'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data3<span class="token punctuation">)</span>
            $<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'./data4.json'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data4<span class="token punctuation">)</span>
                <span class="token comment">// ...继续嵌套...</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><a href="http://www.cnblogs.com/wangfupeng1988/p/6513070.html" target="_blank" rel="noopener noreferrer">深入理解 JavaScript 异步系列（1）——基础<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://www.cnblogs.com/wangfupeng1988/p/6515779.html" target="_blank" rel="noopener noreferrer">深入理解 JavaScript 异步系列（2）—— jquery的解决方案<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://www.cnblogs.com/wangfupeng1988/p/6515855.html" target="_blank" rel="noopener noreferrer">深入理解 JavaScript 异步系列（3）—— ES6 中的 Promise<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://www.cnblogs.com/wangfupeng1988/p/6532713.html" target="_blank" rel="noopener noreferrer">深入理解 JavaScript 异步系列（4）—— Generator<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://www.cnblogs.com/wangfupeng1988/p/6532734.html" target="_blank" rel="noopener noreferrer">深入理解 JavaScript 异步系列（5）—— async await<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h3 id="同步和异步的区别"><a href="#同步和异步的区别" aria-hidden="true" class="header-anchor">#</a> 同步和异步的区别</h3> <p>同步会阻塞代码执行，而异步不会。<code>alert</code>是同步，<code>setTimeout</code>是异步</p> <h3 id="关于settimeout的笔试题"><a href="#关于settimeout的笔试题" aria-hidden="true" class="header-anchor">#</a> 关于<code>setTimeout</code>的笔试题</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 以下代码执行后，打印出来的结果是什么</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
</code></pre></div><p>该题目的答案是<code>1 3 5 2 4</code></p> <h3 id="前端使用异步的场景"><a href="#前端使用异步的场景" aria-hidden="true" class="header-anchor">#</a> 前端使用异步的场景</h3> <ul><li>setTimeout setInterval</li> <li>网络请求</li> <li>事件绑定</li></ul> <h2 id="内置对象-正则表达式"><a href="#内置对象-正则表达式" aria-hidden="true" class="header-anchor">#</a> 内置对象-正则表达式</h2> <h3 id="正则对象"><a href="#正则对象" aria-hidden="true" class="header-anchor">#</a> 正则对象</h3> <ul><li>正则对象可以匹配变量，pattern 正则表达式的文本，flags(g:全局匹配 i:忽略大小写 m：多行)</li> <li>三种方式
<ul><li>字面量
<ul><li>/xyz/i</li></ul></li> <li>构造函数（返回一个正则表达式字面量）
<ul><li>参数是字符串(字符串里需要转义<code>new RegExp(&quot;\\w+&quot;)</code>)
<ul><li><code>var regex = new RegExp('xyz', 'i');</code> 等价于 <code>var regex = /xyz/i;</code></li></ul></li> <li>参数是正则表示式
<ul><li><code>var regex = new RegExp(/xyz/i);</code> 等价于 <code>var regex = /xyz/i;</code></li></ul></li> <li>参数是正则表示式时第二个参数添加修饰符[ES6]
<ul><li><code>new RegExp(/abc/ig, 'i')</code> i覆盖了ig</li></ul></li></ul></li> <li>工厂符号
<ul><li>RegExp('xyz' ,i)</li></ul></li></ul></li> <li>注意点
<ul><li>正则表达式里有变量</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`^(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>j<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>o<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)`</span></span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <h3 id="正则api"><a href="#正则api" aria-hidden="true" class="header-anchor">#</a> 正则api:</h3> <ul><li>RegExp.prototype.exec(str)
<ul><li>在一个指定字符串中执行一个搜索匹配。返回一个结果数组(匹配的第一个字符串)或 null，并改变lastIndex(再次执行exec时开始搜索的位置)</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token constant">RE_DATE</span> <span class="token operator">=</span> <span class="token regex">/(\d{4})-(\d{2})-(\d{2})/</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> matchObj <span class="token operator">=</span> <span class="token constant">RE_DATE</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'1999-12-31'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回结果</span>
<span class="token punctuation">[</span>
    <span class="token comment">// 匹配的第一个字符串</span>
    <span class="token number">0</span><span class="token punctuation">:</span> <span class="token string">&quot;1999-12-31&quot;</span>
    <span class="token comment">// 所有分组</span>
    <span class="token number">1</span><span class="token punctuation">:</span> <span class="token string">&quot;1999&quot;</span>
    <span class="token number">2</span><span class="token punctuation">:</span> <span class="token string">&quot;12&quot;</span>
    <span class="token number">3</span><span class="token punctuation">:</span> <span class="token string">&quot;31&quot;</span>
    <span class="token comment">// 设置了具名组，并且该组有匹配时的分组捕获</span>
    groups<span class="token punctuation">:</span> <span class="token keyword">undefined</span>
    groups<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        year<span class="token punctuation">:</span><span class="token number">1999</span><span class="token punctuation">,</span>
        month<span class="token punctuation">:</span><span class="token number">12</span><span class="token punctuation">,</span>
        day<span class="token punctuation">:</span><span class="token number">31</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 匹配到的字符位于原始字符串的基于0的索引值</span>
    index<span class="token punctuation">:</span> <span class="token number">0</span>
    <span class="token comment">// 原始字符串	</span>
    input<span class="token punctuation">:</span> <span class="token string">&quot;1999-12-31&quot;</span>
    length<span class="token punctuation">:</span> <span class="token number">4</span>
<span class="token punctuation">]</span>
</code></pre></div></li> <li>RegExp.prototype.test(str)
<ul><li>执行一个检索，用来查看正则表达式与指定的字符串是否匹配。返回 true 或 false。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">'abc'</span>
<span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/^a/i</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div></li> <li>RegExp.prototype.unicode[ES6]
<ul><li>返回是否设置了u修饰符。</li></ul></li> <li>RegExp.prototype.sticky[ES6]
<ul><li>返回是否设置了y修饰符</li></ul></li> <li>RegExp.prototype.flags[ES6]
<ul><li>返回正则表达式的修饰符</li></ul></li></ul> <h3 id="字符串的正则方法"><a href="#字符串的正则方法" aria-hidden="true" class="header-anchor">#</a> 字符串的正则方法</h3> <p>5个方法：match()、replace()、search()、split()、matchAll()</p> <h3 id="规则"><a href="#规则" aria-hidden="true" class="header-anchor">#</a> 规则</h3> <ul><li>默认前一次匹配的结束是下一次匹配的开始</li></ul> <h3 id="字符类"><a href="#字符类" aria-hidden="true" class="header-anchor">#</a> 字符类</h3> <ul><li>[]中括号表示范围
<ul><li><code>[a-zA-Z],[abc],[cf]at</code>,</li> <li><code>[0-9]</code></li> <li><code>[^a-d]</code> 非a-d的字符</li></ul></li> <li>()括号表示里面内容是个整体，优先顺序，|表示或者
<ul><li><code>(cla|pa)ss</code> 表示class或者pass</li></ul></li></ul> <h4 id="预定义字符类"><a href="#预定义字符类" aria-hidden="true" class="header-anchor">#</a> 预定义字符类</h4> <table><thead><tr><th style="text-align:left">符号</th> <th style="text-align:left">含义</th></tr></thead> <tbody><tr><td style="text-align:left">.</td> <td style="text-align:left">匹配除\n换行符外的任何单字符。匹配包括\n在内的所有字符，使用<code>(. | \n)</code></td></tr> <tr><td style="text-align:left">\d</td> <td style="text-align:left">数字字符:[0-9]</td></tr> <tr><td style="text-align:left">\D</td> <td style="text-align:left">非数字字符:[^0-9]</td></tr> <tr><td style="text-align:left">\s</td> <td style="text-align:left">空白字符（空格和换行符）:[\f\n\r\t\v]</td></tr> <tr><td style="text-align:left">\S</td> <td style="text-align:left">非空白字符:[^\s]</td></tr> <tr><td style="text-align:left">\w</td> <td style="text-align:left">单词字符:[a-zA-Z_0-9]</td></tr> <tr><td style="text-align:left">\W</td> <td style="text-align:left">非单词字符:[^\w]</td></tr></tbody></table> <h3 id="量词"><a href="#量词" aria-hidden="true" class="header-anchor">#</a> 量词</h3> <ul><li>允许指定匹配出现的次数,以下为贪婪模式：</li></ul> <table><thead><tr><th style="text-align:left">符号</th> <th style="text-align:left">含义</th></tr></thead> <tbody><tr><td style="text-align:left">X?</td> <td style="text-align:left">匹配X零次或一次</td></tr> <tr><td style="text-align:left">X*</td> <td style="text-align:left">匹配X零次或多次</td></tr> <tr><td style="text-align:left">X+</td> <td style="text-align:left">匹配X一次或多次</td></tr> <tr><td style="text-align:left">X{n,m}</td> <td style="text-align:left">匹配n-m次</td></tr> <tr><td style="text-align:left">X{n,}</td> <td style="text-align:left">匹配X至少n次</td></tr></tbody></table> <img src="/img/三种模式.jpg" alt="foo"> <ul><li>量词模式
<ul><li>贪婪：尽量多的匹配目标字符串，且能够回退</li> <li>勉强：尽量少地匹配目标串</li> <li>侵占：尽量多地匹配目标串，且不能回退</li></ul></li></ul> <div class="language-md extra-class"><pre class="language-md"><code>目标串：xfooxxxxxxfoo
贪婪模式：.<span class="token italic"><span class="token punctuation">*</span>foo
匹配一个（<span class="token punctuation">*</span></span>f尽量多地全部字符串匹配，然后到foo，没有字符串了，就回退一个，再回退一个，直到回退三个时满足条件，然后就匹配了一个）
勉强模式：<span class="token italic"><span class="token punctuation">*</span>?foo
匹配两个（第一个字符不是f，所以勉强地吞下一个x，然后第二个开始发现是foo，所以第一次匹配是xfoo,然后第二次吞下很多个xxx后发现xxxxxxfoo符合，所以共匹配两次）
侵占模式：.<span class="token punctuation">*</span></span>+foo
匹配0个（一次性匹配所有字符，不回退，所以后面的foo没有字符串了）
</code></pre></div><div class="language-md extra-class"><pre class="language-md"><code>目标串：232hjdhfd7474$
贪婪模式：\w+[a-z]
匹配一个
勉强模式：\w+?[a-z]
匹配三个
侵占模式：\w++[a-z]
匹配0个
</code></pre></div><h3 id="捕获组"><a href="#捕获组" aria-hidden="true" class="header-anchor">#</a> 捕获组</h3> <ul><li>捕获组：使用括号作为单独的单元来对待的一种方式，可通过程序方便地拿到分组对应的匹配内容</li> <li>作用：
<ul><li>方便程序获取指定组的匹配</li> <li>反向引用时调用</li></ul></li> <li>比如在((A)(B(C)))中，按左括号从左到右来数，有四个括号
<ul><li>1:((A)(B(C)))// 表示整个表达式</li> <li>2:(A)</li> <li>3:(B(C))</li> <li>4:(C)</li></ul></li> <li>具名组匹配（为每一个组匹配指定一个名字）[ES6]
<ul><li>在圆括号内部，模式的头部添加<code>问号 + 尖括号 + 组名（?&lt;year&gt;）</code>，就可以在exec方法返回结果的groups属性上引用该组名。数字序号（matchObj[1]）依然有效。</li> <li>如果具名组as没有找到匹配，那么matchObj.groups.as属性值就是undefined，并且as这个键名在groups是始终存在的。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token constant">RE_OPT_A</span> <span class="token operator">=</span> <span class="token regex">/^(?&lt;as&gt;a+)?$/</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> matchObj <span class="token operator">=</span> <span class="token constant">RE_OPT_A</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

matchObj<span class="token punctuation">.</span>groups<span class="token punctuation">.</span>as <span class="token comment">// undefined</span>
<span class="token string">'as'</span> <span class="token keyword">in</span> matchObj<span class="token punctuation">.</span>groups <span class="token comment">// true</span>
</code></pre></div><ul><li>利用具名组解构赋值(直接从匹配结果上为变量赋值)</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token punctuation">{</span>groups<span class="token punctuation">:</span> <span class="token punctuation">{</span>one<span class="token punctuation">,</span> two<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token regex">/^(?&lt;one&gt;.*):(?&lt;two&gt;.*)$/u</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'foo:bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
one  <span class="token comment">// foo</span>
two  <span class="token comment">// bar</span>
</code></pre></div><ul><li>利用具名组替换（使用$&lt;组名&gt;引用具名组。）
<ul><li>第二个参数是字符串<div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> re <span class="token operator">=</span> <span class="token regex">/(?&lt;year&gt;\d{4})-(?&lt;month&gt;\d{2})-(?&lt;day&gt;\d{2})/u</span><span class="token punctuation">;</span>
<span class="token string">'2015-01-02'</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>re<span class="token punctuation">,</span> <span class="token string">'$&lt;day&gt;/$&lt;month&gt;/$&lt;year&gt;'</span><span class="token punctuation">)</span>
<span class="token comment">// '02/01/2015'</span>
</code></pre></div></li> <li>第二个参数是函数。具名组匹配新增了最后一个函数参数(具名组构成的一个对象)。函数内部可以直接对这个对象进行解构赋值。</li></ul> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token string">'2015-01-02'</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>re<span class="token punctuation">,</span> <span class="token punctuation">(</span>
    matched<span class="token punctuation">,</span> <span class="token comment">// 整个匹配结果 2015-01-02</span>
    capture1<span class="token punctuation">,</span> <span class="token comment">// 第一个组匹配 2015</span>
    capture2<span class="token punctuation">,</span> <span class="token comment">// 第二个组匹配 01</span>
    capture3<span class="token punctuation">,</span> <span class="token comment">// 第三个组匹配 02</span>
    position<span class="token punctuation">,</span> <span class="token comment">// 匹配开始的位置 0</span>
    <span class="token constant">S</span><span class="token punctuation">,</span> <span class="token comment">// 原字符串 2015-01-02</span>
    groups <span class="token comment">// 具名组构成的一个对象 {year, month, day}</span>
<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span>day<span class="token punctuation">,</span> month<span class="token punctuation">,</span> year<span class="token punctuation">}</span> <span class="token operator">=</span> groups<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>day<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>month<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>year<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>引用（两种引用语法可以同时使用）
<ul><li>\k&lt;组名&gt;</li> <li>数字引用（\1）</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token constant">RE_TWICE</span> <span class="token operator">=</span> <span class="token regex">/^(?&lt;word&gt;[a-z]+)!\k&lt;word&gt;!\1$/</span><span class="token punctuation">;</span>
<span class="token constant">RE_TWICE</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'abc!abc!abc'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token constant">RE_TWICE</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'abc!abc!ab'</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre></div></li></ul></li></ul> <h4 id="反向引用"><a href="#反向引用" aria-hidden="true" class="header-anchor">#</a> 反向引用</h4> <ul><li>使用反斜线\后跟一个数字来表示。数字用来表示需要引用的分组组号</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 匹配两个数字连续出现两次的目标串(如：1212、2424)</span>
<span class="token punctuation">(</span>\d\d<span class="token punctuation">)</span>\<span class="token number">1</span> <span class="token number">12123233</span> 
<span class="token comment">// 匹配一次(\d\d表示匹配两个数字，括号括起来表示是一个分组,\1表示重复这个分组一次)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 匹配html标签</span>
<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">[</span>a<span class="token operator">-</span>zA<span class="token operator">-</span><span class="token constant">Z</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">?</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token operator">|</span>\n<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">?</span><span class="token operator">&lt;</span><span class="token operator">/</span>\<span class="token number">1</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;vId&quot;</span><span class="token operator">&gt;</span>我知道<span class="token operator">&lt;</span>未来<span class="token operator">&gt;</span>的<span class="token operator">&lt;</span>a<span class="token operator">&gt;</span>路<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>很<span class="token operator">&lt;</span>a<span class="token operator">&gt;</span>不好走<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token comment">// 匹配一次（([a-zA-Z]+)是前面的标签名，.*?勉强模式匹配多个非换行字符的标签属性,(.|\n)*.?勉强模式匹配标签中间内容，\1重复前面的标签名）</span>
</code></pre></div><h4 id="非捕获组"><a href="#非捕获组" aria-hidden="true" class="header-anchor">#</a> 非捕获组</h4> <ul><li>概要
<ul><li>分组括号里第一个是?就是非捕获组(不计算在分组里面)</li> <li>好处：不会将匹配到的字符存储在内存中，从而节省内存</li></ul></li> <li>分类
<ul><li><code>(?:Pattern)</code></li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 匹配industry或者Industries</span>
<span class="token comment">// 这种情况有分组</span>
<span class="token function">industr</span><span class="token punctuation">(</span>y<span class="token operator">|</span>ies<span class="token punctuation">)</span>
<span class="token comment">// 改为没有分组的(节省内存)</span>
<span class="token function">industr</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token punctuation">:</span>y<span class="token operator">|</span>ies<span class="token punctuation">)</span>
</code></pre></div><h4 id="零宽度断言"><a href="#零宽度断言" aria-hidden="true" class="header-anchor">#</a> 零宽度断言</h4> <table><thead><tr><th>表达式</th> <th>含义</th> <th>添加时间</th></tr></thead> <tbody><tr><td>x(?=y)</td> <td>先行断言，仅匹配被y跟随的x。</td> <td></td></tr> <tr><td>x(?!y)</td> <td>先行否定断言，仅匹配不被y跟随的x。</td> <td></td></tr> <tr><td>(?&lt;=y)x</td> <td>后行断言，仅匹配x在y后面</td> <td>ES6</td></tr> <tr><td>(?&lt;!y)x</td> <td>后行否定断言，仅匹配x不在y后面</td> <td>ES6</td></tr></tbody></table> <ul><li>例：正则表达式(?&lt;!4)56(?=9)
<ul><li>答：文本56前面不能是4，后面必须是9组成，因此5569匹配，4569不匹配</li></ul></li> <li>例：提取字符串da12bka3434bdca4343bdca234bm中包含在字符a和b之间的数字，但是这个a之前的字符不能是c，b后面的字符必须是d才能提取。
<ul><li>答：通过添加分组拿到分组内容 [^c]a(\d+)bd，通过零宽度断言，去掉前后分组，拿到剩下中间的一个分组 (?&lt;=[^c]a)\d+(?=bd)</li></ul></li></ul> <h4 id="模式修政符"><a href="#模式修政符" aria-hidden="true" class="header-anchor">#</a> 模式修政符</h4> <ul><li>可组合搭配使用</li></ul> <table><thead><tr><th>表达式</th> <th>含义</th> <th>添加时间</th></tr></thead> <tbody><tr><td>i</td> <td>不区分大小写</td> <td></td></tr> <tr><td>g</td> <td>全局匹配</td> <td></td></tr> <tr><td>m</td> <td>多行修饰符，使^和$匹配每一行的行首和行尾</td> <td></td></tr> <tr><td>s</td> <td>设置为dotAll模式，使.可以匹配任意单个字符</td> <td>ES6</td></tr> <tr><td>x</td> <td></td> <td></td></tr> <tr><td>e</td> <td></td> <td></td></tr> <tr><td>u</td> <td>处理大于\uFFFF的 Unicode 字符</td> <td>ES6</td></tr> <tr><td>y</td> <td>与g修饰符类似，也是全局匹配，但匹配必须从剩余的第一个位置开始</td> <td>ES6</td></tr></tbody></table> <h4 id="边界匹配器"><a href="#边界匹配器" aria-hidden="true" class="header-anchor">#</a> 边界匹配器</h4> <table><thead><tr><th>表达式</th> <th>含义</th></tr></thead> <tbody><tr><td>^</td> <td>行首</td></tr> <tr><td>$</td> <td>行尾</td></tr> <tr><td>\b</td> <td>匹配一个单词边界</td></tr> <tr><td>\B</td> <td>匹配非单词边界</td></tr></tbody></table> <div class="language-md extra-class"><pre class="language-md"><code>I say thank you
thank you 
thank you all the same
<span class="token comment">&lt;!-- 查找以thank开头的行：^thank，匹配两项--&gt;</span>
<span class="token comment">&lt;!-- 查找以thank开头以same结尾的行：^thank.*same$，匹配一项 --&gt;</span>
</code></pre></div><h4 id="regexp-​-1-9"><a href="#regexp-​-1-9" aria-hidden="true" class="header-anchor">#</a> RegExp.​$1...$9</h4> <ul><li>值为String类型</li> <li>返回上一次正则表达式匹配中，第n个子表达式所匹配的文本。（只保存最前面的9个匹配文本。）</li></ul> <h4 id="p-和-p"><a href="#p-和-p" aria-hidden="true" class="header-anchor">#</a> \p{...}和\P{...}</h4> <ul><li>允许正则表达式匹配符合 Unicode 某种属性的所有字符</li> <li>这两种类只对 Unicode 有效，所以使用的时候一定要加上u修饰符。</li> <li>由于 Unicode 的各种属性非常多，所以这种新的类的表达能力非常强。<div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 匹配所有数字</span>
<span class="token keyword">const</span> regex <span class="token operator">=</span> <span class="token regex">/^\p{Number}+$/u</span><span class="token punctuation">;</span>
regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'²³¹¼½¾'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'㉛㉜㉝'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'ⅠⅡⅢⅣⅤⅥⅦⅧⅨⅩⅪⅫ'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token comment">// 匹配所有空格</span>
\p<span class="token punctuation">{</span>White_Space<span class="token punctuation">}</span>

<span class="token comment">// 匹配各种文字的所有字母，等同于 Unicode 版的 \w</span>
<span class="token punctuation">[</span>\p<span class="token punctuation">{</span>Alphabetic<span class="token punctuation">}</span>\p<span class="token punctuation">{</span>Mark<span class="token punctuation">}</span>\p<span class="token punctuation">{</span>Decimal_Number<span class="token punctuation">}</span>\p<span class="token punctuation">{</span>Connector_Punctuation<span class="token punctuation">}</span>\p<span class="token punctuation">{</span>Join_Control<span class="token punctuation">}</span><span class="token punctuation">]</span>

<span class="token comment">// 匹配各种文字的所有非字母的字符，等同于 Unicode 版的 \W</span>
<span class="token punctuation">[</span><span class="token operator">^</span>\p<span class="token punctuation">{</span>Alphabetic<span class="token punctuation">}</span>\p<span class="token punctuation">{</span>Mark<span class="token punctuation">}</span>\p<span class="token punctuation">{</span>Decimal_Number<span class="token punctuation">}</span>\p<span class="token punctuation">{</span>Connector_Punctuation<span class="token punctuation">}</span>\p<span class="token punctuation">{</span>Join_Control<span class="token punctuation">}</span><span class="token punctuation">]</span>

<span class="token comment">// 匹配 Emoji</span>
<span class="token operator">/</span>\p<span class="token punctuation">{</span>Emoji_Modifier_Base<span class="token punctuation">}</span>\p<span class="token punctuation">{</span>Emoji_Modifier<span class="token punctuation">}</span><span class="token operator">?</span><span class="token operator">|</span>\p<span class="token punctuation">{</span>Emoji_Presentation<span class="token punctuation">}</span><span class="token operator">|</span>\p<span class="token punctuation">{</span>Emoji<span class="token punctuation">}</span>\uFE0F<span class="token operator">/</span>gu

<span class="token comment">// 匹配所有的箭头字符</span>
<span class="token keyword">const</span> regexArrows <span class="token operator">=</span> <span class="token regex">/^\p{Block=Arrows}+$/u</span><span class="token punctuation">;</span>
regexArrows<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'←↑→↓↔↕↖↗↘↙⇏⇐⇑⇒⇓⇔⇕⇖⇗⇘⇙⇧⇩'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div></li></ul> <h4 id="综合实例"><a href="#综合实例" aria-hidden="true" class="header-anchor">#</a> 综合实例</h4> <ul><li>URL</li></ul> <div class="language-md extra-class"><pre class="language-md"><code>/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]<span class="token italic"><span class="token punctuation">*</span>)<span class="token punctuation">*</span></span>\/?$/
<span class="token comment">&lt;!-- http或者https开头，http和https可有可无，数字或者小写字母或者.或者-有一个及以上，然后.，然后2-6个小写字母或者.的字符串，然后单词或者空格或者.或者-有0个及以上，整个分组0个及以上，然后/有或者没有，结束。 --&gt;</span>
/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([?=&amp;\/\w \.-]<span class="token italic"><span class="token punctuation">*</span>)<span class="token punctuation">*</span></span>\/?$/
<span class="token comment">&lt;!-- 修改加上?=&amp;后可匹配带参数url --&gt;</span>
</code></pre></div><h2 id="内置对象-日期函数"><a href="#内置对象-日期函数" aria-hidden="true" class="header-anchor">#</a> 内置对象-日期函数</h2> <p>日期函数最常用的 API 如下</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 获取当前时间毫秒数</span>
<span class="token keyword">var</span> dt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
dt<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 获取毫秒数</span>
dt<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 年</span>
dt<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 月（0 - 11）</span>
dt<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 日（0 - 31）</span>
dt<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 小时（0 - 23）</span>
dt<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 分钟（0 - 59）</span>
dt<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 秒（0 - 59）</span>

dt<span class="token punctuation">.</span><span class="token function">setDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 根据本地时间为指定的日期对象设置月份中的第几天。</span>
dt<span class="token punctuation">.</span><span class="token function">setFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 根据本地时间为指定日期对象设置完整年份（四位数年份是四个数字）。</span>
dt<span class="token punctuation">.</span><span class="token function">setHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 根据本地时间为指定日期对象设置小时数。</span>
dt<span class="token punctuation">.</span><span class="token function">setMilliseconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 根据本地时间为指定日期对象设置毫秒数。</span>
dt<span class="token punctuation">.</span><span class="token function">setMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 根据本地时间为指定日期对象设置分钟数。</span>
dt<span class="token punctuation">.</span><span class="token function">setMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 根据本地时间为指定日期对象设置月份。</span>
dt<span class="token punctuation">.</span><span class="token function">setSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 根据本地时间为指定日期对象设置秒数。</span>
dt<span class="token punctuation">.</span><span class="token function">setTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 通过指定从 1970-1-1 00:00:00 UTC 开始经过的毫秒数来设置日期对象的时间，对于早于 1970-1-1 00:00:00 UTC的时间可使用负值。</span>

</code></pre></div><ul><li>获取<code>2017-06-10</code>格式的日期</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">formatDate</span><span class="token punctuation">(</span><span class="token parameter">dt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>dt<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> year <span class="token operator">=</span> dt<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> month <span class="token operator">=</span> dt<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token keyword">var</span> date <span class="token operator">=</span> dt<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>month <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 强制类型转换</span>
        month <span class="token operator">=</span> <span class="token string">'0'</span> <span class="token operator">+</span> month
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>date <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 强制类型转换</span>
        date <span class="token operator">=</span> <span class="token string">'0'</span> <span class="token operator">+</span> date
    <span class="token punctuation">}</span>
    <span class="token comment">// 强制类型转换</span>
    <span class="token keyword">return</span> year <span class="token operator">+</span> <span class="token string">'-'</span> <span class="token operator">+</span> month <span class="token operator">+</span> <span class="token string">'-'</span> <span class="token operator">+</span> date
<span class="token punctuation">}</span>
<span class="token keyword">var</span> dt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> formatDate <span class="token operator">=</span> <span class="token function">formatDate</span><span class="token punctuation">(</span>dt<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>formatDate<span class="token punctuation">)</span>
</code></pre></div><h2 id="内置对象-数组常用-api"><a href="#内置对象-数组常用-api" aria-hidden="true" class="header-anchor">#</a> 内置对象-数组常用 API</h2> <table><thead><tr><th style="text-align:left">功能</th> <th style="text-align:right">API</th> <th style="text-align:right">es6</th></tr></thead> <tbody><tr><td style="text-align:left">合并、切割</td> <td style="text-align:right">concat,join,slice</td> <td style="text-align:right"></td></tr> <tr><td style="text-align:left">添加</td> <td style="text-align:right">unshift(从头),push(从末尾)</td> <td style="text-align:right"></td></tr> <tr><td style="text-align:left">删除</td> <td style="text-align:right">shift(从头),pop(从末尾)</td> <td style="text-align:right"></td></tr> <tr><td style="text-align:left">删除并添加</td> <td style="text-align:right">splice</td> <td style="text-align:right">copy​Within</td></tr> <tr><td style="text-align:left">排序</td> <td style="text-align:right">sort,reverse</td> <td style="text-align:right"></td></tr> <tr><td style="text-align:left">遍历</td> <td style="text-align:right">map,forEach,reduce</td> <td style="text-align:right">entries,keys,values</td></tr> <tr><td style="text-align:left">筛选</td> <td style="text-align:right">filter,every,some</td> <td style="text-align:right"></td></tr> <tr><td style="text-align:left">查找</td> <td style="text-align:right">indexOf,last​IndexOf</td> <td style="text-align:right">find,find​Index</td></tr> <tr><td style="text-align:left">转换</td> <td style="text-align:right">toString,toLocaleString,toSource,ValueOf</td> <td style="text-align:right"></td></tr> <tr><td style="text-align:left">自带</td> <td style="text-align:right">Array​.isArray</td> <td style="text-align:right">Array.from,Array.of</td></tr></tbody></table> <h3 id="数组自带方法"><a href="#数组自带方法" aria-hidden="true" class="header-anchor">#</a> 数组自带方法</h3> <ul><li>Array​.isArray()</li></ul> <h4 id="es6新增"><a href="#es6新增" aria-hidden="true" class="header-anchor">#</a> ES6新增</h4> <ul><li>Array​.from(object, mapFunction, thisValue)
<ul><li>将非数组转为数组（<code>拥有 length 属性的对象（类数组对象）</code>和<code>可迭代的对象</code>）。</li> <li>第二个参数(类似map方法),用来对每个元素进行处理，将处理后的值放入返回的数组。</li> <li>第三个参数，用来绑定map方法中用到的this。</li></ul></li> <li>Array.of()
<ul><li>替代Array()或new Array()</li> <li>Array()
<ul><li>参数为1个时，会指定数组的长度</li></ul></li> <li>Array.of()
<ul><li>参数为1个时，依然是一个数组</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// [, , ,]</span>
Array<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// [1]</span>
</code></pre></div></li></ul> <h3 id="实例方法"><a href="#实例方法" aria-hidden="true" class="header-anchor">#</a> 实例方法</h3> <h4 id="es5"><a href="#es5" aria-hidden="true" class="header-anchor">#</a> ES5</h4> <div class="warning custom-block"><p class="custom-block-title">合并、切割</p> <ul><li>Array​.prototype​.concat(arrayX,arrayX,......,arrayX)
<ul><li>返回被连接数组的一个副本。</li> <li>不改变现有的数组</li></ul></li> <li>Array​.prototype​.join()</li> <li>Array​.prototype​.slice(start,end)
<ul><li>返回选定的元素。</li> <li>包前不包后</li> <li>start负数指倒数开始，end不指定就是到最后</li></ul></li></ul></div> <div class="warning custom-block"><p class="custom-block-title">添加</p> <ul><li>Array​.prototype​.unshift()</li> <li>Array​.prototype​.push(newelement1,newelement2,....,newelementX)</li></ul></div> <div class="warning custom-block"><p class="custom-block-title">删除</p> <ul><li>Array​.prototype​.shift()</li> <li>Array​.prototype​.pop()</li></ul></div> <div class="warning custom-block"><p class="custom-block-title">删除并添加</p> <ul><li>Array​.prototype​.splice(index,howmany,item1,.....,itemX)
<ul><li>返回被删除的元素的数组。</li></ul></li></ul></div> <div class="warning custom-block"><p class="custom-block-title">排序</p> <ul><li>Array​.prototype​.sort()
<ul><li>默认从小到大arr.sort()<div class="language-js extra-class"><pre class="language-js"><code>arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 从小到大排序</span>
        <span class="token keyword">return</span> a <span class="token operator">-</span> b
        <span class="token comment">// 从大到小排序</span>
        <span class="token comment">// return b - a</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ul></li> <li>Array​.prototype​.reverse()</li></ul></div> <div class="warning custom-block"><p class="custom-block-title">遍历</p> <ul><li>Array​.prototype​.map(function(currentValue,index,arr){},this.Value)
<ul><li>对数组每个元素进行操作，创建一个新数组<div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> arr2 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'&lt;b&gt;'</span> <span class="token operator">+</span> item <span class="token operator">+</span> <span class="token string">'&lt;/b&gt;'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ul></li> <li>Array​.prototype​.for​Each(function (item, index) {})
<ul><li>遍历数组的所有元素</li></ul></li> <li>Array​.prototype​.reduce(callback(accumulator, currentValue[, index[, array]])[, initialValue])
<ul><li>对数组中的每个元素执行一个由您提供的reducer函数(升序执行)，将其结果汇总为单个返回值。</li> <li>第一个函数返回总值和每一项的计算，对数组进行计算后得到结果<div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 数组里所有值得和</span>
<span class="token keyword">var</span> sum <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">accumulator<span class="token punctuation">,</span> currentValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> accumulator <span class="token operator">+</span> currentValue<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 和为 6</span>
<span class="token keyword">var</span> total <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span> <span class="token parameter">acc<span class="token punctuation">,</span> cur</span> <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> acc <span class="token operator">+</span> cur<span class="token punctuation">,</span>
    <span class="token number">0</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 累加对象数组里的值</span>
<span class="token keyword">var</span> initialValue <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> sum <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>x<span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>x<span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter">accumulator<span class="token punctuation">,</span> currentValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> accumulator <span class="token operator">+</span> currentValue<span class="token punctuation">.</span>x
    <span class="token punctuation">,</span>initialValue
<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span> <span class="token comment">// logs 6</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 将二维数组转化为一维</span>
<span class="token keyword">var</span> flattened <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span> <span class="token parameter">acc<span class="token punctuation">,</span> cur</span> <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> acc<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 计算数组中每个元素出现的次数</span>
<span class="token keyword">var</span> names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Alice'</span><span class="token punctuation">,</span> <span class="token string">'Bob'</span><span class="token punctuation">,</span> <span class="token string">'Tiff'</span><span class="token punctuation">,</span> <span class="token string">'Bruce'</span><span class="token punctuation">,</span> <span class="token string">'Alice'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> countedNames <span class="token operator">=</span> names<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">allNames<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
<span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token keyword">in</span> allNames<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    allNames<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token punctuation">{</span>
    allNames<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">return</span> allNames<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// countedNames is:</span>
<span class="token comment">// { 'Alice': 2, 'Bob': 1, 'Tiff': 1, 'Bruce': 1 }</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 按属性对object分类</span>
<span class="token keyword">var</span> people <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'Alice'</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">21</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'Max'</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'Jane'</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">20</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">groupBy</span><span class="token punctuation">(</span><span class="token parameter">objectArray<span class="token punctuation">,</span> property</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> objectArray<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> key <span class="token operator">=</span> obj<span class="token punctuation">[</span>property<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>acc<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    acc<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    acc<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> acc<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> groupedPeople <span class="token operator">=</span> <span class="token function">groupBy</span><span class="token punctuation">(</span>people<span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// groupedPeople is:</span>
<span class="token comment">// { </span>
<span class="token comment">//   20: [</span>
<span class="token comment">//     { name: 'Max', age: 20 }, </span>
<span class="token comment">//     { name: 'Jane', age: 20 }</span>
<span class="token comment">//   ], </span>
<span class="token comment">//   21: [{ name: 'Alice', age: 21 }] </span>
<span class="token comment">// }</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 使用扩展运算符和initialValue绑定包含在对象数组中的数组</span>

<span class="token comment">// friends - 对象数组</span>
<span class="token comment">// where object field &quot;books&quot; - list of favorite books </span>
<span class="token keyword">var</span> friends <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
name<span class="token punctuation">:</span> <span class="token string">'Anna'</span><span class="token punctuation">,</span>
books<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'Bible'</span><span class="token punctuation">,</span> <span class="token string">'Harry Potter'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
age<span class="token punctuation">:</span> <span class="token number">21</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
name<span class="token punctuation">:</span> <span class="token string">'Bob'</span><span class="token punctuation">,</span>
books<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'War and peace'</span><span class="token punctuation">,</span> <span class="token string">'Romeo and Juliet'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
age<span class="token punctuation">:</span> <span class="token number">26</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
name<span class="token punctuation">:</span> <span class="token string">'Alice'</span><span class="token punctuation">,</span>
books<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'The Lord of the Rings'</span><span class="token punctuation">,</span> <span class="token string">'The Shining'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
age<span class="token punctuation">:</span> <span class="token number">18</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// allbooks - list which will contain all friends' books +  </span>
<span class="token comment">// additional list contained in initialValue</span>
<span class="token keyword">var</span> allbooks <span class="token operator">=</span> friends<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> curr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">...</span>prev<span class="token punctuation">,</span> <span class="token operator">...</span>curr<span class="token punctuation">.</span>books<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'Alphabet'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// allbooks = [</span>
<span class="token comment">//   'Alphabet', 'Bible', 'Harry Potter', 'War and peace', </span>
<span class="token comment">//   'Romeo and Juliet', 'The Lord of the Rings',</span>
<span class="token comment">//   'The Shining'</span>
<span class="token comment">// ]</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 数组去重</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">init<span class="token punctuation">,</span> current</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>init<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">||</span> init<span class="token punctuation">[</span>init<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!==</span> current<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        init<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> init<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[1,2,3,4,5]</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 按顺序运行Promise</span>
<span class="token comment">/**
 * Runs promises from array of functions that can return promises
* in chained manner
*
* @param {array} arr - promise arr
* @return {Object} promise object
*/</span>
<span class="token keyword">function</span> <span class="token function">runPromiseInSequence</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> input</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter">promiseChain<span class="token punctuation">,</span> currentFunction</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> promiseChain<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>currentFunction<span class="token punctuation">)</span><span class="token punctuation">,</span>
    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// promise function 1</span>
<span class="token keyword">function</span> <span class="token function">p1</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span>a <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// promise function 2</span>
<span class="token keyword">function</span> <span class="token function">p2</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span>a <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// function 3  - will be wrapped in a resolved promise by .then()</span>
<span class="token keyword">function</span> <span class="token function">f3</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> a <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// promise function 4</span>
<span class="token keyword">function</span> <span class="token function">p4</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span>a <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> promiseArr <span class="token operator">=</span> <span class="token punctuation">[</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> f3<span class="token punctuation">,</span> p4<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">runPromiseInSequence</span><span class="token punctuation">(</span>promiseArr<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 1200</span>
</code></pre></div></li></ul></li> <li>Array​.prototype​.reduce​Right()</li></ul></div> <div class="warning custom-block"><p class="custom-block-title">筛选</p> <ul><li>Array​.prototype​.filter(function(currentValue,index,arr){},this.Value)
<ul><li>第一个函数返回筛选条件，筛选符合条件的元素</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">var</span> arr2 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token operator">&gt;=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li> <li>Array​.prototype​.every()
<ul><li>所有的数组元素，都满足一个条件<div class="language-js extra-class"><pre class="language-js"><code>arr<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> ture
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ul></li> <li>Array​.prototype​.some()
<ul><li>只要有一个满足条件即可<div class="language-js extra-class"><pre class="language-js"><code>arr<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> ture
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ul></li> <li>Array​.prototype​.indexOf()</li> <li>Array​.prototype​.last​IndexOf()</li></ul></div> <div class="warning custom-block"><p class="custom-block-title">转换</p> <ul><li>Array​.prototype​.toString()
<ul><li>把数组转换为字符串，并返回结果。(数组中的元素之间用逗号分隔)</li></ul></li> <li>Array​.prototype​.toLocale​String()</li></ul></div> <h4 id="es6新增-2"><a href="#es6新增-2" aria-hidden="true" class="header-anchor">#</a> ES6新增</h4> <ul><li>Array​.prototype​.copy​Within(target, start = 0, end = this.length)
<ul><li>在当前数组内部，将指定位置的成员复制到其他位置（会覆盖原有成员），然后返回当前数组。</li> <li>会修改当前数组</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">copyWithin</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token comment">// [4, 5, 3, 4, 5]</span>
</code></pre></div></li> <li>Array​.prototype​.find()
<ul><li>第一个参数是一个回调函数，所有数组成员依次执行该回调函数，</li> <li>找出第一个返回值为true的成员，返回该成员。没有符合条件的，返回undefined。</li> <li>第二个参数（回调函数中的this指向）<div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> index<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> value <span class="token operator">&gt;</span> <span class="token number">9</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 10</span>
</code></pre></div></li></ul></li> <li>Array​.prototype​.find​Index()
<ul><li>第一个参数是一个回调函数，所有数组成员依次执行该回调函数，</li> <li>返回第一个符合条件的数组成员的位置，如果所有成员都不符合条件，则返回-1。</li> <li>第二个参数（回调函数中的this指向）<div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> index<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> value <span class="token operator">&gt;</span> <span class="token number">9</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 2</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">和indexOf区别</p> <pre><code>- indexOf:找不到NaN
- find,findIndex:可以借助Object.is方法找到。
</code></pre></div></li></ul></li> <li>Array​.prototype​.fill(value, start, end)
<ul><li>使用给定值，填充一个数组。</li> <li>start：填充起始位置，可以省略。end：填充结束位置，可以省略，实际结束位置是end-1。<div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> a1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">]</span>
a1<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span> <span class="token comment">// 7,7,7,7,7,7,7,7,7,7,7</span>
</code></pre></div></li></ul></li> <li>Array​.prototype​.entries()
<ul><li>键值对遍历</li> <li>返回一个遍历器对象,可以用for...of循环进行遍历</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>index<span class="token punctuation">,</span> elem<span class="token punctuation">]</span> <span class="token keyword">of</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>Array​.prototype​.keys()
<ul><li>键名遍历</li> <li>返回一个遍历器对象,可以用for...of循环进行遍历</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> index <span class="token keyword">of</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>Array​.prototype​.values()
<ul><li>键值遍历</li> <li>返回一个遍历器对象,可以用for...of循环进行遍历</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> elem <span class="token keyword">of</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li>Array​.prototype​.includes()
<ul><li>返回某个数组是否包含给定的值</li> <li>第二个参数为负数，则表示倒数的位置</li></ul> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <ul><li>indexOf:-1不直观，NaN误判</li> <li>includes：直观，NaN准确判断</li></ul></div></li> <li>Array​.prototype​.flat()
<ul><li>返回一个新数组，将嵌套的数组“拉平”，变成一维的数组</li> <li>第一个参数是整数，表示想要拉平的层数，默认为1。(Infinity表示不管多少层都拉平)</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span>
<span class="token comment">// [1, 2, 3]</span>
</code></pre></div></li> <li>Array​.prototype​.flatMap()
<ul><li>对原数组的每个成员执行一个函数（相当map），然后对返回值组成的数组执行flat()方法。</li> <li>第二个参数绑定遍历函数里面的this。</li> <li>flatMap只能展开一层数组。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>arr<span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token parameter">currentValue<span class="token punctuation">[</span><span class="token punctuation">,</span> index<span class="token punctuation">[</span><span class="token punctuation">,</span> array<span class="token punctuation">]</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token punctuation">,</span> thisArg<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// 相当于 [[[2]], [[4]], [[6]], [[8]]].flat()</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// [[2], [4], [6], [8]]</span>
</code></pre></div></li></ul> <h3 id="扩展运算符（数组）-es6"><a href="#扩展运算符（数组）-es6" aria-hidden="true" class="header-anchor">#</a> 扩展运算符（数组）[ES6]</h3> <ul><li>三个点（...）,将一个数组转为用逗号分隔的参数序列。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// 1 2 3</span>
<span class="token keyword">function</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token parameter">array<span class="token punctuation">,</span> <span class="token operator">...</span>items</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  array<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>items<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>可以放置表达式。</li> <li>如果扩展运算符后面是一个空数组，则不产生任何效果。</li> <li>只有函数调用时，扩展运算符才可以放在圆括号中，否则会报错。</li> <li>替代函数的 apply 方法
<ul><li>由于扩展运算符可以展开数组，所以不再需要apply方法，将数组转为函数的参数了。<div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ES5 的写法</span>
Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">77</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">// ES6 的写法</span>
Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">[</span><span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">77</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">// 等同于</span>
Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">77</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li>数组的扩展运算符应用
<ul><li>复制数组（浅拷贝）<div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 写法一</span>
<span class="token keyword">const</span> a2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>a1<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 写法二</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token operator">...</span>a2<span class="token punctuation">]</span> <span class="token operator">=</span> a1<span class="token punctuation">;</span>
</code></pre></div></li> <li>合并数组（浅拷贝）<div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ES5 的合并数组</span>
arr1<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arr2<span class="token punctuation">,</span> arr3<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [ 'a', 'b', 'c', 'd', 'e' ]</span>

<span class="token comment">// ES6 的合并数组</span>
<span class="token punctuation">[</span><span class="token operator">...</span>arr1<span class="token punctuation">,</span> <span class="token operator">...</span>arr2<span class="token punctuation">,</span> <span class="token operator">...</span>arr3<span class="token punctuation">]</span>
<span class="token comment">// [ 'a', 'b', 'c', 'd', 'e' ]</span>
</code></pre></div></li> <li>将字符串转为数组（能够正确识别四个字节的 Unicode 字符。<code>Array.from()</code>也可以）<div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token operator">...</span><span class="token string">'hello'</span><span class="token punctuation">]</span>
<span class="token comment">// [ &quot;h&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot; ]</span>
</code></pre></div></li> <li>将任意有Iterator接口的对象转为数组（如node节点集合,set map集合等）<div class="tip custom-block"><p class="custom-block-title">TIP</p> <ul><li>扩展运算符：转有<code>可迭代的对象</code>为数组</li> <li>Array.from：转<code>拥有 length 属性的对象（类数组对象）</code>和<code>可迭代的对象</code>为数组</li></ul></div></li></ul></li></ul> <h3 id="将空位转为undefined-es6"><a href="#将空位转为undefined-es6" aria-hidden="true" class="header-anchor">#</a> 将空位转为undefined[ES6]</h3> <ul><li>ES6 明确将空位转为undefined。</li></ul> <h2 id="内置对象-字符串常用-api"><a href="#内置对象-字符串常用-api" aria-hidden="true" class="header-anchor">#</a> 内置对象-字符串常用 API</h2> <table><thead><tr><th style="text-align:left">功能</th> <th style="text-align:right">ES5 API</th> <th style="text-align:right">ES6 API</th></tr></thead> <tbody><tr><td style="text-align:left">查找</td> <td style="text-align:right">indexOf,lastIndexOf,charAt,</td> <td style="text-align:right">String.fromCodePoint,codePointAt,includes,startsWith,endsWith</td></tr> <tr><td style="text-align:left">合并，切割</td> <td style="text-align:right">concat,slice[),subString[),subStr,splite</td> <td style="text-align:right"></td></tr> <tr><td style="text-align:left">匹配</td> <td style="text-align:right">match,replace,search</td> <td style="text-align:right">matchAll</td></tr> <tr><td style="text-align:left">格式化</td> <td style="text-align:right">toLowerCase,toUpperCase,trim,repeat</td> <td style="text-align:right">String.fromCodePoint, String.raw,codePointAt,padStart,padEnd,trimStart,trimEnd</td></tr></tbody></table> <h3 id="查找"><a href="#查找" aria-hidden="true" class="header-anchor">#</a> 查找</h3> <ul><li><p>charAt()</p></li> <li><p>charCodeAt()</p></li> <li><p>indexOf()</p></li> <li><p>lastIndexOf()</p></li> <li><p>String.fromCodePoint()</p> <ul><li>可以识别大于0xFFFF的字符，弥补了String.fromCharCode()方法的不足。</li> <li>多个参数，会被合并成一个字符串返回。</li> <li>与codePointAt()方法相反，定义在String对象上，codePointAt方法定义在字符串的实例对象上。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>String<span class="token punctuation">.</span><span class="token function">fromCodePoint</span><span class="token punctuation">(</span><span class="token number">0x20BB7</span><span class="token punctuation">)</span>
<span class="token comment">// &quot;𠮷&quot;</span>
String<span class="token punctuation">.</span><span class="token function">fromCodePoint</span><span class="token punctuation">(</span><span class="token number">0x78</span><span class="token punctuation">,</span> <span class="token number">0x1f680</span><span class="token punctuation">,</span> <span class="token number">0x79</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'x\uD83D\uDE80y'</span>
<span class="token comment">// true</span>
</code></pre></div></li> <li><p>str.codePointAt()</p> <ul><li>返回一个字符的码点（能够正确处理 4 个字节储存的字符）</li> <li>是测试一个字符由两个字节还是由四个字节组成的最简单方法</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token string">&quot;𠮷&quot;</span><span class="token punctuation">;</span>

s<span class="token punctuation">.</span>length <span class="token comment">// 2</span>
s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// ''</span>
s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// ''</span>
s<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 55362</span>
s<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 57271</span>
</code></pre></div><ul><li>includes()
<ul><li>返回布尔值，表示是否找到了参数字符串。</li> <li>支持第二个参数，表示开始搜索的位置。</li></ul></li> <li>startsWith()
<ul><li>返回布尔值，表示参数字符串是否在原字符串的头部。</li> <li>支持第二个参数，表示开始搜索的位置。</li></ul></li> <li>endsWith()
<ul><li>返回布尔值，表示参数字符串是否在原字符串的尾部。</li> <li>支持第二个参数，表示开始搜索的位置。</li></ul></li></ul> <h3 id="合并、切割"><a href="#合并、切割" aria-hidden="true" class="header-anchor">#</a> 合并、切割</h3> <ul><li>concat()</li> <li>slice(start,end)
<ul><li>提取字符串的某个部分，并以新的字符串返回被提取的部分。</li></ul></li> <li>substring(start,stop)
<ul><li>提取字符串中介于两个指定下标之间的字符。</li></ul></li> <li>str.substr(start[, length])
<ul><li>提取字符串</li></ul></li> <li>str.split([separator[, limit]])
<ul><li>把一个字符串按分隔符分割成字符串数组</li> <li>separator【必需】字符串或正则表达式(如果空字符串(&quot;&quot;)被用作分隔符，则字符串会在每个字符之间分割。如果没有找到或者省略了分隔符，则该数组包含一个由整个字符串组成的元素)</li> <li>limit【可选】返回数组的最大长度</li></ul></li></ul> <h3 id="匹配"><a href="#匹配" aria-hidden="true" class="header-anchor">#</a> 匹配</h3> <ul><li><p>str.replace(regexp|substr, newSubStr|function)</p> <ul><li>替换</li> <li>第二个参数是字符串</li> <li>第二个参数是函数</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> re <span class="token operator">=</span> <span class="token regex">/(?&lt;year&gt;\d{4})-(?&lt;month&gt;\d{2})-(?&lt;day&gt;\d{2})/u</span><span class="token punctuation">;</span>
<span class="token string">'2015-01-02'</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>re<span class="token punctuation">,</span> <span class="token punctuation">(</span>
      matched<span class="token punctuation">,</span> <span class="token comment">// 整个匹配结果 2015-01-02</span>
      capture1<span class="token punctuation">,</span> <span class="token comment">// 第一个组匹配 2015</span>
      capture2<span class="token punctuation">,</span> <span class="token comment">// 第二个组匹配 01</span>
      capture3<span class="token punctuation">,</span> <span class="token comment">// 第三个组匹配 02</span>
      position<span class="token punctuation">,</span> <span class="token comment">// 匹配开始的位置 0</span>
      <span class="token constant">S</span><span class="token punctuation">,</span> <span class="token comment">// 原字符串 2015-01-02</span>
      groups <span class="token comment">// 具名组构成的一个对象 {year, month, day}[ES6]</span>
  <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> <span class="token punctuation">{</span>day<span class="token punctuation">,</span> month<span class="token punctuation">,</span> year<span class="token punctuation">}</span> <span class="token operator">=</span> groups<span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>day<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>month<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>year<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>str.search(regexp)</p> <ul><li>对正则表达式和指定字符串进行匹配搜索</li> <li>匹配成功，返回首次匹配项的索引，否则返回-1</li></ul></li> <li><p>str.match(regexp)</p> <ul><li>可在字符串内检索指定的值，或找到一个或多个正则表达式的匹配。</li> <li>返回匹配结果的数组（数组的内容看regexp是否加了全局标志g）</li></ul></li> <li><p>str.matchAll()</p> <ul><li>如果一个正则表达式在字符串里面有多个匹配，一般使用g修饰符或y修饰符，在循环里面逐一取出。</li> <li>返回一个正则表达式在当前字符串的所有匹配(返回一个遍历器,用for...of循环)</li> <li>转数组（...运算符或Array.from方法）</li></ul></li></ul> <h3 id="格式化"><a href="#格式化" aria-hidden="true" class="header-anchor">#</a> 格式化</h3> <ul><li>toLocaleLowerCase()</li> <li>toLocaleUpperCase()</li> <li>toLowerCase()</li> <li>toString()</li> <li>toUpperCase()</li> <li>trim()</li> <li>trimRight()</li> <li>trimLeft()</li> <li>valueOf()</li> <li>String.fromCharCode()
<ul><li>从 Unicode 码点返回对应字符(不能识别码点大于0xFFFF的字符)</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token number">0x20BB7</span><span class="token punctuation">)</span>
<span class="token comment">// &quot;ஷ&quot;</span>
</code></pre></div><ul><li>String.raw()
<ul><li>返回一个斜杠都被转义（即斜杠前面再加一个斜杠）的字符串</li></ul></li> <li>str.repeat(count)
<ul><li>返回一个新字符串，表示将原字符串重复n次。参数必须为正数</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;abc&quot;</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>     <span class="token comment">// RangeError: 必须为正数</span>
<span class="token string">&quot;abc&quot;</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>      <span class="token comment">// &quot;&quot;</span>
<span class="token string">&quot;abc&quot;</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>      <span class="token comment">// &quot;abc&quot;</span>
<span class="token string">&quot;abc&quot;</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>      <span class="token comment">// &quot;abcabc&quot;</span>
</code></pre></div></li> <li>normalize()
<ul><li>将字符的不同表示方法统一为同样的形式，这称为 Unicode 正规化。</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'\u01D1'</span><span class="token punctuation">.</span><span class="token function">normalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'\u004F\u030C'</span><span class="token punctuation">.</span><span class="token function">normalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// true</span>
</code></pre></div><ul><li>str.padStart()，str.padEnd()
<ul><li>如果某个字符串不够指定长度，会在头部或尾部补全。padStart()用于头部补全，padEnd()用于尾部补全。</li> <li>如果原字符串的长度，等于或大于最大长度，则字符串补全不生效，返回原字符串。</li> <li>省略第二个参数，默认使用空格补全长度</li> <li>用途
<ul><li>为数值补全指定位数</li> <li>提示字符串格式</li></ul></li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'x'</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'ab'</span><span class="token punctuation">)</span> <span class="token comment">// 'ababx'</span>
<span class="token string">'x'</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'ab'</span><span class="token punctuation">)</span> <span class="token comment">// 'abax'</span>

<span class="token string">'x'</span><span class="token punctuation">.</span><span class="token function">padEnd</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'ab'</span><span class="token punctuation">)</span> <span class="token comment">// 'xabab'</span>
<span class="token string">'x'</span><span class="token punctuation">.</span><span class="token function">padEnd</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'ab'</span><span class="token punctuation">)</span> <span class="token comment">// 'xaba'</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 提示字符串格式</span>
<span class="token number">12</span><span class="token string">'.padStart(10, '</span><span class="token constant">YYYY</span><span class="token operator">-</span><span class="token constant">MM</span><span class="token operator">-</span><span class="token constant">DD</span>'<span class="token punctuation">)</span> <span class="token comment">// &quot;YYYY-MM-12&quot;</span>
<span class="token string">'09-12'</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'YYYY-MM-DD'</span><span class="token punctuation">)</span> <span class="token comment">// &quot;YYYY-09-12&quot;</span>
</code></pre></div><ul><li>str.trimStart()，str.trimEnd()
<ul><li>trimStart()消除字符串头部的空格</li> <li>trimEnd()消除尾部的空格。</li> <li>返回新字符串，不修改原始字符串。</li></ul></li></ul> <h2 id="内置对象-对象常用-api"><a href="#内置对象-对象常用-api" aria-hidden="true" class="header-anchor">#</a> 内置对象-对象常用 API</h2> <h3 id="属性"><a href="#属性" aria-hidden="true" class="header-anchor">#</a> 属性</h3> <ul><li>属性名
<ul><li>obj.xxx(xxx是变量要用[xxx])</li></ul></li> <li>属性遍历
<ul><li>for-in<div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    x<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    y<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
    z<span class="token punctuation">:</span> <span class="token number">300</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> key
<span class="token keyword">for</span> <span class="token punctuation">(</span>key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li></ul> <h3 id="object-构造函数的方法"><a href="#object-构造函数的方法" aria-hidden="true" class="header-anchor">#</a> Object 构造函数的方法</h3> <h4 id="es5-2"><a href="#es5-2" aria-hidden="true" class="header-anchor">#</a> ES5</h4> <ul><li>Object.create(proto, [propertiesObject])
<ul><li>使用指定的原型对象和属性创建一个新对象。</li></ul></li> <li>Object.defineProperty()
<ul><li>在一个对象上定义一个新属性，或者修改一个对象的现有属性， 并返回这个对象。
<ul><li>添加的属性不可修改</li> <li>属性无法看到但是可以取到（可以枚举）</li></ul></li> <li>描述符
<ul><li>configurable(为true时属性描述符才能被改变，属性也能被删除。默认false)</li> <li>enumerable(为true时出现在对象的枚举属性中，默认false)。</li> <li>数据描述符和存取描述符二选一
<ul><li>数据描述符
<ul><li>value(任意javascript值,默认undefined)</li> <li>writable(为true时value能被修改，默认false)</li></ul></li> <li>存取描述符
<ul><li>get
<ul><li>给属性提供 getter 的方法，访问属性时被执行</li> <li>默认undefined</li> <li>没有参数传入，会传入this对象</li></ul></li> <li>set
<ul><li>给属性提供 setter 的方法，属性值修改时触发</li> <li>默认undefined</li> <li>一个参数：新值</li></ul></li></ul></li></ul></li></ul></li> <li>使用场景(<code>class的实现``vue的MVVM``mobx``装饰器``koa</code>)</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> temp<span class="token punctuation">;</span>
<span class="token comment">// get第一种写法</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> temp
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">set</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">{</span>
      temp<span class="token operator">=</span>val<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// get第二种写法</span>
<span class="token keyword">let</span> obj<span class="token operator">=</span><span class="token punctuation">{</span>
  temp<span class="token punctuation">:</span><span class="token string">''</span><span class="token punctuation">,</span>
  <span class="token keyword">get</span> <span class="token constant">PI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>temp
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">set</span> <span class="token constant">PI</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>temp<span class="token operator">=</span>val<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
obj<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">'小明'</span>
</code></pre></div></li></ul> <h4 id="es6新增-3"><a href="#es6新增-3" aria-hidden="true" class="header-anchor">#</a> ES6新增</h4> <ul><li><p>Object.is(val1,val2)</p> <ul><li>与严格比较运算符（===）基本一致(区别：<code>+0不等于-0</code>和<code>NaN等于自身</code>。)</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">,</span> <span class="token number">NaN</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><ul><li>参数
<ul><li>value1，第一个需要比较的值。</li> <li>value2，第二个需要比较的值。</li></ul></li> <li>返回值
<ul><li>表示两个参数是否相同的<code>布尔值</code> 。</li> <li>是不是非数</li></ul></li> <li>window.isNaN()
<ul><li>先把参数转化为数字类型,再判断是不是 NaN</li> <li>只要不是数字都满足</li></ul></li> <li>Number.isNaN()
<ul><li>先判断参数是不是数字类型,不是就返回 false, 是数字类型再进入判断是不是 NaN.</li> <li>只有数字中的NaN满足</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// true</span>
Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// false</span>
</code></pre></div></li> <li><p>Object.assign(target, ...sources)</p> <ul><li>合并对象</li> <li>只拷贝源对象的自身属性（不拷贝继承属性），也不拷贝不可枚举的属性（enumerable: false）。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> source1 <span class="token operator">=</span> <span class="token punctuation">{</span> b<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> source2 <span class="token operator">=</span> <span class="token punctuation">{</span> c<span class="token punctuation">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> source1<span class="token punctuation">,</span> source2<span class="token punctuation">)</span><span class="token punctuation">;</span>
target <span class="token comment">// {a:1, b:2, c:3}</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p> <ul><li>注意点
<ul><li>浅拷贝</li> <li>同名属性覆盖</li> <li>可以处理数组（会把数组视为对象）</li> <li>如果复制的是个取值函数，会先求值再复制</li></ul></li> <li>用途
<ul><li>为对象添加属性</li> <li>为对象添加方法</li> <li>克隆对象（只克隆对象自身的值）</li> <li>合并对个对象</li> <li>为属性指定默认值<div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token constant">DEFAULTS</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
logLevel<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
outputFormat<span class="token punctuation">:</span> <span class="token string">'html'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">processContent</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
options <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token constant">DEFAULTS</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li></ul></div></li> <li><p>Object.getOwnPropertyDescriptors()</p> <ul><li>返回指定对象所有自身属性（非继承属性）的描述对象。</li> <li>用途
<ul><li>解决Object.assign()无法正确拷贝get属性和set属性的问题。（配合Object.defineProperties()方法）</li> <li>配合Object.create()方法，将对象属性克隆到一个新对象。这属于浅拷贝。</li></ul></li></ul></li> <li><p>__proto__属性</p> <ul><li>用来读取或设置当前对象的prototype对象。</li> <li>最好使用下面的<code>Object.setPrototypeOf()（写操作）</code>、<code>Object.getPrototypeOf()（读操作）</code>、<code>Object.create()（生成操作）</code>代替。</li></ul></li> <li><p>Object.setPrototypeOf(object, prototype)</p> <ul><li>设置对象的原型（即内部 [[Prototype]] 属性）。</li></ul></li> <li><p>Object.getPrototypeOf(obj)</p> <ul><li>读取一个对象的原型对象</li></ul></li> <li><p>Object.keys(obj)</p> <ul><li>返回一个包含所有给定对象自身可枚举属性名称的数组。</li> <li>for...of循环</li></ul></li> <li><p>Object.values(obj)</p> <ul><li>返回一个包含所有给定对象自身可枚举属性值的数组。</li> <li>for...of循环</li></ul></li> <li><p>Object.entries(obj)</p> <ul><li>返回一个包含所有给定对象自身可枚举属性键值的数组。</li> <li>for...of循环</li> <li>另一个用处：将对象转为真正的Map结构<div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token punctuation">:</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> baz<span class="token punctuation">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map <span class="token comment">// Map { foo: &quot;bar&quot;, baz: 42 }</span>
</code></pre></div></li></ul></li> <li><p>Object.fromEntries()</p> <ul><li>将一个键值对数组转为对象。<div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">'baz'</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// { foo: &quot;bar&quot;, baz: 42 }</span>
</code></pre></div></li> <li>用处
<ul><li>将键值对的数据结构还原为对象（特别适合将 Map 结构转为对象）</li> <li>配合URLSearchParams对象，将查询字符串转为对象。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token string">'foo=bar&amp;baz=qux'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// { foo: &quot;bar&quot;, baz: &quot;qux&quot; }</span>
</code></pre></div></li></ul></li> <li><p>Object.getOwnPropertySymbols(obj)</p> <ul><li>返回一个数组，成员是当前对象的所有用作属性名的 Symbol 值。</li></ul></li></ul> <h3 id="object-实例的方法"><a href="#object-实例的方法" aria-hidden="true" class="header-anchor">#</a> Object 实例的方法</h3> <ul><li>Object.prototype.hasOwnProperty()
<ul><li>返回一个布尔值 ，表示某个对象是否含有指定的属性，而且此属性非原型链继承的。</li></ul></li> <li>Object.prototype.isPrototypeOf()
<ul><li>返回一个布尔值，表示指定的对象是否在本对象的原型链中。</li></ul></li> <li>Object.prototype.toString()
<ul><li>返回对象的字符串表示。</li></ul></li> <li>Object.prototype.valueOf()
<ul><li>返回指定对象的原始值。</li></ul></li></ul> <h2 id="内置对象-function-api"><a href="#内置对象-function-api" aria-hidden="true" class="header-anchor">#</a> 内置对象-Function API</h2> <ul><li>实例的方法
<ul><li>Function.prototype.apply(thisArg, [argsArray])
<ul><li>在一个对象的上下文中应用另一个对象的方法</li> <li>参数能够以数组形式传入。(数组元素将作为单独的参数传给 func 函数)</li></ul></li> <li>Function.prototype.call(thisArg, arg1, arg2, ...)
<ul><li>在一个对象的上下文中应用另一个对象的方法</li> <li>参数能够以列表形式传入。</li></ul></li> <li>Function.prototype.bind(thisArg[, arg1[, arg2[, ...]]])
<ul><li>在一个对象的上下文中应用另一个对象的方法</li></ul></li></ul></li></ul> <div class="warning custom-block"><p class="custom-block-title">注意</p> <p>call()方法的作用和 apply() 方法区别</p> <ul><li>call()方法接受的是<code>参数列表</code></li> <li>apply()方法接受的是一个<code>参数数组</code></li></ul></div> <div class="tip custom-block"><p class="custom-block-title">注</p> <ul><li>利用apply展开数组</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> max <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> numbers<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>max<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// expected output: 7</span>
<span class="token keyword">var</span> min <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> numbers<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>min<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// expected output: 2</span>
</code></pre></div></div> <p>ES6语法：</p> <h3 id="函数参数的默认值-es6"><a href="#函数参数的默认值-es6" aria-hidden="true" class="header-anchor">#</a> 函数参数的默认值[ES6]</h3> <ul><li>参数默认值是惰性求值的(每次都重新计算默认值表达式的值)</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token parameter">x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p <span class="token comment">// { x: 0, y: 0 }</span>
</code></pre></div><ul><li>与解构赋值默认值结合使用</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 写法一</span>
<span class="token keyword">function</span> <span class="token function">m1</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 写法二</span>
<span class="token keyword">function</span> <span class="token function">m2</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>x<span class="token punctuation">,</span> y<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>两种写法都对函数的参数设定了默认值，区别是写法一函数参数的默认值是空对象，但是设置了对象解构赋值的默认值；写法二函数参数的默认值是一个有具体属性的对象，但是没有设置对象解构赋值的默认值。</li> <li>如果传入undefined，将触发该参数等于默认值，null则没有这个效果。</li> <li>指定了默认值后，length属性将失真。<div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c <span class="token operator">=</span> <span class="token number">5</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token comment">// 2</span>
</code></pre></div></li> <li>设置了参数的默认值，函数进行声明初始化时，参数会形成一个单独的作用域（context）。等到初始化结束，这个作用域就会消失。</li> <li>应用
<ul><li>可以指定某一个参数不得省略，如果省略就抛出一个错误</li> <li>可以将参数默认值设为undefined，表明这个参数是可以省略的。</li></ul></li></ul> <h3 id="rest-参数-es6"><a href="#rest-参数-es6" aria-hidden="true" class="header-anchor">#</a> rest 参数[ES6]</h3> <ul><li>形式为<code>...变量名</code>，用于获取函数的多余参数</li> <li>arguments是类数组，rest参数是真数组</li> <li>rest 参数之后不能再有其他参数（即只能是最后一个参数），否则会报错。</li> <li>函数的length属性，不包括 rest 参数。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// arguments变量的写法</span>
<span class="token keyword">function</span> <span class="token function">sortNumbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// rest参数的写法</span>
<span class="token keyword">const</span> <span class="token function-variable function">sortNumbers</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>numbers</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> numbers<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length  <span class="token comment">// 0</span>
</code></pre></div><h3 id="函数内严格模式"><a href="#函数内严格模式" aria-hidden="true" class="header-anchor">#</a> 函数内严格模式</h3> <ul><li>规定只要函数参数使用了默认值、解构赋值、或者扩展运算符，那么函数内部就不能显式设定为严格模式，否则会报错。</li></ul> <h3 id="函数的name属性"><a href="#函数的name属性" aria-hidden="true" class="header-anchor">#</a> 函数的name属性</h3> <ul><li>函数的name属性，返回该函数的函数名。（ES6才将其写入了标准）</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
foo<span class="token punctuation">.</span>name <span class="token comment">// &quot;foo&quot;</span>
</code></pre></div><ul><li>如果将一个匿名函数赋值给一个变量</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// ES5</span>
f<span class="token punctuation">.</span>name <span class="token comment">// &quot;&quot;</span>
<span class="token comment">// ES6</span>
f<span class="token punctuation">.</span>name <span class="token comment">// &quot;f&quot;</span>
</code></pre></div><h3 id="箭头函数"><a href="#箭头函数" aria-hidden="true" class="header-anchor">#</a> 箭头函数</h3> <ul><li>一个参数可以省略圆括号</li> <li>可以省略return和{}，如果返回的是一个对象，要用小括号包裹起来</li> <li>用处
<ul><li>简化回调函数<div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 正常函数写法</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 箭头函数写法</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> x <span class="token operator">*</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li>注意点
<ul><li>函数体内的this对象，就是函数定义生效时所在的对象，例如new一个实例的时候。而不是使用时所在的对象。 在箭头函数中，this指向是固定的</li> <li>不可以当作构造函数(就是不可以使用new命令)</li> <li>没有arguments,可以用 rest 参数代替。</li></ul></li> <li>不适用的场合
<ul><li>定义对象的方法，且该方法内部包括this。</li> <li>需要动态this的时候</li> <li>函数体很复杂，有许多行，或者函数内部有大量的读写操作，不单纯是为了计算值</li></ul></li> <li>嵌套的箭头函数</li></ul> <h3 id="尾调用优化"><a href="#尾调用优化" aria-hidden="true" class="header-anchor">#</a> 尾调用优化</h3> <ul><li>指某个函数的最后一步是调用另一个函数。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">g</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>尾调用优化
<ul><li>尾调用由于是函数的最后一步操作，所以不需要保留外层函数的调用帧，因为调用位置、内部变量等信息都不会再用到了，只要直接用内层函数的调用帧，取代外层函数的调用帧就可以了。</li></ul></li> <li>尾递归
<ul><li>尾调用自身，就称为尾递归。</li> <li>递归非常耗费内存，很容易发生“栈溢出”错误。对于尾递归来说，由于只存在一个调用帧，所以永远不会发生“栈溢出”错误。</li> <li>ES6规定所有实现必须部署“尾调用优化”。</li></ul></li></ul> <h3 id="函数参数的尾逗号"><a href="#函数参数的尾逗号" aria-hidden="true" class="header-anchor">#</a> 函数参数的尾逗号</h3> <ul><li>允许函数的最后一个参数有尾逗号。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">clownsEverywhere</span><span class="token punctuation">(</span>
  <span class="token parameter">param1<span class="token punctuation">,</span>
  param2<span class="token punctuation">,</span></span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>

<span class="token function">clownsEverywhere</span><span class="token punctuation">(</span>
  <span class="token string">'foo'</span><span class="token punctuation">,</span>
  <span class="token string">'bar'</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="delete-操作符"><a href="#delete-操作符" aria-hidden="true" class="header-anchor">#</a> delete 操作符</h3> <ul><li>delete expression
<ul><li>断开引用来间接</li> <li>所有情况都返回true，除非属性是一个自己不可配置的属性</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 例：</span>
<span class="token keyword">delete</span> object<span class="token punctuation">.</span>property 
<span class="token keyword">delete</span> object<span class="token punctuation">[</span><span class="token string">'property'</span><span class="token punctuation">]</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">注意</p> <ul><li>如果删除的属性不存在，delete不会起作用，但仍会返回true</li> <li>delete操作只会在自身的属性上起作用(不会删除原型链上的属性)</li> <li>删除一个数组元素时，数组的长度不受影响</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> trees <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;redwood&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;bay&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;cedar&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;oak&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;maple&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">delete</span> trees<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">3</span> <span class="token keyword">in</span> trees<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">// 这里不会执行</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <h2 id="面试题"><a href="#面试题" aria-hidden="true" class="header-anchor">#</a> 面试题</h2> <h3 id="写一个能遍历对象和数组的foreach函数"><a href="#写一个能遍历对象和数组的foreach函数" aria-hidden="true" class="header-anchor">#</a> 写一个能遍历对象和数组的<code>forEach</code>函数</h3> <p>遍历数组使用<code>forEach</code>，而遍历对象使用<code>for in</code>，但是在实际开发中，可以使用一个函数就遍历两者，jquery 就有这样的函数</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> key
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 准确判断是不是数组</span>
        obj<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">fn</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> item<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// 不是数组就是对象</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            							       		   <span class="token keyword">if</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token function">fn</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token comment">// 注意，这里参数的顺序换了，为了和对象的遍历格式一致</span>
<span class="token function">forEach</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">index<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> item<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">}</span>
<span class="token function">forEach</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="实现一个深拷贝"><a href="#实现一个深拷贝" aria-hidden="true" class="header-anchor">#</a> 实现一个深拷贝</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//递归跳出去的条件，不加的话就相当于死循环</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> obj<span class="token operator">!=</span><span class="token string">'object'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> newObj<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        newObj<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        newObj<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//将obj身上的所有属性复制到newObj身上</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> attr <span class="token keyword">in</span> obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//自己调用自己  （递归）</span>
        newObj<span class="token punctuation">[</span>attr<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">deepCopy</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>attr<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> newObj<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="settimeout设置为0有什么作用？"><a href="#settimeout设置为0有什么作用？" aria-hidden="true" class="header-anchor">#</a> setTimeout设置为0有什么作用？</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> fuc <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token keyword">in</span> fuc<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fuc<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fuc<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//1</span>
<span class="token comment">//2</span>
<span class="token comment">//3</span>
<span class="token comment">//3</span>
<span class="token comment">//3</span>
</code></pre></div><p>虽然设置为0秒后执行任务，实际上是大于0秒才执行的。可是这有什么用呢？</p> <p>用处就在于我们可以改变任务的执行顺序！因为浏览器会在执行完当前任务队列中的任务，再执行setTimeout队列中积累的的任务。</p> <p>通过设置任务在延迟到0s后执行，就能改变任务执行的先后顺序，延迟该任务发生，使之异步执行。</p></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/Frontend/js/jsbasic/zepto.html">
          zepto源码解读
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.50f8ab08.js" defer></script><script src="/assets/js/25.223b5ff2.js" defer></script>
  </body>
</html>
