<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>01-JS基础知识 | yy3535</title>
    <meta name="description" content="yy3535的笔记">
    <link rel="icon" href="/img/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.9cd8b68b.css" as="style"><link rel="preload" href="/assets/js/app.b4c3ed2d.js" as="script"><link rel="preload" href="/assets/js/20.ac80940f.js" as="script"><link rel="prefetch" href="/assets/js/10.e3b15757.js"><link rel="prefetch" href="/assets/js/11.53b29fbc.js"><link rel="prefetch" href="/assets/js/12.b2d04766.js"><link rel="prefetch" href="/assets/js/13.66c9e4d5.js"><link rel="prefetch" href="/assets/js/14.12e0caf2.js"><link rel="prefetch" href="/assets/js/15.81a43167.js"><link rel="prefetch" href="/assets/js/16.af463747.js"><link rel="prefetch" href="/assets/js/17.1138c375.js"><link rel="prefetch" href="/assets/js/18.bf42e511.js"><link rel="prefetch" href="/assets/js/19.ed9b83ea.js"><link rel="prefetch" href="/assets/js/2.7fcb67f0.js"><link rel="prefetch" href="/assets/js/21.22dcda2d.js"><link rel="prefetch" href="/assets/js/22.4e8ec6df.js"><link rel="prefetch" href="/assets/js/23.79e7188f.js"><link rel="prefetch" href="/assets/js/24.2d8a5d91.js"><link rel="prefetch" href="/assets/js/25.eb1a1d57.js"><link rel="prefetch" href="/assets/js/26.03857af4.js"><link rel="prefetch" href="/assets/js/27.31070181.js"><link rel="prefetch" href="/assets/js/28.0a3998a9.js"><link rel="prefetch" href="/assets/js/29.90c35390.js"><link rel="prefetch" href="/assets/js/3.65cfa47c.js"><link rel="prefetch" href="/assets/js/30.72159b9b.js"><link rel="prefetch" href="/assets/js/31.dfbdf92d.js"><link rel="prefetch" href="/assets/js/32.b737d6ed.js"><link rel="prefetch" href="/assets/js/33.ff930308.js"><link rel="prefetch" href="/assets/js/34.75e9c83c.js"><link rel="prefetch" href="/assets/js/35.5e6cc63a.js"><link rel="prefetch" href="/assets/js/36.5ea3eef3.js"><link rel="prefetch" href="/assets/js/37.0eccaa42.js"><link rel="prefetch" href="/assets/js/4.2850ac08.js"><link rel="prefetch" href="/assets/js/5.e509cd3c.js"><link rel="prefetch" href="/assets/js/6.ab25f6f0.js"><link rel="prefetch" href="/assets/js/7.8bf4cf64.js"><link rel="prefetch" href="/assets/js/8.db0f9086.js"><link rel="prefetch" href="/assets/js/9.b72a5e81.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9cd8b68b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.jpg" alt="yy3535" class="logo"> <span class="site-name can-hide">yy3535</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Frontend/" class="nav-link router-link-active">前端</a></div><div class="nav-item"><a href="/Backend/" class="nav-link">后端</a></div><div class="nav-item"><a href="/Operation/" class="nav-link">运维</a></div><div class="nav-item"><a href="https://github.com/yy3535/yy3535" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Frontend/" class="nav-link router-link-active">前端</a></div><div class="nav-item"><a href="/Backend/" class="nav-link">后端</a></div><div class="nav-item"><a href="/Operation/" class="nav-link">运维</a></div><div class="nav-item"><a href="https://github.com/yy3535/yy3535" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>js</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Frontend/js/jsbasic/" class="active sidebar-link">01-JS基础知识</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#_01-变量类型和计算知识点" class="sidebar-link">01-变量类型和计算知识点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#变量类型" class="sidebar-link">变量类型</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#变量计算" class="sidebar-link">变量计算</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#运算符" class="sidebar-link">运算符</a></li></ul></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#答题" class="sidebar-link">答题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#js中使用typeof能得到的哪些类型" class="sidebar-link">JS中使用typeof能得到的哪些类型</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#何时使用-何时使用" class="sidebar-link">何时使用=== 何时使用==</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#js中有哪些内置函数-——-数据封装类对象" class="sidebar-link">JS中有哪些内置函数 —— 数据封装类对象</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#js变量按照存储方式区分为哪些类型，并描述其特点" class="sidebar-link">JS变量按照存储方式区分为哪些类型，并描述其特点</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#如何理解json" class="sidebar-link">如何理解JSON</a></li></ul></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#_02-原型和原型链知识点" class="sidebar-link">02-原型和原型链知识点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#构造函数" class="sidebar-link">构造函数</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#构造函数-扩展" class="sidebar-link">构造函数 - 扩展</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#几个要点" class="sidebar-link">几个要点</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#原型" class="sidebar-link">原型</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#原型链" class="sidebar-link">原型链</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#原型链中的this" class="sidebar-link">原型链中的this</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#instanceof" class="sidebar-link">instanceof</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#扩展参考" class="sidebar-link">扩展参考</a></li></ul></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#答题-2" class="sidebar-link">答题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#如何准确判断一个变量是数组类型" class="sidebar-link">如何准确判断一个变量是数组类型</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#写一个原型链继承的例子" class="sidebar-link">写一个原型链继承的例子</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#描述-new-一个对象的过程" class="sidebar-link">描述 new 一个对象的过程</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#zepto（或其他框架）-源码中如何使用原型链" class="sidebar-link">zepto（或其他框架） 源码中如何使用原型链</a></li></ul></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#_03-作用域和闭包知识点" class="sidebar-link">03-作用域和闭包知识点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#执行上下文" class="sidebar-link">执行上下文</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#this" class="sidebar-link">this</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#作用域" class="sidebar-link">作用域</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#作用域链" class="sidebar-link">作用域链</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#闭包" class="sidebar-link">闭包</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#扩展阅读" class="sidebar-link">扩展阅读</a></li></ul></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#解题" class="sidebar-link">解题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#说一下对变量提升的理解" class="sidebar-link">说一下对变量提升的理解</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#说明-this-几种不同的使用场景" class="sidebar-link">说明 this 几种不同的使用场景</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#创建-10-个-a-标签，点击的时候弹出来对应的序号" class="sidebar-link">创建 10 个 a 标签，点击的时候弹出来对应的序号</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#如何理解作用域" class="sidebar-link">如何理解作用域</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#实际开发中闭包的应用" class="sidebar-link">实际开发中闭包的应用</a></li></ul></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#_04异步知识点" class="sidebar-link">04异步知识点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#什么是异步" class="sidebar-link">什么是异步</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#异步和单线程" class="sidebar-link">异步和单线程</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#异步的问题和解决方案" class="sidebar-link">异步的问题和解决方案</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#参考和扩展阅读" class="sidebar-link">参考和扩展阅读</a></li></ul></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#解答" class="sidebar-link">解答</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#同步和异步的区别是什么？分别举一个同步和异步的例子" class="sidebar-link">同步和异步的区别是什么？分别举一个同步和异步的例子</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#一个关于settimeout的笔试题" class="sidebar-link">一个关于setTimeout的笔试题</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#前端使用异步的场景有哪些" class="sidebar-link">前端使用异步的场景有哪些</a></li></ul></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#_05其他基础知识知识点" class="sidebar-link">05其他基础知识知识点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#正则表达式" class="sidebar-link">正则表达式</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#日期函数" class="sidebar-link">日期函数</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#数组常用-api" class="sidebar-link">数组常用 API</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#字符串常用-api" class="sidebar-link">字符串常用 API</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#对象常用-api" class="sidebar-link">对象常用 API</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#function-api" class="sidebar-link">Function API</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#delete-操作符" class="sidebar-link">delete 操作符</a></li></ul></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#解答-2" class="sidebar-link">解答</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#获取2017-06-10格式的日期" class="sidebar-link">获取2017-06-10格式的日期</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#获取随机数，要求是长度一直的字符串格式" class="sidebar-link">获取随机数，要求是长度一直的字符串格式</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#写一个能遍历对象和数组的foreach函数" class="sidebar-link">写一个能遍历对象和数组的forEach函数</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#实现一个深拷贝" class="sidebar-link">实现一个深拷贝</a></li><li class="sidebar-sub-header"><a href="/Frontend/js/jsbasic/#其他面试题" class="sidebar-link">其他面试题</a></li></ul></li></ul></li><li><a href="/Frontend/js/jsbasic/zepto.html" class="sidebar-link">zepto源码解读</a></li><li><a href="/Frontend/js/jsbasic/shenrubibao.html" class="sidebar-link">深入理解javascript原型链和闭包</a></li><li><a href="/Frontend/js/jswebapi/" class="sidebar-link">02-JS-WEB-API</a></li><li><a href="/Frontend/js/devenv/" class="sidebar-link">03-开发环境</a></li><li><a href="/Frontend/js/runenv/" class="sidebar-link">04-运行环境</a></li><li><a href="/Frontend/js/es6/" class="sidebar-link">ES6</a></li><li><a href="/Frontend/js/designpatterns/" class="sidebar-link">前端设计模式</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>css</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Frontend/css.html" class="sidebar-link">css</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>vue</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Frontend/vue.html" class="sidebar-link">vue</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>webpack</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Frontend/webpack.html" class="sidebar-link">webpack</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>前端跳槽面试必备技巧</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Frontend/viewskills.html" class="sidebar-link">前端跳槽面试必备技巧</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>JS数据结构与算法</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Frontend/algorithm.html" class="sidebar-link">前端算法</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>小工具</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Frontend/vuepress.html" class="sidebar-link">vuepress</a></li><li><a href="/Frontend/markdown.html" class="sidebar-link">markdown</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>自动化测试</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Frontend/automatedTest.html" class="sidebar-link">js单元测试的一门语言Jest</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>其他</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Frontend/other.html" class="sidebar-link">其他</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="_01-js基础知识"><a href="#_01-js基础知识" aria-hidden="true" class="header-anchor">#</a> 01-JS基础知识</h1> <p></p><div class="table-of-contents"><ul><li><a href="#_01-变量类型和计算知识点">01-变量类型和计算知识点</a><ul><li><a href="#变量类型">变量类型</a></li><li><a href="#变量计算">变量计算</a></li><li><a href="#运算符">运算符</a></li></ul></li><li><a href="#答题">答题</a><ul><li><a href="#js中使用-typeof-能得到的哪些类型">JS中使用typeof能得到的哪些类型</a></li><li><a href="#何时使用-何时使用">何时使用=== 何时使用==</a></li><li><a href="#js中有哪些内置函数-——-数据封装类对象">JS中有哪些内置函数 —— 数据封装类对象</a></li><li><a href="#js变量按照存储方式区分为哪些类型，并描述其特点">JS变量按照存储方式区分为哪些类型，并描述其特点</a></li><li><a href="#如何理解json">如何理解JSON</a></li></ul></li><li><a href="#_02-原型和原型链知识点">02-原型和原型链知识点</a><ul><li><a href="#构造函数">构造函数</a></li><li><a href="#构造函数-扩展">构造函数 - 扩展</a></li><li><a href="#几个要点">几个要点</a></li><li><a href="#原型">原型</a></li><li><a href="#原型链">原型链</a></li><li><a href="#原型链中的-this">原型链中的this</a></li><li><a href="#instanceof">instanceof</a></li><li><a href="#扩展参考">扩展参考</a></li></ul></li><li><a href="#答题">答题</a><ul><li><a href="#如何-准确-判断一个变量是数组类型">如何准确判断一个变量是数组类型</a></li><li><a href="#写一个原型链继承的例子">写一个原型链继承的例子</a></li><li><a href="#描述-new-一个对象的过程">描述 new 一个对象的过程</a></li><li><a href="#zepto（或其他框架）-源码中如何使用原型链">zepto（或其他框架） 源码中如何使用原型链</a></li></ul></li><li><a href="#_03-作用域和闭包知识点">03-作用域和闭包知识点</a><ul><li><a href="#执行上下文">执行上下文</a></li><li><a href="#this">this</a></li><li><a href="#作用域">作用域</a></li><li><a href="#作用域链">作用域链</a></li><li><a href="#闭包">闭包</a></li><li><a href="#扩展阅读">扩展阅读</a></li></ul></li><li><a href="#解题">解题</a><ul><li><a href="#说一下对变量提升的理解">说一下对变量提升的理解</a></li><li><a href="#说明-this-几种不同的使用场景">说明 this 几种不同的使用场景</a></li><li><a href="#创建-10-个-a-标签，点击的时候弹出来对应的序号">创建 10 个 a 标签，点击的时候弹出来对应的序号</a></li><li><a href="#如何理解作用域">如何理解作用域</a></li><li><a href="#实际开发中闭包的应用">实际开发中闭包的应用</a></li></ul></li><li><a href="#_04异步知识点">04异步知识点</a><ul><li><a href="#什么是异步">什么是异步</a></li><li><a href="#异步和单线程">异步和单线程</a></li><li><a href="#异步的问题和解决方案">异步的问题和解决方案</a></li><li><a href="#参考和扩展阅读">参考和扩展阅读</a></li></ul></li><li><a href="#解答">解答</a><ul><li><a href="#同步和异步的区别是什么？分别举一个同步和异步的例子">同步和异步的区别是什么？分别举一个同步和异步的例子</a></li><li><a href="#一个关于-settimeout-的笔试题">一个关于setTimeout的笔试题</a></li><li><a href="#前端使用异步的场景有哪些">前端使用异步的场景有哪些</a></li></ul></li><li><a href="#_05其他基础知识知识点">05其他基础知识知识点</a><ul><li><a href="#正则表达式">正则表达式</a></li><li><a href="#日期函数">日期函数</a></li><li><a href="#数组常用-api">数组常用 API</a></li><li><a href="#字符串常用-api">字符串常用 API</a></li><li><a href="#对象常用-api">对象常用 API</a></li><li><a href="#function-api">Function API</a></li><li><a href="#delete-操作符">delete 操作符</a></li></ul></li><li><a href="#解答">解答</a><ul><li><a href="#获取-2017-06-10-格式的日期">获取2017-06-10格式的日期</a></li><li><a href="#获取随机数，要求是长度一直的字符串格式">获取随机数，要求是长度一直的字符串格式</a></li><li><a href="#写一个能遍历对象和数组的-foreach-函数">写一个能遍历对象和数组的forEach函数</a></li><li><a href="#实现一个深拷贝">实现一个深拷贝</a></li><li><a href="#其他面试题">其他面试题</a></li></ul></li></ul></div><p></p> <h2 id="_01-变量类型和计算知识点"><a href="#_01-变量类型和计算知识点" aria-hidden="true" class="header-anchor">#</a> 01-变量类型和计算知识点</h2> <h3 id="变量类型"><a href="#变量类型" aria-hidden="true" class="header-anchor">#</a> 变量类型</h3> <p><strong>值类型</strong>和<strong>引用类型</strong></p> <p><strong>值类型：string,boolean,number,undefined</strong></p> <p><strong>引用类型：object(date,RegExp),array,function,null</strong></p> <p><strong><code>typeof</code>可以区分类型有<code>number</code> <code>string</code> <code>boolean</code> <code>undefined</code>（值类型） <code>function</code> <code>object</code>（引用类型）</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 特例</span>
<span class="token keyword">typeof</span> <span class="token keyword">null</span> <span class="token comment">// object 因为 null 也是引用类型。null 就相当于引用类型中的 undefined</span>
</code></pre></div><h3 id="变量计算"><a href="#变量计算" aria-hidden="true" class="header-anchor">#</a> 变量计算</h3> <h4 id="二进制和八进制表示法-es6"><a href="#二进制和八进制表示法-es6" aria-hidden="true" class="header-anchor">#</a> 二进制和八进制表示法[ES6]</h4> <ul><li>用前缀0b（或0B）和0o（或0O）表示。<div class="language-js extra-class"><pre class="language-js"><code><span class="token number">0b111110111</span> <span class="token operator">===</span> <span class="token number">503</span> <span class="token comment">// true</span>
<span class="token number">0o767</span> <span class="token operator">===</span> <span class="token number">503</span> <span class="token comment">// true</span>
</code></pre></div></li></ul> <h4 id="number-api-es6-全局方法移到了number对象上"><a href="#number-api-es6-全局方法移到了number对象上" aria-hidden="true" class="header-anchor">#</a> Number API[ES6,全局方法移到了Number对象上]</h4> <ul><li>Number.isFinite()
<ul><li>检查一个数值是否为有限的（finite）</li></ul></li> <li>Number.isNaN()
<ul><li>检查一个值是否为NaN</li></ul></li> <li>Number.parseInt()</li> <li>Number.parseFloat()</li> <li>Number.isInteger()
<ul><li>判断一个数值是否为整数。</li> <li>不是数值，返回false</li> <li>25 和 25.0 被视为同一个值</li> <li>数据精度的要求较高，不建议使用</li></ul></li> <li>Number.EPSILON
<ul><li>表示一个极小的常量（是 JavaScript 能够表示的最小精度）</li></ul></li> <li>Number.isSafeInteger()
<ul><li>判断一个整数是否落在这个范围之内。</li> <li>Number.MAX_SAFE_INTEGER（范围上限）</li> <li>Number.MIN_SAFE_INTEGER（范围下限）</li></ul></li></ul> <h4 id="math对象"><a href="#math对象" aria-hidden="true" class="header-anchor">#</a> Math对象</h4> <p>Math 最常用的只有一个 API —— <code>Math.random()</code>，常用于清除浏览器缓存，比如频繁访问一个链接，就在链接后加一个random()</p> <table><thead><tr><th style="text-align:left">功能</th> <th style="text-align:right">API</th></tr></thead> <tbody><tr><td style="text-align:left">random()</td> <td style="text-align:right">[0,1)</td></tr> <tr><td style="text-align:left">ceil(x)</td> <td style="text-align:right">向上取整</td></tr> <tr><td style="text-align:left">floor(x)</td> <td style="text-align:right">向下取整</td></tr> <tr><td style="text-align:left">round(x)</td> <td style="text-align:right">四舍五入</td></tr> <tr><td style="text-align:left">abs(x)</td> <td style="text-align:right">绝对值</td></tr> <tr><td style="text-align:left">max(x,y,z,...n)</td> <td style="text-align:right">求最大值</td></tr> <tr><td style="text-align:left">min(x,y,z...n)</td> <td style="text-align:right">求最小值</td></tr></tbody></table> <p>以下ES6新增：</p> <ul><li>Math.trunc()
<ul><li>去除一个数的小数部分，返回整数部分</li> <li>非数值，内部Number方法将其先转为数值。</li> <li>空值和无法截取整数的值，返回NaN</li></ul></li> <li>Math.sign()
<ul><li>判断一个数到底是正数、负数、还是零。对于非数值，会先将其转换为数值。</li> <li>参数为正数，返回+1；</li> <li>参数为负数，返回-1；</li> <li>参数为 0，返回0；</li> <li>参数为-0，返回-0;</li> <li>其他值，返回NaN。</li></ul></li> <li>Math.cbrt()
<ul><li>计算一个数的立方根</li> <li>内部也是先使用Number方法将其转为数值</li></ul></li> <li>Math.fround()
<ul><li>返回一个数的32位单精度浮点数形式。</li></ul></li> <li>Math.hypot()
<ul><li>返回所有参数的平方和的平方根。</li></ul></li> <li>对数方法</li> <li>双曲函数方法</li> <li>指数运算符（**）
<ul><li>右结合，多个指数运算符连用时，是从最右边开始计算的。<div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 相当于 2 ** (3 ** 2)</span>
<span class="token number">2</span> <span class="token operator">**</span> <span class="token number">3</span> <span class="token operator">**</span> <span class="token number">2</span>
<span class="token comment">// 512</span>
</code></pre></div></li></ul></li></ul> <h3 id="运算符"><a href="#运算符" aria-hidden="true" class="header-anchor">#</a> 运算符</h3> <ul><li>优先级</li></ul> <p>https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Operator_Precedence</p> <ul><li>求余%</li></ul> <h2 id="答题"><a href="#答题" aria-hidden="true" class="header-anchor">#</a> 答题</h2> <h3 id="js中使用typeof能得到的哪些类型"><a href="#js中使用typeof能得到的哪些类型" aria-hidden="true" class="header-anchor">#</a> JS中使用<code>typeof</code>能得到的哪些类型</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">typeof</span> <span class="token keyword">undefined</span> <span class="token comment">// undefined</span>
<span class="token keyword">typeof</span> <span class="token string">'abc'</span> <span class="token comment">// string</span>
<span class="token keyword">typeof</span> <span class="token number">123</span> <span class="token comment">// number</span>
<span class="token keyword">typeof</span> <span class="token boolean">true</span> <span class="token comment">// boolean</span>
<span class="token keyword">typeof</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">// object</span>
<span class="token keyword">typeof</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// object</span>
<span class="token keyword">typeof</span> <span class="token keyword">null</span> <span class="token comment">// object</span>
<span class="token keyword">typeof</span> console<span class="token punctuation">.</span>log <span class="token comment">// function</span>
</code></pre></div><h3 id="何时使用-何时使用"><a href="#何时使用-何时使用" aria-hidden="true" class="header-anchor">#</a> 何时使用<code>===</code> 何时使用<code>==</code></h3> <p>首先你得明白两者的区别。<code>==</code>会先试图类型转换，然后再比较，而<code>===</code>不会类型转换，直接比较。如下例子：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token number">1</span> <span class="token operator">==</span> <span class="token string">'1'</span> <span class="token comment">// true</span>
<span class="token number">1</span> <span class="token operator">===</span> <span class="token string">'1'</span> <span class="token comment">// false</span>
<span class="token number">0</span> <span class="token operator">==</span> <span class="token boolean">false</span> <span class="token comment">// true</span>
<span class="token number">0</span> <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token comment">// false</span>
<span class="token keyword">null</span> <span class="token operator">==</span> <span class="token keyword">undefined</span> <span class="token comment">// true</span>
<span class="token keyword">null</span> <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token comment">// false</span>
</code></pre></div><p>根据 jQuery 源码中的写法，只推荐在一个地方用<code>==</code>，其他地方都必须用<code>===</code>。这个用<code>==</code>的地方就是：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>a <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 这里相当于 obj.a === null || obj.a === undefined ，简写形式</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="js中有哪些内置函数-——-数据封装类对象"><a href="#js中有哪些内置函数-——-数据封装类对象" aria-hidden="true" class="header-anchor">#</a> JS中有哪些内置函数 —— 数据封装类对象</h3> <p><code>Object</code> <code>Array</code> <code>Boolean</code> <code>Number</code> <code>String</code> <code>Function</code> <code>Date</code> <code>RegExp</code> <code>Error</code></p> <p>对于这种问题，回复时能把基本常用的回答上来就可以，没必要背书把所有的都写上。</p> <h3 id="js变量按照存储方式区分为哪些类型，并描述其特点"><a href="#js变量按照存储方式区分为哪些类型，并描述其特点" aria-hidden="true" class="header-anchor">#</a> JS变量按照存储方式区分为哪些类型，并描述其特点</h3> <ul><li>值类型 <code>undefined</code> <code>string</code> <code>number</code> <code>boolean</code></li> <li>引用类型 <code>object</code> <code>function</code></li></ul> <p>最后补充一点，在 JS 中，所有的引用类型都可以自由设置属性</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
obj<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">100</span>

<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
arr<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">100</span>

<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
fn<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">100</span>
</code></pre></div><h3 id="如何理解json"><a href="#如何理解json" aria-hidden="true" class="header-anchor">#</a> 如何理解JSON</h3> <p>这个问题，很容易被一些初学者误答。其实，JSON 是什么？从 JS 角度回答，太简单了，<code>console.log(JSON)</code>得到<code>JSON</code>只是一个对象，有<code>parse</code>和<code>stringify</code>两个方法，使用也非常简单</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>a<span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token constant">JOSN</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'{&quot;a&quot;:10,&quot;b&quot;:20}'</span><span class="token punctuation">)</span>
</code></pre></div><p>我之所以误答，就是怕初学者把这个问题搞大，因为 json 也是一种数据格式，这一点和 xml 一样。但是在 JS 的面试题中，如果问到这个问题，直接说明<code>parse</code>和<code>stringify</code>两个方法的用法即可，面试官如果有追问，你再去继续回答。</p> <h2 id="_02-原型和原型链知识点"><a href="#_02-原型和原型链知识点" aria-hidden="true" class="header-anchor">#</a> 02-原型和原型链知识点</h2> <h3 id="构造函数"><a href="#构造函数" aria-hidden="true" class="header-anchor">#</a> 构造函数</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
    <span class="token keyword">this</span><span class="token punctuation">.</span>class <span class="token operator">=</span> <span class="token string">'class-1'</span>
    <span class="token comment">// return this  // 默认有这一行</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token string">'zhangsan'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
<span class="token comment">// var f1 = new Foo('lisi', 22)  // 创建多个对象</span>
</code></pre></div><p>以上示例是通过<code>new Foo</code>创建出来一个<code>f</code>对象，对象有<code>name</code> <code>age</code> <code>class</code>三个属性，<strong>这样我们就称<code>Foo</code>是<code>f</code>的构造函数</strong>。构造函数这个概念在高级语言中都存在，它就像一个模板一样，可以创建出若干个示例。</p> <p>函数执行的时候，如果前面带有<code>new</code>，那么函数内部的<code>this</code>在执行时就完全不一样了，不带<code>new</code>的情况我们下一章节会讲到。<strong>带<code>new</code>执行时，函数中的<code>this</code>就会变成一个空对象，让程序为其属性赋值，然后最终返回。</strong><code>return this</code>是默认执行的，如何验证？———— 你可以最后加一个<code>return {x:10}</code>试一下。返回之后，<code>f</code>就被赋值成了这个新对象，这样就创建完成了。</p> <h3 id="构造函数-扩展"><a href="#构造函数-扩展" aria-hidden="true" class="header-anchor">#</a> 构造函数 - 扩展</h3> <p>**- <code>var a = {}</code>其实是<code>var a = new Object()</code>的语法糖</p> <ul><li><code>var a = []</code>其实是<code>var a = new Array()</code>的语法糖</li> <li><code>function Foo(){...}</code>其实是<code>var Foo = new Function(...)</code>的语法糖**</li></ul> <p>大家看到以上几点，明白我要表达的意思了吗？</p> <p><strong>如何判断一个函数是否是一个变量的构造函数呢 ———— 使用<code>instanceof</code></strong></p> <h3 id="几个要点"><a href="#几个要点" aria-hidden="true" class="header-anchor">#</a> 几个要点</h3> <p>以下要点，要全部明白并且记住！！！在此我会详细解释</p> <ul><li><strong>所有的引用类型（数组、对象、函数），都具有对象特性，即可自由扩展属性（除了<code>null</code>意外）</strong></li> <li><strong>所有的引用类型（数组、对象、函数），都有一个<code>__proto__</code>(隐式原型)属性，属性值是一个普通的对象</strong></li> <li><strong>所有的函数，都有一个<code>prototype</code>（显示原型）属性，属性值也是一个普通的对象</strong></li> <li><strong>所有的引用类型（数组、对象、函数），<code>__proto__</code>属性值指向它的构造函数的<code>prototype</code>属性值</strong></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> obj<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> arr<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fn</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
fn<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
</code></pre></div><h3 id="原型"><a href="#原型" aria-hidden="true" class="header-anchor">#</a> 原型</h3> <p>我们先将一开始的示例做一下改动，然后看一下执行的效果</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 构造函数</span>
<span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
<span class="token punctuation">}</span>
<span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">alertName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 创建示例</span>
<span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token string">'zhangsan'</span><span class="token punctuation">)</span>
f<span class="token punctuation">.</span><span class="token function-variable function">printName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 测试</span>
f<span class="token punctuation">.</span><span class="token function">printName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
f<span class="token punctuation">.</span><span class="token function">alertName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>执行<code>printName</code>时很好理解，但是执行<code>alertName</code>时发生了什么？这里再记住一个重点 <strong>当试图得到一个对象的某个属性时，如果这个对象本身没有这个属性，那么会去它的<code>__proto__</code>（即它的构造函数的<code>prototype</code>）中寻找</strong></p> <p>那么<strong>如何判断一个这个属性是不是对象本身的属性呢？使用<code>hasOwnProperty</code>，常用的地方是遍历一个对象的时候</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> item
<span class="token keyword">for</span> <span class="token punctuation">(</span>item <span class="token keyword">in</span> f<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 高级浏览器已经在 for in 中屏蔽了来自原型的属性，但是这里建议大家还是加上这个判断，保证程序的健壮性</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="原型链"><a href="#原型链" aria-hidden="true" class="header-anchor">#</a> 原型链</h3> <p>还是接着上面的示例，执行<code>f.toString()</code>时，又发生了什么？因为<code>f</code>本身没有<code>toString()</code>，并且<code>f.__proto__</code>（即<code>Foo.prototype</code>）中也没有<code>toString</code>。这个问题还是得拿出刚才那句话————<strong>当试图得到一个对象的某个属性时，如果这个对象本身没有这个属性，那么会去它的<code>__proto__</code>（即它的构造函数的<code>prototype</code>）中寻找</strong></p> <p>如果在<code>f.__proto__</code>中没有找到<code>toString</code>，那么就继续去<code>f.__proto__.__proto__</code>中寻找，因为<code>f.__proto__</code>就是一个普通的对象而已嘛！</p> <p>这样一直往上找，你会发现是一个链式的结构，所以叫做“原型链”。直到找到最上层都没有找到，那么就宣告失败，返回<code>undefined</code>。最上层是什么 ———— <code>Object.prototype.__proto__ === null</code></p> <h3 id="原型链中的this"><a href="#原型链中的this" aria-hidden="true" class="header-anchor">#</a> 原型链中的<code>this</code></h3> <p>所有的从原型或者更高级的原型中得到、执行的方法，其中的<code>this</code>在执行时，就指向了当前这个触发事件执行的对象。因此<code>printName</code>和<code>alertName</code>中的<code>this</code>都是<code>f</code>。</p> <h3 id="instanceof"><a href="#instanceof" aria-hidden="true" class="header-anchor">#</a> instanceof</h3> <ul><li>原理
<ul><li>如果要计算<code>f instanceof Foo</code>是不是正确，就要判断<code>f</code>的原型一层一层往上，能否对应到<code>Foo.prototype</code>。同理，如果要计算<code>f instanceof Object</code>是不是正确，就要判断<code>f</code>的原型一层一层往上，能否对应到<code>Object.prototype</code></li></ul></li></ul> <h3 id="扩展参考"><a href="#扩展参考" aria-hidden="true" class="header-anchor">#</a> 扩展参考</h3> <p>讲解原型和原型链，绝对要参考我之前写过的文章[《深入理解JS原型和闭包系列博客》]</p> <h2 id="答题-2"><a href="#答题-2" aria-hidden="true" class="header-anchor">#</a> 答题</h2> <h3 id="如何准确判断一个变量是数组类型"><a href="#如何准确判断一个变量是数组类型" aria-hidden="true" class="header-anchor">#</a> 如何<strong>准确</strong>判断一个变量是数组类型</h3> <p>只有<code>instanceof</code>才能判断一个对象是否是真正的数组</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
arr <span class="token keyword">instanceof</span> <span class="token class-name">Array</span> <span class="token comment">// true</span>
<span class="token keyword">typeof</span> arr <span class="token comment">// object，typeof 是无法判断是否是数组的</span>
</code></pre></div><p>扩展：实际应用中，和数组同样重要、起同样作用并且更加灵活的数据结构还是“伪数组”或者“类数据”（jquery 就用到了）。因此，<strong>在实际应用中，只需要判断<code>length</code>属性是否是数字即可。</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">var</span> likeArr <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token number">0</span><span class="token punctuation">:</span> <span class="token string">'aaa'</span><span class="token punctuation">,</span>
    <span class="token number">1</span><span class="token punctuation">:</span> <span class="token string">'bbb'</span><span class="token punctuation">,</span>
    <span class="token number">2</span><span class="token punctuation">:</span> <span class="token string">'ccc'</span><span class="token punctuation">,</span>
    length<span class="token punctuation">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span>

<span class="token keyword">typeof</span> arr<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token string">'number'</span> <span class="token comment">// true</span>
<span class="token keyword">typeof</span> likeArr<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token string">'number'</span> <span class="token comment">// true</span>
</code></pre></div><p>PS：<strong>为何需要要扩展补充？</strong> 在面试过程中，面试官很希望能从你那里得到“惊喜”，即面的他提问的问题，你正确回答之后，还能有所补充，这样你会加分不少。在日常工作中也一样，如果你能在完成工作之后再去考虑如何更有质量、更有效率的完成工作，或者通过本次工作的总结出一种方式，能更好的完成接下来的工作，那你的 leader 绝对高看你一眼。这其实就是我们所说的<strong>积极、主动和工作热情</strong>，光嘴说没用，你得实干。</p> <h3 id="写一个原型链继承的例子"><a href="#写一个原型链继承的例子" aria-hidden="true" class="header-anchor">#</a> 写一个原型链继承的例子</h3> <p>接下来继续回答这个问题。你看其他人的培训或者看书，这个例子一般都会给你弄一些小猫小狗小动物来演示，例如</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 动物</span>
<span class="token keyword">function</span> <span class="token function">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">eat</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'animal eat'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 狗</span>
<span class="token keyword">function</span> <span class="token function">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">bark</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'dog bark'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 哈士奇</span>
<span class="token keyword">var</span> hashiqi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Elem</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token class-name">Elem</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">html</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">var</span> elem<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>elem
	<span class="token keyword">if</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">{</span>
		elem<span class="token punctuation">.</span>innerHTML<span class="token operator">=</span>val
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token comment">//链式操作</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> elem<span class="token punctuation">.</span>innerHTML
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token class-name">Elem</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">on</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span>fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">var</span> elem<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>elem
	elem<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span>fn<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> div1<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Elem</span><span class="token punctuation">(</span><span class="token string">'detail-page'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div1<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
div1<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">'&lt;p&gt;hello imooc&lt;/p&gt;'</span><span class="token punctuation">)</span>
div1<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'clicked'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 构造函数</span>
<span class="token keyword">function</span> <span class="token function">DomElement</span><span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> result <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span>
    <span class="token keyword">var</span> length <span class="token operator">=</span> result<span class="token punctuation">.</span>length
    <span class="token keyword">var</span> i
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> selectorResult<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">=</span> length
<span class="token punctuation">}</span>
<span class="token comment">// 修改原型</span>
<span class="token class-name">DomElement</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
    constructor<span class="token punctuation">:</span> DomElement<span class="token punctuation">,</span>
    <span class="token function-variable function">get</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">[</span>index<span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">forEach</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> i
        <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span>
            <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> elem<span class="token punctuation">,</span> i<span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">break</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">on</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">elem</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            elem<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> fn<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用</span>
<span class="token keyword">var</span> $div <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DomElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
$div<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="描述-new-一个对象的过程"><a href="#描述-new-一个对象的过程" aria-hidden="true" class="header-anchor">#</a> 描述 new 一个对象的过程</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'foo'</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token string">'beijing'</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><p>创建一个新对象</p></li> <li><p><code>this</code>指向这个新对象</p></li> <li><p>执行代码，即对<code>this</code>赋值</p></li> <li><p>返回<code>this</code></p></li> <li><p>创建一个新对象。它继承自foo.prototype</p></li> <li><p>执行foo构造函数里的代码。执行时相应的参数被传入，同时this会被指定为这个新实例。new foo等同于new foo()，只能用在不传递任何参数的情况</p></li> <li><p>如果构造函数返回了一个对象，那么返回这个对象。否则，返回this</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">new2</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">func</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> o<span class="token operator">=</span>Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>func<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> k<span class="token operator">=</span><span class="token function">func</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> k<span class="token operator">===</span><span class="token string">'object'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> k
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> o
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="zepto（或其他框架）-源码中如何使用原型链"><a href="#zepto（或其他框架）-源码中如何使用原型链" aria-hidden="true" class="header-anchor">#</a> zepto（或其他框架） 源码中如何使用原型链</h3> <h2 id="_03-作用域和闭包知识点"><a href="#_03-作用域和闭包知识点" aria-hidden="true" class="header-anchor">#</a> 03-作用域和闭包知识点</h2> <p>本节我们将全面梳理 JS 代码的执行过程，涉及到的概念有非常多。所以大家一定要耐心听，如果你此前不了解这一块，而通过本教程掌握了这方面知识，对你的基础知识将会有质的提醒。</p> <h3 id="执行上下文"><a href="#执行上下文" aria-hidden="true" class="header-anchor">#</a> 执行上下文</h3> <p>先看下面的例子，你可能会对结果比较差异。当然，我不建议在实际开发中通过这种方式来炫技，我们这里演示纯粹是为了讲解知识点做一个铺垫。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>  <span class="token comment">// undefined</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">100</span>

<span class="token function">fn</span><span class="token punctuation">(</span><span class="token string">'zhangsan'</span><span class="token punctuation">)</span>  <span class="token comment">// 'zhangsan' 20</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    age <span class="token operator">=</span> <span class="token number">20</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span>
    <span class="token keyword">var</span> age
<span class="token punctuation">}</span>
</code></pre></div><p>在一段 JS 脚本（即一个<code>&lt;script&gt;</code>标签中）执行之前，会先创建一个<strong>全局执行上下文</strong>环境，先把代码中即将执行的（内部函数的不算，因为你不知道函数何时执行）变量、函数声明（和“函数表达式”的区别）都拿出来。变量先暂时赋值为<code>undefined</code>，函数则先声明好可使用。这一步做完了，然后再开始正式执行程序。再次强调，这是在代码执行之前才开始的工作。</p> <p>另外，一个函数在执行之前，也会创建一个<strong>函数执行上下文</strong>环境，跟<strong>全局上下文</strong>差不多，不过<strong>函数执行上线文</strong>中会多出<code>this</code> <code>arguments</code>和函数的参数。参数和<code>arguments</code>好理解，这里的<code>this</code>咱们需要专门讲解。</p> <p>总结一下</p> <ul><li>范围：一段<code>&lt;script&gt;</code>或者一个函数</li> <li>全局：变量定义，函数声明</li> <li>函数：变量定义，函数声明，this，arguments</li></ul> <h3 id="this"><a href="#this" aria-hidden="true" class="header-anchor">#</a> this</h3> <p>先搞明白一个很重要的概念 ———— <strong><code>this</code>的值是在执行的时候才能确认，定义的时候不能确认！</strong> 为什么呢 ———— 因为<code>this</code>是执行上下文环境的一部分，而执行上下文需要在代码执行之前确定，而不是定义的时候。看如下例子</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">fn</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
a<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// this === a</span>
a<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">'B'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token comment">// this === {name: 'B'}</span>
<span class="token keyword">var</span> fn1 <span class="token operator">=</span> a<span class="token punctuation">.</span>fn
<span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// this === window</span>
</code></pre></div><p><code>this</code>执行会有不同，主要集中在这几个场景中</p> <ul><li>作为构造函数执行（new的时候，this会是一个空对象，在构造函数中赋值后返回）</li> <li>作为对象属性执行（可能有三种结果，如上）</li> <li>作为普通函数执行（可能有两种结果，如下）</li> <li>用于<code>call</code> <code>apply</code> <code>bind</code></li></ul> <p>前两种情况咱们之前都介绍过了，这里只是统一的提出来，汇总一下，不再详细讲了。这里主要说第三种</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// window</span>
<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span>a<span class="token punctuation">:</span><span class="token number">100</span><span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token comment">// {a:100}  和 call 同理的还有 apply bind</span>
</code></pre></div><h3 id="作用域"><a href="#作用域" aria-hidden="true" class="header-anchor">#</a> 作用域</h3> <p>作为有 JS 基础的同学，你应该了解 JS 没有块级作用域。例如</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'zhangsan'</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
</code></pre></div><p>从上面的例子可以体会到作用域的概念，作用域就是一个独立的地盘，让变量不会外泄、暴露出去。上面的<code>name</code>就被暴露出去了，因此，<strong>JS 没有块级作用域，只有全局作用域和函数作用域</strong>。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">100</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">200</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fn'</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'global'</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>全局作用域就是最外层的作用域，如果我们写了很多行 JS 代码，变量定义都没有用函数包括，那么他们就全部都在全局作用域中。这样的坏处就是很容易装车。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 张三写的代码中</span>
<span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>a<span class="token punctuation">:</span><span class="token number">100</span><span class="token punctuation">}</span>

<span class="token comment">// 李四写的代码中</span>
<span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">}</span>
</code></pre></div><p>这就是为何 jquery zepto 等库的源码，所有的代码都会放在<code>(function(){....})()</code>中。因为放在里面的所有变量，都不会被外泄和暴露，不会污染到外面，不会对其他的库或者 JS 脚本造成影响。这是函数作用域的一个体现。</p> <h3 id="作用域链"><a href="#作用域链" aria-hidden="true" class="header-anchor">#</a> 作用域链</h3> <p>首先认识一下什么叫做<strong>自由变量</strong>。如下代码中，<code>console.log(a)</code>要得到<code>a</code>变量，但是在当前的作用域中没有定义<code>a</code>（可对比一下<code>b</code>）。当前作用域没有定义的变量，这成为<strong>自由变量</strong>。自由变量如何得到 ———— 向父级作用域寻找。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">100</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">200</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>如果父级也没呢？再一层一层向上寻找，直到找到全局作用域还是没找到，就宣布放弃。这种一层一层的关系，就是<strong>作用域链</strong>。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">100</span>
<span class="token keyword">function</span> <span class="token constant">F1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">200</span>
    <span class="token keyword">function</span> <span class="token constant">F2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token number">300</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token constant">F2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token constant">F1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="闭包"><a href="#闭包" aria-hidden="true" class="header-anchor">#</a> 闭包</h3> <p>直接看一个例子</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token constant">F1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">100</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> f1 <span class="token operator">=</span> <span class="token constant">F1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">200</span>
<span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>自由变量将从作用域链中去寻找，但是<strong>依据的是函数定义时的作用域链，而不是函数执行时</strong>，以上这个例子就是闭包。闭包主要有两个应用场景：</p> <ul><li>函数作为返回值，上面的例子就是</li> <li>函数作为参数传递，看以下例子</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token constant">F1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">100</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token constant">F2</span><span class="token punctuation">(</span><span class="token parameter">f1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">200</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> f1 <span class="token operator">=</span> <span class="token constant">F1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token constant">F2</span><span class="token punctuation">(</span>f1<span class="token punctuation">)</span>
</code></pre></div><blockquote><p>面试题</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>var name = &quot;The Window&quot;;
var object = {
    name : &quot;My Object&quot;,
    getNameFunc : function(){
        return (function(){
             alert(this.name);
        })();
    },

    getName:function(){
        alert(this.name);
    }
};
object.getNameFunc();  //The Window
object.getName();  //My Object
</code></pre></div><p>答：函数 getNameFunc 内返回一个闭包，因此 this 指向全局对象，所以 this.name 即为定义在全部作用域下的 name（&quot;The Window&quot;）。
而函数 getName 内并未返回闭包，因此 this 指向当前对象，所以 this.name 即为当前作用域下的 name（&quot;My Object&quot;）。</p> <h3 id="扩展阅读"><a href="#扩展阅读" aria-hidden="true" class="header-anchor">#</a> 扩展阅读</h3> <p>请参考我之前写过的文章<a href="http://www.cnblogs.com/wangfupeng1988/p/3977924.html" target="_blank" rel="noopener noreferrer">《深入理解JS原型和闭包系列博客》<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="解题"><a href="#解题" aria-hidden="true" class="header-anchor">#</a> 解题</h2> <h3 id="说一下对变量提升的理解"><a href="#说一下对变量提升的理解" aria-hidden="true" class="header-anchor">#</a> 说一下对变量提升的理解</h3> <p>函数执行时会先创建当前的上下文环境，其中这两点会产生“变量提升”的效果</p> <ul><li>变量定义</li> <li>函数声明</li></ul> <h3 id="说明-this-几种不同的使用场景"><a href="#说明-this-几种不同的使用场景" aria-hidden="true" class="header-anchor">#</a> 说明 this 几种不同的使用场景</h3> <ul><li>作为构造函数执行</li> <li>作为对象属性执行</li> <li>作为普通函数执行</li> <li>call apply bind</li></ul> <h3 id="创建-10-个-a-标签，点击的时候弹出来对应的序号"><a href="#创建-10-个-a-标签，点击的时候弹出来对应的序号" aria-hidden="true" class="header-anchor">#</a> 创建 10 个 a 标签，点击的时候弹出来对应的序号</h3> <p>错误的写法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> i<span class="token punctuation">,</span> a
<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
    a<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token string">'&lt;br&gt;'</span>
    a<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">alert</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>正确的写法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> i
<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
        a<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token string">'&lt;br&gt;'</span>
        a<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token function">alert</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上面的回答已经结束了，但是还有一点可以优化，如果能做到，那将会给你加分。提示一下，是关于 DOM 操作的性能问题的。这里先按下不表，等后面讲解性能问题的时候再说。有兴趣的可以先去查查<code>DocumentFragment</code></p> <h3 id="如何理解作用域"><a href="#如何理解作用域" aria-hidden="true" class="header-anchor">#</a> 如何理解作用域</h3> <p>根据我之前写过的<a href="http://www.cnblogs.com/wangfupeng1988/p/3977924.html" target="_blank" rel="noopener noreferrer">《深入理解JS原型和闭包》<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>系列博客，详细讲解作用域和闭包。</p> <h3 id="实际开发中闭包的应用"><a href="#实际开发中闭包的应用" aria-hidden="true" class="header-anchor">#</a> 实际开发中闭包的应用</h3> <p>闭包的实际应用，主要是用来封装变量。即把变量隐藏起来，不让外面拿到和修改。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">isFirstLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> _list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>_list<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            _list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用</span>
<span class="token keyword">var</span> firstLoad <span class="token operator">=</span> <span class="token function">isFirstLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">firstLoad</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token function">firstLoad</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
<span class="token function">firstLoad</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><h2 id="_04异步知识点"><a href="#_04异步知识点" aria-hidden="true" class="header-anchor">#</a> 04异步知识点</h2> <h3 id="什么是异步"><a href="#什么是异步" aria-hidden="true" class="header-anchor">#</a> 什么是异步</h3> <p>先看下面的 demo，根据程序阅读起来表达的意思，应该是先打印<code>100</code>，1秒钟之后打印<code>200</code>，最后打印<code>300</code>。但是实际运营根本不是那么回事。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span>
</code></pre></div><p>再对比以下程序。先打印<code>100</code>，再弹出<code>200</code>（等待用户确认），最后打印<code>300</code>。这个运行效果就符合预期要求。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>  <span class="token comment">// 1秒钟之后点击确认</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span>
</code></pre></div><p>这俩到底有何区别？———— 第一个示例中间的步骤根本没有阻塞接下来程序的运行，而第二个示例却阻塞了后面程序的运行。前面这种表现就叫做<strong>异步</strong>（后面这个叫做<strong>同步</strong>）</p> <p>为何需要异步呢？如果第一个示例中间步骤是一个 ajax 请求，现在网络比较慢，请求需要5秒钟。如果是同步，这5秒钟页面就卡死在这里啥也干不了了。</p> <p>最后，前端 JS 脚本用到异步的场景主要有两个：</p> <ul><li>定时 <code>setTimeout</code> <code>setInverval</code></li> <li>网络请求，如 <code>ajax</code> <code>&lt;img&gt;</code>加载</li> <li>事件绑定（后面会有解释）</li></ul> <p>ajax 代码示例</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'start'</span><span class="token punctuation">)</span>
$<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'./data1.json'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data1<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">)</span>
</code></pre></div><p>img 代码示例（常用语打点统计）</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'start'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span>
img<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'loaded'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
img<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'/xxx.png'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">)</span>
</code></pre></div><p>事件绑定</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'start'</span><span class="token punctuation">)</span>
document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'clicked'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="异步和单线程"><a href="#异步和单线程" aria-hidden="true" class="header-anchor">#</a> 异步和单线程</h3> <p>JS 在客户端运行的时候，只有一个线程可运行，因此想要两件事儿同时干是不可能的。如果没有异步，我们只能同步干，就像第二个示例一样，等待过程中卡住了，但是有了异步就没有问题了。那么单线程是如何实现异步的呢？</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span>
</code></pre></div><p>那上面的示例来说，有以下几点。重点从这个过程中体会<strong>单线程</strong>这个概念，即事情都是一步一步做的，不能两件事儿一起做。</p> <ul><li>执行第一行，打印<code>100</code></li> <li>执行<code>setTimeout</code>后，传入<code>setTimeout</code>的函数会被暂存起来，不会立即执行。</li> <li>执行最后一行，打印<code>300</code></li> <li>待所有程序执行完，处于空闲状态时，会立马看有没有暂存起来的要执行。</li> <li>发现暂存起来的<code>setTimeout</code>中的函数无需等待时间，就立即来过来执行</li></ul> <p>下面再来一个<code>setTimeout</code>的例子。规则和上面的一样，只不过这里暂存起来的函数，需要等待 1s 之后才能被执行。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span>
</code></pre></div><p>下面再来一个 ajax 的例子。规则也是一样的，只不过这里暂存起来的函数，要等待网络请求返回之后才能被执行，具体时间不一定。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
$<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'./data.json'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span>
</code></pre></div><p>最后再解释一下事件绑定，如下代码。其实事件绑定的实现原理和上面的是一样的，也是会把时间暂存，但是要等待用户点击只有，才能被执行。原理是一样的，因此事件绑定在原理上来说，可以算作是异步。但是从设计上来说，还是分开好理解一些。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
$btn<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>重点：异步的实现机制，以及对单线程的理解</strong></p> <hr> <p>下面的暂时先不讲</p> <h3 id="异步的问题和解决方案"><a href="#异步的问题和解决方案" aria-hidden="true" class="header-anchor">#</a> 异步的问题和解决方案</h3> <p>异步遇到的最大的问题</p> <ul><li>callback-hell</li> <li>易读性差，即书写顺序和执行顺序不一致</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'start'</span><span class="token punctuation">)</span>
$<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'./data1.json'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data1<span class="token punctuation">)</span>
    $<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'./data2.json'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data2<span class="token punctuation">)</span>
        $<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'./data3.json'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data3<span class="token punctuation">)</span>
            $<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'./data4.json'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data4<span class="token punctuation">)</span>
                <span class="token comment">// ...继续嵌套...</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">)</span>
</code></pre></div><p>不过目前已经有了非常明确的解决方案 —— Promise，并且 Promise 放在 ES6 的标准中了。很遗憾本教程的范围不包括 ES6 ，因为 ES6 包含的内容太多了，放在这个教程中会很庞大，成本太高。</p> <blockquote><p>要想把异步讲全面，那得单独需要一门课程花5-7个小时去讲解（JS、jquery、ES6、node）。如果这样一讲，那就又带出了ES6的很多知识，又得花额外的时间去讲解，这样算下来，就得10多个小时。</p></blockquote> <p>我提供了一个参考链接，如果大家有本节课的基础，再去看参考链接的内容，应该能掌握异步更高级的知识。</p> <h3 id="参考和扩展阅读"><a href="#参考和扩展阅读" aria-hidden="true" class="header-anchor">#</a> 参考和扩展阅读</h3> <ul><li><a href="http://www.cnblogs.com/wangfupeng1988/p/6513070.html" target="_blank" rel="noopener noreferrer">深入理解 JavaScript 异步系列（1）——基础<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://www.cnblogs.com/wangfupeng1988/p/6515779.html" target="_blank" rel="noopener noreferrer">深入理解 JavaScript 异步系列（2）—— jquery的解决方案<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://www.cnblogs.com/wangfupeng1988/p/6515855.html" target="_blank" rel="noopener noreferrer">深入理解 JavaScript 异步系列（3）—— ES6 中的 Promise<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://www.cnblogs.com/wangfupeng1988/p/6532713.html" target="_blank" rel="noopener noreferrer">深入理解 JavaScript 异步系列（4）—— Generator<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://www.cnblogs.com/wangfupeng1988/p/6532734.html" target="_blank" rel="noopener noreferrer">深入理解 JavaScript 异步系列（5）—— async await<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="解答"><a href="#解答" aria-hidden="true" class="header-anchor">#</a> 解答</h2> <h3 id="同步和异步的区别是什么？分别举一个同步和异步的例子"><a href="#同步和异步的区别是什么？分别举一个同步和异步的例子" aria-hidden="true" class="header-anchor">#</a> 同步和异步的区别是什么？分别举一个同步和异步的例子</h3> <p>同步会阻塞代码执行，而异步不会。<code>alert</code>是同步，<code>setTimeout</code>是异步</p> <h3 id="一个关于settimeout的笔试题"><a href="#一个关于settimeout的笔试题" aria-hidden="true" class="header-anchor">#</a> 一个关于<code>setTimeout</code>的笔试题</h3> <p>面试题中，<code>setTimeout</code>的基本是必会出现的</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 以下代码执行后，打印出来的结果是什么</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
</code></pre></div><p>该题目的答案是<code>1 3 5 2 4</code>，不知道跟你答对了没有。具体的原理，我们后面再详细讲解。</p> <h3 id="前端使用异步的场景有哪些"><a href="#前端使用异步的场景有哪些" aria-hidden="true" class="header-anchor">#</a> 前端使用异步的场景有哪些</h3> <ul><li>setTimeout setInterval</li> <li>网络请求</li> <li>事件绑定（可以说一下自己的理解）</li></ul> <h2 id="_05其他基础知识知识点"><a href="#_05其他基础知识知识点" aria-hidden="true" class="header-anchor">#</a> 05其他基础知识知识点</h2> <h3 id="正则表达式"><a href="#正则表达式" aria-hidden="true" class="header-anchor">#</a> 正则表达式</h3> <h4 id="正则对象"><a href="#正则对象" aria-hidden="true" class="header-anchor">#</a> 正则对象</h4> <ul><li>正则对象可以匹配变量，pattern 正则表达式的文本，flags(g:全局匹配 i:忽略大小写 m：多行)</li> <li>三种方式
<ul><li>字面量
<ul><li>/xyz/i</li></ul></li> <li>构造函数（返回一个正则表达式字面量）
<ul><li>参数是字符串(字符串里需要转义<code>new RegExp(&quot;\\w+&quot;)</code>)
<ul><li><code>var regex = new RegExp('xyz', 'i');</code> 等价于 <code>var regex = /xyz/i;</code></li></ul></li> <li>参数是正则表示式
<ul><li><code>var regex = new RegExp(/xyz/i);</code> 等价于 <code>var regex = /xyz/i;</code></li></ul></li> <li>参数是正则表示式时第二个参数添加修饰符[ES6]
<ul><li><code>new RegExp(/abc/ig, 'i')</code> i覆盖了ig</li></ul></li></ul></li> <li>工厂符号
<ul><li>RegExp('xyz' ,i)</li></ul></li></ul></li> <li>注意点
<ul><li>正则表达式里有变量</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`^(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>j<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>o<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)`</span></span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <h4 id="正则api"><a href="#正则api" aria-hidden="true" class="header-anchor">#</a> 正则api:</h4> <ul><li>RegExp.prototype.exec(str)
<ul><li>在一个指定字符串中执行一个搜索匹配。返回一个结果数组(匹配的第一个字符串)或 null，并改变lastIndex(再次执行exec时开始搜索的位置)</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token constant">RE_DATE</span> <span class="token operator">=</span> <span class="token regex">/(\d{4})-(\d{2})-(\d{2})/</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> matchObj <span class="token operator">=</span> <span class="token constant">RE_DATE</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'1999-12-31'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回结果</span>
<span class="token punctuation">[</span>
    <span class="token comment">// 匹配的第一个字符串</span>
    <span class="token number">0</span><span class="token punctuation">:</span> <span class="token string">&quot;1999-12-31&quot;</span>
    <span class="token comment">// 所有分组</span>
    <span class="token number">1</span><span class="token punctuation">:</span> <span class="token string">&quot;1999&quot;</span>
    <span class="token number">2</span><span class="token punctuation">:</span> <span class="token string">&quot;12&quot;</span>
    <span class="token number">3</span><span class="token punctuation">:</span> <span class="token string">&quot;31&quot;</span>
    <span class="token comment">// 设置了具名组，并且该组有匹配时的分组捕获</span>
    groups<span class="token punctuation">:</span> <span class="token keyword">undefined</span>
    groups<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        year<span class="token punctuation">:</span><span class="token number">1999</span><span class="token punctuation">,</span>
        month<span class="token punctuation">:</span><span class="token number">12</span><span class="token punctuation">,</span>
        day<span class="token punctuation">:</span><span class="token number">31</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 匹配到的字符位于原始字符串的基于0的索引值</span>
    index<span class="token punctuation">:</span> <span class="token number">0</span>
    <span class="token comment">// 原始字符串	</span>
    input<span class="token punctuation">:</span> <span class="token string">&quot;1999-12-31&quot;</span>
    length<span class="token punctuation">:</span> <span class="token number">4</span>
<span class="token punctuation">]</span>
</code></pre></div></li> <li>RegExp.prototype.test(str)
<ul><li>执行一个检索，用来查看正则表达式与指定的字符串是否匹配。返回 true 或 false。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">'abc'</span>
<span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/^a/i</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div></li> <li>RegExp.prototype.unicode[ES6]
<ul><li>返回是否设置了u修饰符。</li></ul></li> <li>RegExp.prototype.sticky[ES6]
<ul><li>返回是否设置了y修饰符</li></ul></li> <li>RegExp.prototype.flags[ES6]
<ul><li>返回正则表达式的修饰符</li></ul></li></ul> <h4 id="字符串的正则方法"><a href="#字符串的正则方法" aria-hidden="true" class="header-anchor">#</a> 字符串的正则方法</h4> <p>5个方法：match()、replace()、search()、split()、matchAll()</p> <h4 id="规则"><a href="#规则" aria-hidden="true" class="header-anchor">#</a> 规则</h4> <ul><li>默认前一次匹配的结束是下一次匹配的开始</li></ul> <h4 id="字符类"><a href="#字符类" aria-hidden="true" class="header-anchor">#</a> 字符类</h4> <ul><li>[]中括号表示范围
<ul><li><code>[a-zA-Z],[abc],[cf]at</code>,</li> <li><code>[0-9]</code></li> <li><code>[^a-d]</code> 非a-d的字符</li></ul></li> <li>()括号表示里面内容是个整体，优先顺序，|表示或者
<ul><li><code>(cla|pa)ss</code> 表示class或者pass</li></ul></li></ul> <h4 id="预定义字符类"><a href="#预定义字符类" aria-hidden="true" class="header-anchor">#</a> 预定义字符类</h4> <table><thead><tr><th style="text-align:left">符号</th> <th style="text-align:left">含义</th></tr></thead> <tbody><tr><td style="text-align:left">.</td> <td style="text-align:left">匹配除\n换行符外的任何单字符。匹配包括\n在内的所有字符，使用(.</td></tr> <tr><td style="text-align:left">\d</td> <td style="text-align:left">数字字符:[0-9]</td></tr> <tr><td style="text-align:left">\D</td> <td style="text-align:left">非数字字符:[^0-9]</td></tr> <tr><td style="text-align:left">\s</td> <td style="text-align:left">空白字符（空格和换行符）:[\f\n\r\t\v]</td></tr> <tr><td style="text-align:left">\S</td> <td style="text-align:left">非空白字符:[^\s]</td></tr> <tr><td style="text-align:left">\w</td> <td style="text-align:left">单词字符:[a-zA-Z_0-9]</td></tr> <tr><td style="text-align:left">\W</td> <td style="text-align:left">非单词字符:[^\w]</td></tr></tbody></table> <h4 id="量词"><a href="#量词" aria-hidden="true" class="header-anchor">#</a> 量词</h4> <ul><li>允许指定匹配出现的次数,以下为贪婪模式：
|符号|含义|
|:---|:---|
|X?|匹配X零次或一次|
|X*|匹配X零次或多次|
|X+|匹配X一次或多次|
|X{n,m}|匹配n-m次|
|X{n,}|匹配X至少n次|</li></ul> <img src="/img/三种模式.jpg" alt="foo"> <ul><li>量词模式
<ul><li>贪婪：尽量多的匹配目标字符串，且能够回退</li> <li>勉强：尽量少地匹配目标串</li> <li>侵占：尽量多地匹配目标串，且不能回退</li></ul></li></ul> <div class="language-md extra-class"><pre class="language-md"><code>目标串：xfooxxxxxxfoo
贪婪模式：.<span class="token italic"><span class="token punctuation">*</span>foo
匹配一个（<span class="token punctuation">*</span></span>f尽量多地全部字符串匹配，然后到foo，没有字符串了，就回退一个，再回退一个，直到回退三个时满足条件，然后就匹配了一个）
勉强模式：<span class="token italic"><span class="token punctuation">*</span>?foo
匹配两个（第一个字符不是f，所以勉强地吞下一个x，然后第二个开始发现是foo，所以第一次匹配是xfoo,然后第二次吞下很多个xxx后发现xxxxxxfoo符合，所以共匹配两次）
侵占模式：.<span class="token punctuation">*</span></span>+foo
匹配0个（一次性匹配所有字符，不回退，所以后面的foo没有字符串了）
</code></pre></div><div class="language-md extra-class"><pre class="language-md"><code>目标串：232hjdhfd7474$
贪婪模式：\w+[a-z]
匹配一个
勉强模式：\w+?[a-z]
匹配三个
侵占模式：\w++[a-z]
匹配0个
</code></pre></div><h4 id="捕获组"><a href="#捕获组" aria-hidden="true" class="header-anchor">#</a> 捕获组</h4> <ul><li>捕获组：使用括号作为单独的单元来对待的一种方式，可通过程序方便地拿到分组对应的匹配内容</li> <li>作用：
<ul><li>方便程序获取指定组的匹配</li> <li>反向引用时调用</li></ul></li> <li>比如在((A)(B(C)))中，按左括号从左到右来数，有四个括号
<ul><li>1:((A)(B(C)))// 表示整个表达式</li> <li>2:(A)</li> <li>3:(B(C))</li> <li>4:(C)</li></ul></li> <li>具名组匹配（为每一个组匹配指定一个名字）[ES6]
<ul><li>在圆括号内部，模式的头部添加<code>问号 + 尖括号 + 组名（?&lt;year&gt;）</code>，就可以在exec方法返回结果的groups属性上引用该组名。数字序号（matchObj[1]）依然有效。</li> <li>如果具名组as没有找到匹配，那么matchObj.groups.as属性值就是undefined，并且as这个键名在groups是始终存在的。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token constant">RE_OPT_A</span> <span class="token operator">=</span> <span class="token regex">/^(?&lt;as&gt;a+)?$/</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> matchObj <span class="token operator">=</span> <span class="token constant">RE_OPT_A</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

matchObj<span class="token punctuation">.</span>groups<span class="token punctuation">.</span>as <span class="token comment">// undefined</span>
<span class="token string">'as'</span> <span class="token keyword">in</span> matchObj<span class="token punctuation">.</span>groups <span class="token comment">// true</span>
</code></pre></div><ul><li>利用具名组解构赋值(直接从匹配结果上为变量赋值)</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token punctuation">{</span>groups<span class="token punctuation">:</span> <span class="token punctuation">{</span>one<span class="token punctuation">,</span> two<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token regex">/^(?&lt;one&gt;.*):(?&lt;two&gt;.*)$/u</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'foo:bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
one  <span class="token comment">// foo</span>
two  <span class="token comment">// bar</span>
</code></pre></div><ul><li>利用具名组替换（使用$&lt;组名&gt;引用具名组。）
<ul><li>第二个参数是字符串<div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> re <span class="token operator">=</span> <span class="token regex">/(?&lt;year&gt;\d{4})-(?&lt;month&gt;\d{2})-(?&lt;day&gt;\d{2})/u</span><span class="token punctuation">;</span>
<span class="token string">'2015-01-02'</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>re<span class="token punctuation">,</span> <span class="token string">'$&lt;day&gt;/$&lt;month&gt;/$&lt;year&gt;'</span><span class="token punctuation">)</span>
<span class="token comment">// '02/01/2015'</span>
</code></pre></div></li> <li>第二个参数是函数。具名组匹配新增了最后一个函数参数(具名组构成的一个对象)。函数内部可以直接对这个对象进行解构赋值。</li></ul> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token string">'2015-01-02'</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>re<span class="token punctuation">,</span> <span class="token punctuation">(</span>
    matched<span class="token punctuation">,</span> <span class="token comment">// 整个匹配结果 2015-01-02</span>
    capture1<span class="token punctuation">,</span> <span class="token comment">// 第一个组匹配 2015</span>
    capture2<span class="token punctuation">,</span> <span class="token comment">// 第二个组匹配 01</span>
    capture3<span class="token punctuation">,</span> <span class="token comment">// 第三个组匹配 02</span>
    position<span class="token punctuation">,</span> <span class="token comment">// 匹配开始的位置 0</span>
    <span class="token constant">S</span><span class="token punctuation">,</span> <span class="token comment">// 原字符串 2015-01-02</span>
    groups <span class="token comment">// 具名组构成的一个对象 {year, month, day}</span>
<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span>day<span class="token punctuation">,</span> month<span class="token punctuation">,</span> year<span class="token punctuation">}</span> <span class="token operator">=</span> groups<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>day<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>month<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>year<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li>引用（两种引用语法可以同时使用）
<ul><li>\k&lt;组名&gt;</li> <li>数字引用（\1）</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token constant">RE_TWICE</span> <span class="token operator">=</span> <span class="token regex">/^(?&lt;word&gt;[a-z]+)!\k&lt;word&gt;!\1$/</span><span class="token punctuation">;</span>
<span class="token constant">RE_TWICE</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'abc!abc!abc'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token constant">RE_TWICE</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'abc!abc!ab'</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre></div></li></ul></li></ul> <h4 id="反向引用"><a href="#反向引用" aria-hidden="true" class="header-anchor">#</a> 反向引用</h4> <ul><li>使用反斜线\后跟一个数字来表示。数字用来表示需要引用的分组组号</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 匹配两个数字连续出现两次的目标串(如：1212、2424)</span>
<span class="token punctuation">(</span>\d\d<span class="token punctuation">)</span>\<span class="token number">1</span> <span class="token number">12123233</span> 
<span class="token comment">// 匹配一次(\d\d表示匹配两个数字，括号括起来表示是一个分组,\1表示重复这个分组一次)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 匹配html标签</span>
<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">[</span>a<span class="token operator">-</span>zA<span class="token operator">-</span><span class="token constant">Z</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">?</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token operator">|</span>\n<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">?</span><span class="token operator">&lt;</span><span class="token operator">/</span>\<span class="token number">1</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;vId&quot;</span><span class="token operator">&gt;</span>我知道<span class="token operator">&lt;</span>未来<span class="token operator">&gt;</span>的<span class="token operator">&lt;</span>a<span class="token operator">&gt;</span>路<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>很<span class="token operator">&lt;</span>a<span class="token operator">&gt;</span>不好走<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token comment">// 匹配一次（([a-zA-Z]+)是前面的标签名，.*?勉强模式匹配多个非换行字符的标签属性,(.|\n)*.?勉强模式匹配标签中间内容，\1重复前面的标签名）</span>
</code></pre></div><h4 id="非捕获组"><a href="#非捕获组" aria-hidden="true" class="header-anchor">#</a> 非捕获组</h4> <ul><li>概要
<ul><li>分组括号里第一个是?就是非捕获组(不计算在分组里面)</li> <li>好处：不会将匹配到的字符存储在内存中，从而节省内存</li></ul></li> <li>分类
<ul><li><code>(?:Pattern)</code></li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 匹配industry或者Industries</span>
<span class="token comment">// 这种情况有分组</span>
<span class="token function">industr</span><span class="token punctuation">(</span>y<span class="token operator">|</span>ies<span class="token punctuation">)</span>
<span class="token comment">// 改为没有分组的(节省内存)</span>
<span class="token function">industr</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token punctuation">:</span>y<span class="token operator">|</span>ies<span class="token punctuation">)</span>
</code></pre></div><h4 id="零宽度断言"><a href="#零宽度断言" aria-hidden="true" class="header-anchor">#</a> 零宽度断言</h4> <table><thead><tr><th>表达式</th> <th>含义</th> <th>添加时间</th></tr></thead> <tbody><tr><td>x(?=y)</td> <td>先行断言，仅匹配被y跟随的x。</td> <td></td></tr> <tr><td>x(?!y)</td> <td>先行否定断言，仅匹配不被y跟随的x。</td> <td></td></tr> <tr><td>(?&lt;=y)x</td> <td>后行断言，仅匹配x在y后面</td> <td>ES6</td></tr> <tr><td>(?&lt;!y)x</td> <td>后行否定断言，仅匹配x不在y后面</td> <td>ES6</td></tr></tbody></table> <ul><li>例：正则表达式(?&lt;!4)56(?=9)
<ul><li>答：文本56前面不能是4，后面必须是9组成，因此5569匹配，4569不匹配</li></ul></li> <li>例：提取字符串da12bka3434bdca4343bdca234bm中包含在字符a和b之间的数字，但是这个a之前的字符不能是c，b后面的字符必须是d才能提取。
<ul><li>答：通过添加分组拿到分组内容 [^c]a(\d+)bd，通过零宽度断言，去掉前后分组，拿到剩下中间的一个分组 (?&lt;=[^c]a)\d+(?=bd)</li></ul></li></ul> <h4 id="模式修政符"><a href="#模式修政符" aria-hidden="true" class="header-anchor">#</a> 模式修政符</h4> <ul><li>可组合搭配使用</li></ul> <table><thead><tr><th>表达式</th> <th>含义</th> <th>添加时间</th></tr></thead> <tbody><tr><td>i</td> <td>不区分大小写</td> <td></td></tr> <tr><td>g</td> <td>全局匹配</td> <td></td></tr> <tr><td>m</td> <td>多行修饰符，使^和$匹配每一行的行首和行尾</td> <td></td></tr> <tr><td>s</td> <td>设置为dotAll模式，使.可以匹配任意单个字符</td> <td>ES6</td></tr> <tr><td>x</td> <td></td> <td></td></tr> <tr><td>e</td> <td></td> <td></td></tr> <tr><td>u</td> <td>处理大于\uFFFF的 Unicode 字符</td> <td>ES6</td></tr> <tr><td>y</td> <td>与g修饰符类似，也是全局匹配，但匹配必须从剩余的第一个位置开始</td> <td>ES6</td></tr></tbody></table> <h4 id="边界匹配器"><a href="#边界匹配器" aria-hidden="true" class="header-anchor">#</a> 边界匹配器</h4> <table><thead><tr><th>表达式</th> <th>含义</th></tr></thead> <tbody><tr><td>^</td> <td>行首</td></tr> <tr><td>$</td> <td>行尾</td></tr> <tr><td>\b</td> <td>匹配一个单词边界</td></tr> <tr><td>\B</td> <td>匹配非单词边界</td></tr></tbody></table> <div class="language-md extra-class"><pre class="language-md"><code>I say thank you
thank you 
thank you all the same
<span class="token comment">&lt;!-- 查找以thank开头的行：^thank，匹配两项--&gt;</span>
<span class="token comment">&lt;!-- 查找以thank开头以same结尾的行：^thank.*same$，匹配一项 --&gt;</span>
</code></pre></div><h4 id="regexp-​-1-9"><a href="#regexp-​-1-9" aria-hidden="true" class="header-anchor">#</a> RegExp.​$1...$9</h4> <ul><li>值为String类型</li> <li>返回上一次正则表达式匹配中，第n个子表达式所匹配的文本。（只保存最前面的9个匹配文本。）</li></ul> <h4 id="p-和-p"><a href="#p-和-p" aria-hidden="true" class="header-anchor">#</a> \p{...}和\P{...}</h4> <ul><li>允许正则表达式匹配符合 Unicode 某种属性的所有字符</li> <li>这两种类只对 Unicode 有效，所以使用的时候一定要加上u修饰符。</li> <li>由于 Unicode 的各种属性非常多，所以这种新的类的表达能力非常强。<div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 匹配所有数字</span>
<span class="token keyword">const</span> regex <span class="token operator">=</span> <span class="token regex">/^\p{Number}+$/u</span><span class="token punctuation">;</span>
regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'²³¹¼½¾'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'㉛㉜㉝'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'ⅠⅡⅢⅣⅤⅥⅦⅧⅨⅩⅪⅫ'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token comment">// 匹配所有空格</span>
\p<span class="token punctuation">{</span>White_Space<span class="token punctuation">}</span>

<span class="token comment">// 匹配各种文字的所有字母，等同于 Unicode 版的 \w</span>
<span class="token punctuation">[</span>\p<span class="token punctuation">{</span>Alphabetic<span class="token punctuation">}</span>\p<span class="token punctuation">{</span>Mark<span class="token punctuation">}</span>\p<span class="token punctuation">{</span>Decimal_Number<span class="token punctuation">}</span>\p<span class="token punctuation">{</span>Connector_Punctuation<span class="token punctuation">}</span>\p<span class="token punctuation">{</span>Join_Control<span class="token punctuation">}</span><span class="token punctuation">]</span>

<span class="token comment">// 匹配各种文字的所有非字母的字符，等同于 Unicode 版的 \W</span>
<span class="token punctuation">[</span><span class="token operator">^</span>\p<span class="token punctuation">{</span>Alphabetic<span class="token punctuation">}</span>\p<span class="token punctuation">{</span>Mark<span class="token punctuation">}</span>\p<span class="token punctuation">{</span>Decimal_Number<span class="token punctuation">}</span>\p<span class="token punctuation">{</span>Connector_Punctuation<span class="token punctuation">}</span>\p<span class="token punctuation">{</span>Join_Control<span class="token punctuation">}</span><span class="token punctuation">]</span>

<span class="token comment">// 匹配 Emoji</span>
<span class="token operator">/</span>\p<span class="token punctuation">{</span>Emoji_Modifier_Base<span class="token punctuation">}</span>\p<span class="token punctuation">{</span>Emoji_Modifier<span class="token punctuation">}</span><span class="token operator">?</span><span class="token operator">|</span>\p<span class="token punctuation">{</span>Emoji_Presentation<span class="token punctuation">}</span><span class="token operator">|</span>\p<span class="token punctuation">{</span>Emoji<span class="token punctuation">}</span>\uFE0F<span class="token operator">/</span>gu

<span class="token comment">// 匹配所有的箭头字符</span>
<span class="token keyword">const</span> regexArrows <span class="token operator">=</span> <span class="token regex">/^\p{Block=Arrows}+$/u</span><span class="token punctuation">;</span>
regexArrows<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'←↑→↓↔↕↖↗↘↙⇏⇐⇑⇒⇓⇔⇕⇖⇗⇘⇙⇧⇩'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div></li></ul> <h4 id="综合实例"><a href="#综合实例" aria-hidden="true" class="header-anchor">#</a> 综合实例</h4> <ul><li>URL</li></ul> <div class="language-md extra-class"><pre class="language-md"><code>/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]<span class="token italic"><span class="token punctuation">*</span>)<span class="token punctuation">*</span></span>\/?$/
<span class="token comment">&lt;!-- http或者https开头，http和https可有可无，数字或者小写字母或者.或者-有一个及以上，然后.，然后2-6个小写字母或者.的字符串，然后单词或者空格或者.或者-有0个及以上，整个分组0个及以上，然后/有或者没有，结束。 --&gt;</span>
/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([?=&amp;\/\w \.-]<span class="token italic"><span class="token punctuation">*</span>)<span class="token punctuation">*</span></span>\/?$/
<span class="token comment">&lt;!-- 修改加上?=&amp;后可匹配带参数url --&gt;</span>
</code></pre></div><h3 id="日期函数"><a href="#日期函数" aria-hidden="true" class="header-anchor">#</a> 日期函数</h3> <p>日期函数最常用的 API 如下</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 获取当前时间毫秒数</span>
<span class="token keyword">var</span> dt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
dt<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 获取毫秒数</span>
dt<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 年</span>
dt<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 月（0 - 11）</span>
dt<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 日（0 - 31）</span>
dt<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 小时（0 - 23）</span>
dt<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 分钟（0 - 59）</span>
dt<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 秒（0 - 59）</span>
</code></pre></div><h3 id="数组常用-api"><a href="#数组常用-api" aria-hidden="true" class="header-anchor">#</a> 数组常用 API</h3> <table><thead><tr><th style="text-align:left">功能</th> <th style="text-align:right">API</th></tr></thead> <tbody><tr><td style="text-align:left">合并、切割</td> <td style="text-align:right">concat,join,slice</td></tr> <tr><td style="text-align:left">添加</td> <td style="text-align:right">unshift(从头),push(从末尾)</td></tr> <tr><td style="text-align:left">删除</td> <td style="text-align:right">shift(从头),pop(从末尾)</td></tr> <tr><td style="text-align:left">删除并添加</td> <td style="text-align:right">splice</td></tr> <tr><td style="text-align:left">排序</td> <td style="text-align:right">sort,reverse</td></tr> <tr><td style="text-align:left">转换</td> <td style="text-align:right">toString,toLocaleString,toSource,ValueOf</td></tr> <tr><td style="text-align:left">遍历</td> <td style="text-align:right">map,forEach,reduce</td></tr> <tr><td style="text-align:left">筛选</td> <td style="text-align:right">filter,every,some</td></tr> <tr><td style="text-align:left">转换成数组</td> <td style="text-align:right">Array.from</td></tr></tbody></table> <ul><li>toString() 方法可把数组转换为字符串，并返回结果。</li></ul> <p>注意： 数组中的元素之间用逗号分隔。</p> <ul><li>concat() 方法用于连接两个或多个数组。</li></ul> <p>该方法不会改变现有的数组，而仅仅会返回被连接数组的一个副本。</p> <div class="language-js extra-class"><pre class="language-js"><code>arrayObject<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arrayX<span class="token punctuation">,</span>arrayX<span class="token punctuation">,</span><span class="token operator">...</span><span class="token operator">...</span><span class="token punctuation">,</span>arrayX<span class="token punctuation">)</span>
</code></pre></div><ul><li>Array.slice()</li></ul> <p>方法可从已有的数组中返回选定的元素。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 包前不包后[start,end)</span>
arrayObject<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span>end<span class="token punctuation">)</span>
</code></pre></div><ul><li>Array.splice</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>array<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span>howmany<span class="token punctuation">,</span>item1<span class="token punctuation">,</span><span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>itemX<span class="token punctuation">)</span>
<span class="token comment">// 返回被删除的元素的数组。</span>
</code></pre></div><ul><li>Array.forEach</li></ul> <p>遍历数组的所有元素</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> item<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>Array.every</li></ul> <p>判断所有的数组元素，都满足一个条件</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> ture
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
</code></pre></div><ul><li>Array.some</li></ul> <p>判断所有的数组元素，只要有一个满足条件即可</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> ture
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
</code></pre></div><ul><li>Array.sort
<ul><li>默认从小到大arr.sort()</li></ul></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>
<span class="token keyword">var</span> arr2 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 从小到大排序</span>
    <span class="token keyword">return</span> a <span class="token operator">-</span> b
    <span class="token comment">// 从大到小排序</span>
    <span class="token comment">// return b - a</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span>
</code></pre></div><ul><li>Array.map</li></ul> <p>第一个函数返回对数组每个元素进行操作，创建一个新数组</p> <div class="language- extra-class"><pre class="language-text"><code>Array.map(function(currentValue,index,arr),this.Value)
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>
<span class="token keyword">var</span> arr2 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 将元素重新组装，并返回</span>
    <span class="token keyword">return</span> <span class="token string">'&lt;b&gt;'</span> <span class="token operator">+</span> item <span class="token operator">+</span> <span class="token string">'&lt;/b&gt;'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span>
</code></pre></div><ul><li>Array.filter</li></ul> <p>第一个函数返回筛选条件，筛选符合条件的元素。</p> <div class="language- extra-class"><pre class="language-text"><code>Array.filter(function(currentValue,index,arr),this.Value)
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token keyword">var</span> arr2 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 通过某一个条件过滤数组</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token operator">&gt;=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span>
</code></pre></div><ul><li>Array.reduce</li></ul> <p>第一个函数返回总值和每一项的计算，对数组进行计算后得到结果</p> <div class="language-js extra-class"><pre class="language-js"><code>Array<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">total<span class="token punctuation">,</span>currentValue<span class="token punctuation">,</span>index<span class="token punctuation">,</span>arr</span><span class="token punctuation">)</span><span class="token punctuation">,</span>initialValue<span class="token punctuation">)</span>
</code></pre></div><ul><li>Array.from
<ul><li>通过拥有 length 属性的对象或可迭代的对象来返回一个数组。</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>object<span class="token punctuation">,</span> mapFunction<span class="token punctuation">,</span> thisValue<span class="token punctuation">)</span>
</code></pre></div><ul><li>Array.fill(value, start, end)
<ul><li>value：填充值。</li> <li>start：填充起始位置，可以省略。</li> <li>end：填充结束位置，可以省略，实际结束位置是end-1。</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 采用一个默认值填初始化数组。</span>
<span class="token keyword">const</span> a1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">]</span>
a1<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>‘<span class="token operator">%</span>s‘<span class="token punctuation">,</span> a1<span class="token punctuation">)</span><span class="token comment">// 7,7,7,7,7,7,7,7,7,7,7</span>
</code></pre></div><ul><li>Array.slice(start,end)
<ul><li>start 必需，负数指倒数开始</li> <li>end 可选，不指定就是到最后</li> <li>返回一个新的数组，包含从 start 到 end （不包括该元素）的 arrayObject 中的元素。</li></ul></li></ul> <p>Array​.from()
Array​.isArray()
Array.of()
Array​.prototype​.concat()
Array​.prototype​.copy​Within()
Array​.prototype​.entries()
Array​.prototype​.every()
Array​.prototype​.fill()
Array​.prototype​.filter()
Array​.prototype​.find()
Array​.prototype​.find​Index()
Array​.prototype​.flat()
Array​.prototype​.flatMap()
Array​.prototype​.for​Each()
Array​.prototype​.includes()
Array​.prototype​.indexOf()
Array​.prototype​.join()
Array​.prototype​.keys()
Array​.prototype​.last​IndexOf()
Array​.prototype​.map()
Array​.prototype​.pop()
Array​.prototype​.push()
Array​.prototype​.reduce()
Array​.prototype​.reduce​Right()
Array​.prototype​.reverse()
Array​.prototype​.shift()
Array​.prototype​.slice()
Array​.prototype​.some()
Array​.prototype​.sort()
Array​.prototype​.splice()
Array​.prototype​.toLocale​String()
Array​.prototype​.toString()
Array​.prototype​.unshift()
Array​.prototype​.values()</p> <h3 id="字符串常用-api"><a href="#字符串常用-api" aria-hidden="true" class="header-anchor">#</a> 字符串常用 API</h3> <table><thead><tr><th style="text-align:left">功能</th> <th style="text-align:right">ES5 API</th> <th style="text-align:right">ES6 API</th></tr></thead> <tbody><tr><td style="text-align:left">查找</td> <td style="text-align:right">indexOf,lastIndexOf,charAt,</td> <td style="text-align:right">String.fromCodePoint,codePointAt,includes,startsWith,endsWith</td></tr> <tr><td style="text-align:left">合并，切割</td> <td style="text-align:right">concat,slice[),subString[),subStr,splite</td> <td style="text-align:right"></td></tr> <tr><td style="text-align:left">匹配</td> <td style="text-align:right">match,replace,search</td> <td style="text-align:right">matchAll</td></tr> <tr><td style="text-align:left">格式化</td> <td style="text-align:right">toLowerCase,toUpperCase,trim,repeat</td> <td style="text-align:right">String.fromCodePoint, String.raw,codePointAt,padStart,padEnd,trimStart,trimEnd</td></tr></tbody></table> <h4 id="查找"><a href="#查找" aria-hidden="true" class="header-anchor">#</a> 查找</h4> <ul><li><p>charAt()</p></li> <li><p>charCodeAt()</p></li> <li><p>indexOf()</p></li> <li><p>lastIndexOf()</p></li> <li><p>String.fromCodePoint()</p> <ul><li>可以识别大于0xFFFF的字符，弥补了String.fromCharCode()方法的不足。</li> <li>多个参数，会被合并成一个字符串返回。</li> <li>与codePointAt()方法相反，定义在String对象上，codePointAt方法定义在字符串的实例对象上。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>String<span class="token punctuation">.</span><span class="token function">fromCodePoint</span><span class="token punctuation">(</span><span class="token number">0x20BB7</span><span class="token punctuation">)</span>
<span class="token comment">// &quot;𠮷&quot;</span>
String<span class="token punctuation">.</span><span class="token function">fromCodePoint</span><span class="token punctuation">(</span><span class="token number">0x78</span><span class="token punctuation">,</span> <span class="token number">0x1f680</span><span class="token punctuation">,</span> <span class="token number">0x79</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'x\uD83D\uDE80y'</span>
<span class="token comment">// true</span>
</code></pre></div></li> <li><p>str.codePointAt()</p> <ul><li>返回一个字符的码点（能够正确处理 4 个字节储存的字符）</li> <li>是测试一个字符由两个字节还是由四个字节组成的最简单方法</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token string">&quot;𠮷&quot;</span><span class="token punctuation">;</span>

s<span class="token punctuation">.</span>length <span class="token comment">// 2</span>
s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// ''</span>
s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// ''</span>
s<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 55362</span>
s<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 57271</span>
</code></pre></div><ul><li>includes()
<ul><li>返回布尔值，表示是否找到了参数字符串。</li> <li>支持第二个参数，表示开始搜索的位置。</li></ul></li> <li>startsWith()
<ul><li>返回布尔值，表示参数字符串是否在原字符串的头部。</li> <li>支持第二个参数，表示开始搜索的位置。</li></ul></li> <li>endsWith()
<ul><li>返回布尔值，表示参数字符串是否在原字符串的尾部。</li> <li>支持第二个参数，表示开始搜索的位置。</li></ul></li></ul> <h4 id="合并、切割"><a href="#合并、切割" aria-hidden="true" class="header-anchor">#</a> 合并、切割</h4> <ul><li>concat()</li> <li>slice()</li> <li>substring()</li> <li>str.split([separator[, limit]])
<ul><li>把一个字符串按分隔符分割成字符串数组</li> <li>separator【必需】字符串或正则表达式(如果空字符串(&quot;&quot;)被用作分隔符，则字符串会在每个字符之间分割。)</li> <li>limit【可选】返回数组的最大长度</li></ul></li></ul> <h4 id="匹配"><a href="#匹配" aria-hidden="true" class="header-anchor">#</a> 匹配</h4> <ul><li><p>str.replace(regexp|substr, newSubStr|function)</p> <ul><li>替换</li> <li>第二个参数是字符串</li> <li>第二个参数是函数</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'2015-01-02'</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>re<span class="token punctuation">,</span> <span class="token punctuation">(</span>
      matched<span class="token punctuation">,</span> <span class="token comment">// 整个匹配结果 2015-01-02</span>
      capture1<span class="token punctuation">,</span> <span class="token comment">// 第一个组匹配 2015</span>
      capture2<span class="token punctuation">,</span> <span class="token comment">// 第二个组匹配 01</span>
      capture3<span class="token punctuation">,</span> <span class="token comment">// 第三个组匹配 02</span>
      position<span class="token punctuation">,</span> <span class="token comment">// 匹配开始的位置 0</span>
      <span class="token constant">S</span><span class="token punctuation">,</span> <span class="token comment">// 原字符串 2015-01-02</span>
      groups <span class="token comment">// 具名组构成的一个对象 {year, month, day}[ES6]</span>
  <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> <span class="token punctuation">{</span>day<span class="token punctuation">,</span> month<span class="token punctuation">,</span> year<span class="token punctuation">}</span> <span class="token operator">=</span> groups<span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>day<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>month<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>year<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>str.search(regexp)</p> <ul><li>对正则表达式和指定字符串进行匹配搜索</li> <li>匹配成功，返回首次匹配项的索引，否则返回-1</li></ul></li> <li><p>str.match(regexp)</p> <ul><li>可在字符串内检索指定的值，或找到一个或多个正则表达式的匹配。</li> <li>返回匹配结果的数组（数组的内容看regexp是否加了全局标志g）</li></ul></li> <li><p>str.matchAll()</p> <ul><li>如果一个正则表达式在字符串里面有多个匹配，一般使用g修饰符或y修饰符，在循环里面逐一取出。</li> <li>返回一个正则表达式在当前字符串的所有匹配(返回一个遍历器,用for...of循环)</li> <li>转数组（...运算符或Array.from方法）</li></ul></li></ul> <h4 id="格式化"><a href="#格式化" aria-hidden="true" class="header-anchor">#</a> 格式化</h4> <ul><li>toLocaleLowerCase()</li> <li>toLocaleUpperCase()</li> <li>toLowerCase()</li> <li>toString()</li> <li>toUpperCase()</li> <li>trim()</li> <li>trimRight()</li> <li>trimLeft()</li> <li>valueOf()</li> <li>String.fromCharCode()
<ul><li>从 Unicode 码点返回对应字符(不能识别码点大于0xFFFF的字符)</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token number">0x20BB7</span><span class="token punctuation">)</span>
<span class="token comment">// &quot;ஷ&quot;</span>
</code></pre></div><ul><li>String.raw()
<ul><li>返回一个斜杠都被转义（即斜杠前面再加一个斜杠）的字符串</li></ul></li> <li>str.repeat(count)
<ul><li>返回一个新字符串，表示将原字符串重复n次。参数必须为正数</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;abc&quot;</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>     <span class="token comment">// RangeError: 必须为正数</span>
<span class="token string">&quot;abc&quot;</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>      <span class="token comment">// &quot;&quot;</span>
<span class="token string">&quot;abc&quot;</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>      <span class="token comment">// &quot;abc&quot;</span>
<span class="token string">&quot;abc&quot;</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>      <span class="token comment">// &quot;abcabc&quot;</span>
</code></pre></div></li> <li>normalize()
<ul><li>将字符的不同表示方法统一为同样的形式，这称为 Unicode 正规化。</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'\u01D1'</span><span class="token punctuation">.</span><span class="token function">normalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'\u004F\u030C'</span><span class="token punctuation">.</span><span class="token function">normalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// true</span>
</code></pre></div><ul><li>str.padStart()，str.padEnd()
<ul><li>如果某个字符串不够指定长度，会在头部或尾部补全。padStart()用于头部补全，padEnd()用于尾部补全。</li> <li>如果原字符串的长度，等于或大于最大长度，则字符串补全不生效，返回原字符串。</li> <li>省略第二个参数，默认使用空格补全长度</li> <li>用途
<ul><li>为数值补全指定位数</li> <li>提示字符串格式</li></ul></li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'x'</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'ab'</span><span class="token punctuation">)</span> <span class="token comment">// 'ababx'</span>
<span class="token string">'x'</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'ab'</span><span class="token punctuation">)</span> <span class="token comment">// 'abax'</span>

<span class="token string">'x'</span><span class="token punctuation">.</span><span class="token function">padEnd</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'ab'</span><span class="token punctuation">)</span> <span class="token comment">// 'xabab'</span>
<span class="token string">'x'</span><span class="token punctuation">.</span><span class="token function">padEnd</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'ab'</span><span class="token punctuation">)</span> <span class="token comment">// 'xaba'</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 提示字符串格式</span>
<span class="token number">12</span><span class="token string">'.padStart(10, '</span><span class="token constant">YYYY</span><span class="token operator">-</span><span class="token constant">MM</span><span class="token operator">-</span><span class="token constant">DD</span>'<span class="token punctuation">)</span> <span class="token comment">// &quot;YYYY-MM-12&quot;</span>
<span class="token string">'09-12'</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'YYYY-MM-DD'</span><span class="token punctuation">)</span> <span class="token comment">// &quot;YYYY-09-12&quot;</span>
</code></pre></div><ul><li>str.trimStart()，str.trimEnd()
<ul><li>trimStart()消除字符串头部的空格</li> <li>trimEnd()消除尾部的空格。</li> <li>返回新字符串，不修改原始字符串。</li></ul></li></ul> <h3 id="对象常用-api"><a href="#对象常用-api" aria-hidden="true" class="header-anchor">#</a> 对象常用 API</h3> <h4 id="object-构造函数的方法"><a href="#object-构造函数的方法" aria-hidden="true" class="header-anchor">#</a> Object 构造函数的方法</h4> <ul><li><p>Object.assign(target, ...sources)
通过复制一个或多个对象来创建一个新的对象。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> copy <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>copy<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { a: 1 }</span>
</code></pre></div></li> <li><p>Object.create()</p> <ul><li>使用指定的原型对象和属性创建一个新对象。</li></ul></li> <li><p>Object.defineProperty()</p> <ul><li>在一个对象上定义一个新属性，或者修改一个对象的现有属性， 并返回这个对象。
<ul><li>添加的属性不可修改</li> <li>属性无法看到但是可以取到（可以枚举）</li></ul></li> <li>描述符
<ul><li>configurable(为true时属性描述符才能被改变，属性也能被删除。默认false)</li> <li>enumerable(为true时出现在对象的枚举属性中，默认false)。</li> <li>数据描述符和存取描述符二选一
<ul><li>数据描述符
<ul><li>value(任意javascript值,默认undefined)</li> <li>writable(为true时value能被修改，默认false)</li></ul></li> <li>存取描述符
<ul><li>get
<ul><li>给属性提供 getter 的方法，访问属性时被执行</li> <li>默认undefined</li> <li>没有参数传入，会传入this对象</li></ul></li> <li>set
<ul><li>给属性提供 setter 的方法，属性值修改时触发</li> <li>默认undefined</li> <li>一个参数：新值</li></ul></li></ul></li></ul></li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> temp<span class="token punctuation">;</span>
<span class="token comment">// get第一种写法</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> temp
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">set</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">{</span>
      temp<span class="token operator">=</span>val<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// get第二种写法</span>
<span class="token keyword">let</span> obj<span class="token operator">=</span><span class="token punctuation">{</span>
  temp<span class="token punctuation">:</span><span class="token string">''</span><span class="token punctuation">,</span>
  <span class="token keyword">get</span> <span class="token constant">PI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>temp
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">set</span> <span class="token constant">PI</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>temp<span class="token operator">=</span>val<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
obj<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">'小明'</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">使用场景</p> <ul><li>class的实现</li> <li>vue的MVVM</li> <li>mobx</li> <li>装饰器</li> <li>koa</li></ul></div></li> <li><p>Object.keys()</p> <ul><li>返回一个包含所有给定对象自身可枚举属性名称的数组。</li></ul></li> <li><p>Object.setPrototypeOf()</p> <ul><li>设置对象的原型（即内部 [[Prototype]] 属性）。</li></ul></li></ul> <h4 id="object-实例的方法"><a href="#object-实例的方法" aria-hidden="true" class="header-anchor">#</a> Object 实例的方法</h4> <ul><li>Object.prototype.hasOwnProperty()
<ul><li>返回一个布尔值 ，表示某个对象是否含有指定的属性，而且此属性非原型链继承的。</li></ul></li> <li>Object.prototype.isPrototypeOf()
<ul><li>返回一个布尔值，表示指定的对象是否在本对象的原型链中。</li></ul></li> <li>Object.prototype.toString()
<ul><li>返回对象的字符串表示。</li></ul></li> <li>Object.prototype.valueOf()
<ul><li>返回指定对象的原始值。</li></ul></li></ul> <div class="tip custom-block"><p class="custom-block-title">注意</p> <ul><li>obj.xxx(xxx是变量要用[xxx])</li> <li>for-in</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    x<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    y<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
    z<span class="token punctuation">:</span> <span class="token number">300</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> key
<span class="token keyword">for</span> <span class="token punctuation">(</span>key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <h3 id="function-api"><a href="#function-api" aria-hidden="true" class="header-anchor">#</a> Function API</h3> <ul><li>实例的方法
<ul><li>Function.prototype.apply(thisArg, [argsArray])
<ul><li>在一个对象的上下文中应用另一个对象的方法</li> <li>参数能够以数组形式传入。(数组元素将作为单独的参数传给 func 函数)</li></ul></li> <li>Function.prototype.call(thisArg, arg1, arg2, ...)
<ul><li>在一个对象的上下文中应用另一个对象的方法</li> <li>参数能够以列表形式传入。</li></ul></li> <li>Function.prototype.bind(thisArg[, arg1[, arg2[, ...]]])
<ul><li>在一个对象的上下文中应用另一个对象的方法</li></ul></li></ul></li></ul> <div class="warning custom-block"><p class="custom-block-title">注意</p> <p>call()方法的作用和 apply() 方法区别</p> <ul><li>call()方法接受的是<code>参数列表</code></li> <li>apply()方法接受的是一个<code>参数数组</code></li></ul></div> <div class="tip custom-block"><p class="custom-block-title">注</p> <ul><li>利用apply展开数组</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> max <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> numbers<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>max<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// expected output: 7</span>
<span class="token keyword">var</span> min <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> numbers<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>min<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// expected output: 2</span>
</code></pre></div></div> <p>ES6语法：</p> <h4 id="函数参数的默认值-es6"><a href="#函数参数的默认值-es6" aria-hidden="true" class="header-anchor">#</a> 函数参数的默认值[ES6]</h4> <ul><li>参数默认值是惰性求值的(每次都重新计算默认值表达式的值)</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token parameter">x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p <span class="token comment">// { x: 0, y: 0 }</span>
</code></pre></div><ul><li>与解构赋值默认值结合使用</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 写法一</span>
<span class="token keyword">function</span> <span class="token function">m1</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 写法二</span>
<span class="token keyword">function</span> <span class="token function">m2</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>x<span class="token punctuation">,</span> y<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>两种写法都对函数的参数设定了默认值，区别是写法一函数参数的默认值是空对象，但是设置了对象解构赋值的默认值；写法二函数参数的默认值是一个有具体属性的对象，但是没有设置对象解构赋值的默认值。</li> <li>如果传入undefined，将触发该参数等于默认值，null则没有这个效果。</li> <li>指定了默认值后，length属性将失真。<div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c <span class="token operator">=</span> <span class="token number">5</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token comment">// 2</span>
</code></pre></div></li> <li>设置了参数的默认值，函数进行声明初始化时，参数会形成一个单独的作用域（context）。等到初始化结束，这个作用域就会消失。</li> <li>应用
<ul><li>可以指定某一个参数不得省略，如果省略就抛出一个错误</li> <li>可以将参数默认值设为undefined，表明这个参数是可以省略的。</li></ul></li></ul> <h4 id="rest-参数-es6"><a href="#rest-参数-es6" aria-hidden="true" class="header-anchor">#</a> rest 参数[ES6]</h4> <ul><li>形式为<code>...变量名</code>，用于获取函数的多余参数</li> <li>arguments是类数组，rest参数是真数组</li> <li>rest 参数之后不能再有其他参数（即只能是最后一个参数），否则会报错。</li> <li>函数的length属性，不包括 rest 参数。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// arguments变量的写法</span>
<span class="token keyword">function</span> <span class="token function">sortNumbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// rest参数的写法</span>
<span class="token keyword">const</span> <span class="token function-variable function">sortNumbers</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>numbers</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> numbers<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length  <span class="token comment">// 0</span>
</code></pre></div><h4 id="函数内严格模式"><a href="#函数内严格模式" aria-hidden="true" class="header-anchor">#</a> 函数内严格模式</h4> <ul><li>规定只要函数参数使用了默认值、解构赋值、或者扩展运算符，那么函数内部就不能显式设定为严格模式，否则会报错。</li></ul> <h4 id="函数的name属性"><a href="#函数的name属性" aria-hidden="true" class="header-anchor">#</a> 函数的name属性</h4> <ul><li>函数的name属性，返回该函数的函数名。（ES6才将其写入了标准）</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
foo<span class="token punctuation">.</span>name <span class="token comment">// &quot;foo&quot;</span>
</code></pre></div><ul><li>如果将一个匿名函数赋值给一个变量</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// ES5</span>
f<span class="token punctuation">.</span>name <span class="token comment">// &quot;&quot;</span>
<span class="token comment">// ES6</span>
f<span class="token punctuation">.</span>name <span class="token comment">// &quot;f&quot;</span>
</code></pre></div><h4 id="箭头函数"><a href="#箭头函数" aria-hidden="true" class="header-anchor">#</a> 箭头函数</h4> <ul><li>一个参数可以省略圆括号</li> <li>可以省略return和{}，如果返回的是一个对象，要用小括号包裹起来</li> <li>用处
<ul><li>简化回调函数<div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 正常函数写法</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 箭头函数写法</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> x <span class="token operator">*</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li>注意点
<ul><li>函数体内的this对象，就是定义时所在的对象，而不是使用时所在的对象。 在箭头函数中，this指向是固定的</li> <li>不可以当作构造函数(就是不可以使用new命令)</li> <li>没有arguments,可以用 rest 参数代替。</li></ul></li> <li>不适用的场合
<ul><li>定义对象的方法，且该方法内部包括this。</li> <li>需要动态this的时候</li> <li>函数体很复杂，有许多行，或者函数内部有大量的读写操作，不单纯是为了计算值</li></ul></li> <li>嵌套的箭头函数</li></ul> <h4 id="尾调用优化"><a href="#尾调用优化" aria-hidden="true" class="header-anchor">#</a> 尾调用优化</h4> <ul><li>指某个函数的最后一步是调用另一个函数。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">g</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>尾调用优化
<ul><li>尾调用由于是函数的最后一步操作，所以不需要保留外层函数的调用帧，因为调用位置、内部变量等信息都不会再用到了，只要直接用内层函数的调用帧，取代外层函数的调用帧就可以了。</li></ul></li> <li>尾递归
<ul><li>尾调用自身，就称为尾递归。</li> <li>递归非常耗费内存，很容易发生“栈溢出”错误。对于尾递归来说，由于只存在一个调用帧，所以永远不会发生“栈溢出”错误。</li> <li>ES6规定所有实现必须部署“尾调用优化”。</li></ul></li></ul> <h4 id="函数参数的尾逗号"><a href="#函数参数的尾逗号" aria-hidden="true" class="header-anchor">#</a> 函数参数的尾逗号</h4> <ul><li>允许函数的最后一个参数有尾逗号。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">clownsEverywhere</span><span class="token punctuation">(</span>
  <span class="token parameter">param1<span class="token punctuation">,</span>
  param2<span class="token punctuation">,</span></span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>

<span class="token function">clownsEverywhere</span><span class="token punctuation">(</span>
  <span class="token string">'foo'</span><span class="token punctuation">,</span>
  <span class="token string">'bar'</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="delete-操作符"><a href="#delete-操作符" aria-hidden="true" class="header-anchor">#</a> delete 操作符</h3> <ul><li>delete expression
<ul><li>断开引用来间接</li> <li>所有情况都返回true，除非属性是一个自己不可配置的属性</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 例：</span>
<span class="token keyword">delete</span> object<span class="token punctuation">.</span>property 
<span class="token keyword">delete</span> object<span class="token punctuation">[</span><span class="token string">'property'</span><span class="token punctuation">]</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">注意</p> <ul><li>如果删除的属性不存在，delete不会起作用，但仍会返回true</li> <li>delete操作只会在自身的属性上起作用(不会删除原型链上的属性)</li> <li>删除一个数组元素时，数组的长度不受影响</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> trees <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;redwood&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;bay&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;cedar&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;oak&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;maple&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">delete</span> trees<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">3</span> <span class="token keyword">in</span> trees<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">// 这里不会执行</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <h2 id="解答-2"><a href="#解答-2" aria-hidden="true" class="header-anchor">#</a> 解答</h2> <h3 id="获取2017-06-10格式的日期"><a href="#获取2017-06-10格式的日期" aria-hidden="true" class="header-anchor">#</a> 获取<code>2017-06-10</code>格式的日期</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">formatDate</span><span class="token punctuation">(</span><span class="token parameter">dt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>dt<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> year <span class="token operator">=</span> dt<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> month <span class="token operator">=</span> dt<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token keyword">var</span> date <span class="token operator">=</span> dt<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>month <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 强制类型转换</span>
        month <span class="token operator">=</span> <span class="token string">'0'</span> <span class="token operator">+</span> month
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>date <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 强制类型转换</span>
        date <span class="token operator">=</span> <span class="token string">'0'</span> <span class="token operator">+</span> date
    <span class="token punctuation">}</span>
    <span class="token comment">// 强制类型转换</span>
    <span class="token keyword">return</span> year <span class="token operator">+</span> <span class="token string">'-'</span> <span class="token operator">+</span> month <span class="token operator">+</span> <span class="token string">'-'</span> <span class="token operator">+</span> date
<span class="token punctuation">}</span>
<span class="token keyword">var</span> dt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> formatDate <span class="token operator">=</span> <span class="token function">formatDate</span><span class="token punctuation">(</span>dt<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>formatDate<span class="token punctuation">)</span>
</code></pre></div><h3 id="获取随机数，要求是长度一直的字符串格式"><a href="#获取随机数，要求是长度一直的字符串格式" aria-hidden="true" class="header-anchor">#</a> 获取随机数，要求是长度一直的字符串格式</h3> <p>使用<code>Math.random()</code>可获取字符串，但是返回的是一个小于 1 的小数，而且小数点后面长度不同</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> random <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> random <span class="token operator">=</span> random <span class="token operator">+</span> <span class="token string">'0000000000'</span>  <span class="token comment">// 后面加上 10 个零</span>
<span class="token keyword">var</span> random <span class="token operator">=</span> random<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>random<span class="token punctuation">)</span>
</code></pre></div><h3 id="写一个能遍历对象和数组的foreach函数"><a href="#写一个能遍历对象和数组的foreach函数" aria-hidden="true" class="header-anchor">#</a> 写一个能遍历对象和数组的<code>forEach</code>函数</h3> <p>遍历数组使用<code>forEach</code>，而遍历对象使用<code>for in</code>，但是在实际开发中，可以使用一个函数就遍历两者，jquery 就有这样的函数</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> key
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 准确判断是不是数组</span>
        obj<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">fn</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> item<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// 不是数组就是对象</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            							       		   <span class="token keyword">if</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token function">fn</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token comment">// 注意，这里参数的顺序换了，为了和对象的遍历格式一致</span>
<span class="token function">forEach</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">index<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> item<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">}</span>
<span class="token function">forEach</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="实现一个深拷贝"><a href="#实现一个深拷贝" aria-hidden="true" class="header-anchor">#</a> 实现一个深拷贝</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//递归跳出去的条件，不加的话就相当于死循环</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> obj<span class="token operator">!=</span><span class="token string">'object'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> newObj<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        newObj<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        newObj<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//将obj身上的所有属性复制到newObj身上</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> attr <span class="token keyword">in</span> obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//自己调用自己  （递归）</span>
        newObj<span class="token punctuation">[</span>attr<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">deepCopy</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>attr<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> newObj<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="其他面试题"><a href="#其他面试题" aria-hidden="true" class="header-anchor">#</a> 其他面试题</h3> <ul><li>setTimeout设置为0有什么作用？</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> fuc <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token keyword">in</span> fuc<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fuc<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fuc<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//1</span>
<span class="token comment">//2</span>
<span class="token comment">//3</span>
<span class="token comment">//3</span>
<span class="token comment">//3</span>
</code></pre></div><p>虽然设置为0秒后执行任务，实际上是大于0秒才执行的。可是这有什么用呢？</p> <p>用处就在于我们可以改变任务的执行顺序！因为浏览器会在执行完当前任务队列中的任务，再执行setTimeout队列中积累的的任务。</p> <p>通过设置任务在延迟到0s后执行，就能改变任务执行的先后顺序，延迟该任务发生，使之异步执行。</p></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/Frontend/js/jsbasic/zepto.html">
          zepto源码解读
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.b4c3ed2d.js" defer></script><script src="/assets/js/20.ac80940f.js" defer></script>
  </body>
</html>
