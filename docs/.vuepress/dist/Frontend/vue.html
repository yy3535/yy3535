<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue | yy3535</title>
    <meta name="description" content="yy3535的笔记">
    <link rel="icon" href="/img/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.255eb453.css" as="style"><link rel="preload" href="/assets/js/app.22eba307.js" as="script"><link rel="preload" href="/assets/js/29.d1cb8dc1.js" as="script"><link rel="prefetch" href="/assets/js/10.3972bd39.js"><link rel="prefetch" href="/assets/js/11.e9366076.js"><link rel="prefetch" href="/assets/js/12.77a3c9a6.js"><link rel="prefetch" href="/assets/js/13.d695eb9b.js"><link rel="prefetch" href="/assets/js/14.e7ac5dcf.js"><link rel="prefetch" href="/assets/js/15.6cad42fc.js"><link rel="prefetch" href="/assets/js/16.b473c6b6.js"><link rel="prefetch" href="/assets/js/17.0b08262f.js"><link rel="prefetch" href="/assets/js/18.be1ec111.js"><link rel="prefetch" href="/assets/js/19.cfcd895e.js"><link rel="prefetch" href="/assets/js/2.94400111.js"><link rel="prefetch" href="/assets/js/20.78f52a86.js"><link rel="prefetch" href="/assets/js/21.65a75fe3.js"><link rel="prefetch" href="/assets/js/22.98662923.js"><link rel="prefetch" href="/assets/js/23.33fdf222.js"><link rel="prefetch" href="/assets/js/24.724d5b30.js"><link rel="prefetch" href="/assets/js/25.1e7eb93c.js"><link rel="prefetch" href="/assets/js/26.0fae35fe.js"><link rel="prefetch" href="/assets/js/27.faef547b.js"><link rel="prefetch" href="/assets/js/28.68b1b0aa.js"><link rel="prefetch" href="/assets/js/3.65cfa47c.js"><link rel="prefetch" href="/assets/js/30.49f1c154.js"><link rel="prefetch" href="/assets/js/31.9c7abeba.js"><link rel="prefetch" href="/assets/js/32.493be3bc.js"><link rel="prefetch" href="/assets/js/33.2e21bca3.js"><link rel="prefetch" href="/assets/js/34.f5513f01.js"><link rel="prefetch" href="/assets/js/35.c898cd80.js"><link rel="prefetch" href="/assets/js/36.9fe213fc.js"><link rel="prefetch" href="/assets/js/37.c581c8e8.js"><link rel="prefetch" href="/assets/js/38.77cce3c4.js"><link rel="prefetch" href="/assets/js/39.c6b3cd6c.js"><link rel="prefetch" href="/assets/js/4.2ae62931.js"><link rel="prefetch" href="/assets/js/5.9f2898ce.js"><link rel="prefetch" href="/assets/js/6.5116eeab.js"><link rel="prefetch" href="/assets/js/7.619225ea.js"><link rel="prefetch" href="/assets/js/8.5b58253d.js"><link rel="prefetch" href="/assets/js/9.a8870ce8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.255eb453.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.jpg" alt="yy3535" class="logo"> <span class="site-name can-hide">yy3535</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Frontend/" class="nav-link router-link-active">前端</a></div><div class="nav-item"><a href="/Backend/" class="nav-link">后端</a></div><div class="nav-item"><a href="/Operation/" class="nav-link">运维</a></div><div class="nav-item"><a href="/Todo/" class="nav-link">待整理</a></div><div class="nav-item"><a href="https://github.com/yy3535/yy3535" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Frontend/" class="nav-link router-link-active">前端</a></div><div class="nav-item"><a href="/Backend/" class="nav-link">后端</a></div><div class="nav-item"><a href="/Operation/" class="nav-link">运维</a></div><div class="nav-item"><a href="/Todo/" class="nav-link">待整理</a></div><div class="nav-item"><a href="https://github.com/yy3535/yy3535" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>js</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Frontend/js/jsbasic/" class="sidebar-link">01-JS基础知识</a></li><li><a href="/Frontend/js/jsbasic/zepto.html" class="sidebar-link">zepto源码解读</a></li><li><a href="/Frontend/js/jsbasic/shenrubibao.html" class="sidebar-link">深入理解javascript原型链和闭包</a></li><li><a href="/Frontend/js/jswebapi/" class="sidebar-link">02-JS-WEB-API</a></li><li><a href="/Frontend/js/devenv/" class="sidebar-link">03-开发环境</a></li><li><a href="/Frontend/js/runenv/" class="sidebar-link">04-运行环境</a></li><li><a href="/Frontend/js/es6/" class="sidebar-link">ES6</a></li><li><a href="/Frontend/js/designpatterns/" class="sidebar-link">前端设计模式</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>css</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Frontend/css.html" class="sidebar-link">css</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>vue</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Frontend/vue.html" class="active sidebar-link">vue</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Frontend/vue.html#start" class="sidebar-link">start</a></li><li class="sidebar-sub-header"><a href="/Frontend/vue.html#observer-响应式变化" class="sidebar-link">observer(响应式变化)</a></li><li class="sidebar-sub-header"><a href="/Frontend/vue.html#vue实例上的方法" class="sidebar-link">vue实例上的方法</a></li><li class="sidebar-sub-header"><a href="/Frontend/vue.html#template" class="sidebar-link">template</a></li><li class="sidebar-sub-header"><a href="/Frontend/vue.html#指令" class="sidebar-link">指令</a></li><li class="sidebar-sub-header"><a href="/Frontend/vue.html#computed" class="sidebar-link">computed</a></li><li class="sidebar-sub-header"><a href="/Frontend/vue.html#生命周期" class="sidebar-link">生命周期</a></li><li class="sidebar-sub-header"><a href="/Frontend/vue.html#组件-component" class="sidebar-link">组件(component)</a></li><li class="sidebar-sub-header"><a href="/Frontend/vue.html#vue-cli-3-0" class="sidebar-link">vue-cli 3.0</a></li><li class="sidebar-sub-header"><a href="/Frontend/vue.html#vue-router" class="sidebar-link">vue-router</a></li><li class="sidebar-sub-header"><a href="/Frontend/vue.html#vuex" class="sidebar-link">vuex</a></li><li class="sidebar-sub-header"><a href="/Frontend/vue.html#vue源码" class="sidebar-link">vue源码</a></li><li class="sidebar-sub-header"><a href="/Frontend/vue.html#jsonwebtoken-jwt" class="sidebar-link">jsonwebtoken(jwt)</a></li><li class="sidebar-sub-header"><a href="/Frontend/vue.html#iview-axios" class="sidebar-link">iview,axios</a></li><li class="sidebar-sub-header"><a href="/Frontend/vue.html#express-jsonwebtoken-jwt-bodyparser" class="sidebar-link">express,jsonwebtoken(jwt),bodyparser</a></li><li class="sidebar-sub-header"><a href="/Frontend/vue.html#axios-获取数据" class="sidebar-link">axios 获取数据</a></li><li class="sidebar-sub-header"><a href="/Frontend/vue.html#jwt-实现-权限-vuex-jwt-鉴权" class="sidebar-link">jwt 实现 权限 vuex+jwt 鉴权</a></li><li class="sidebar-sub-header"><a href="/Frontend/vue.html#报错" class="sidebar-link">报错</a></li><li class="sidebar-sub-header"><a href="/Frontend/vue.html#google调试工具" class="sidebar-link">google调试工具</a></li><li class="sidebar-sub-header"><a href="/Frontend/vue.html#vue-http请求头加token" class="sidebar-link">vue.http请求头加token</a></li></ul></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>webpack</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Frontend/webpack.html" class="sidebar-link">webpack</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>前端跳槽面试必备技巧</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Frontend/viewskills.html" class="sidebar-link">前端跳槽面试必备技巧</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>小工具</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Frontend/vuepress.html" class="sidebar-link">vuepress</a></li><li><a href="/Frontend/markdown.html" class="sidebar-link">markdown</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>自动化测试</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Frontend/automatedTest.html" class="sidebar-link">自动化测试Jest</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="vue"><a href="#vue" aria-hidden="true" class="header-anchor">#</a> vue</h1> <p></p><div class="table-of-contents"><ul><li><a href="#start">start</a><ul><li><a href="#vm-new-vue-配置">vm=new Vue({})配置</a></li></ul></li><li><a href="#observer-响应式变化">observer(响应式变化)</a><ul><li><a href="#什么样的数据会更新">什么样的数据会更新</a></li><li><a href="#observer原理">observer原理</a></li></ul></li><li><a href="#vue实例上的方法">vue实例上的方法</a><ul><li><a href="#vm-el">vm.$el</a></li><li><a href="#vm-options">vm.$options</a></li><li><a href="#vm-nexttick">vm.$nextTick(()=&gt;{...})</a></li><li><a href="#vm-watch-info-xxx-function-newvalue-oldvalue">vm.$watch('info.xxx',function(newValue,oldValue){...})</a></li><li><a href="#vm-destroy-手动销毁组件">vm.$destroy 手动销毁组件</a></li><li><a href="#vm-on-click-change-绑定事件">vm.$on('click',change) 绑定事件</a></li></ul></li><li><a href="#template">template</a><ul><li><a href="#取值表达式">取值表达式{{}}</a></li></ul></li><li><a href="#指令">指令</a><ul><li><a href="#v-once-v-html">v-once,v-html</a></li><li><a href="#v-if-v-else">v-if v-else</a></li><li><a href="#v-for">v-for</a></li><li><a href="#v-model">v-model</a></li><li><a href="#v-on或-绑定事件">v-on或@ 绑定事件</a></li><li><a href="#v-bind或-绑定属性">v-bind或: 绑定属性</a></li></ul></li><li><a href="#computed">computed</a><ul><li><a href="#watch实现computed">watch实现computed</a></li><li><a href="#computed实现双向绑定">computed实现双向绑定</a></li></ul></li><li><a href="#生命周期">生命周期</a><ul><li><a href="#beforecreate">beforeCreate</a></li><li><a href="#created">created</a></li><li><a href="#beforemount">beforeMount</a></li><li><a href="#mounted（重要）">mounted（重要）</a></li><li><a href="#beforeupdate">beforeUpdate</a></li><li><a href="#updated">updated</a></li><li><a href="#beforedestroy（重要）">beforeDestroy（重要）</a></li><li><a href="#destroyed">destroyed</a></li></ul></li><li><a href="#组件-component">组件(component)</a><ul><li><a href="#优点：">优点：</a></li><li><a href="#使用-vue文件开发两种方法">使用.vue文件开发两种方法</a></li><li><a href="#分类">分类</a></li><li><a href="#props-属性父传子">props(属性父传子)</a></li><li><a href="#子组件触发父级的方法">子组件触发父级的方法</a></li><li><a href="#parent和-children">$parent和$children</a></li><li><a href="#provide和inject">provide和inject</a></li><li><a href="#refs">$refs</a></li><li><a href="#总结：组件间通信">总结：组件间通信</a></li><li><a href="#自定义指令-directive">自定义指令(directive)</a></li><li><a href="#过滤器-filter">过滤器(filter)</a></li><li><a href="#异步组件">异步组件</a></li><li><a href="#递归组件">递归组件</a></li></ul></li><li><a href="#vue-cli-3-0">vue-cli 3.0</a><ul><li><a href="#创建项目">创建项目</a></li><li><a href="#打包">打包</a></li><li><a href="#defer-async-preload-prefetch">defer &amp; async /preload &amp; prefetch</a></li><li><a href="#基于vue-cli编写组件-小球滚动组件">基于vue-cli编写组件---小球滚动组件</a></li></ul></li><li><a href="#vue-router">vue-router</a><ul><li><a href="#安装">安装</a></li><li><a href="#路由的两种方式">路由的两种方式</a></li><li><a href="#路由配置文件">路由配置文件</a></li><li><a href="#在vue实例中引用路由">在Vue实例中引用路由</a></li><li><a href="#在vue实例模板中显示路由视图">在Vue实例模板中显示路由视图</a></li><li><a href="#点击路由跳转-声明式路由跳转">点击路由跳转(声明式路由跳转)</a></li><li><a href="#编程式路由跳转">编程式路由跳转</a></li><li><a href="#路由钩子函数">路由钩子函数</a></li></ul></li><li><a href="#vuex">vuex</a><ul><li><a href="#安装">安装</a></li><li><a href="#新建store文件夹">新建store文件夹</a></li><li><a href="#store配置">store配置</a></li><li><a href="#在实例中引用store">在实例中引用store</a></li><li><a href="#数据获取和修改">数据获取和修改</a></li></ul></li><li><a href="#vue源码">vue源码</a></li><li><a href="#jsonwebtoken-jwt">jsonwebtoken(jwt)</a></li><li><a href="#iview-axios">iview,axios</a></li><li><a href="#express-jsonwebtoken-jwt-bodyparser">express,jsonwebtoken(jwt),bodyparser</a></li><li><a href="#axios-获取数据">axios 获取数据</a></li><li><a href="#jwt-实现-权限-vuex-jwt-鉴权">jwt 实现 权限 vuex+jwt 鉴权</a></li><li><a href="#报错">报错</a></li><li><a href="#google调试工具">google调试工具</a></li><li><a href="#vue-http请求头加token">vue.http请求头加token</a></li></ul></div><p></p> <h2 id="start"><a href="#start" aria-hidden="true" class="header-anchor">#</a> start</h2> <ul><li><p>渐进式
可按需使用</p></li> <li><p>逐一递增
vue+components+vue-router+vuex+vue-cli</p></li> <li><p>库和框架的区别</p> <p>库：调用库中的方法实现自己的功能</p> <p>框架：我们在指定的位置写好代码，框架帮我们调用</p></li> <li><p>mvc和mvvm区别</p> <p>mvc单向，model-view-controller，数据变化后需要通过controller手动改变视图</p> <p>mvvm双向，model-view-viewmodel，数据变化可以驱动视图，vm就是viewmodel</p></li> <li><p>声明式和命令式</p> <p>reduce不知道内部如何实现，是声明式</p> <p>for循环，命令计算机帮执行，叫做命令式</p></li></ul> <h3 id="vm-new-vue-配置"><a href="#vm-new-vue-配置" aria-hidden="true" class="header-anchor">#</a> vm=new Vue({})配置</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> vm<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">//范围 </span>
    el<span class="token punctuation">:</span><span class="token string">'#app'</span><span class="token punctuation">,</span>
    <span class="token comment">//替换范围中内容</span>
    template<span class="token punctuation">:</span><span class="token string">'&lt;h1&gt;hello world&lt;/h1&gt;'</span><span class="token punctuation">,</span>
    <span class="token comment">//存放数据,把数据代理给了vm。用之前需要先声明。</span>
    data<span class="token punctuation">:</span><span class="token punctuation">{</span>
      info<span class="token punctuation">:</span><span class="token punctuation">{</span>xxx<span class="token punctuation">:</span><span class="token string">'xxx'</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span class="token comment">//与el相同作用，二选一</span>
</code></pre></div><p><strong>注：</strong>
el换成.$mount('#app')是一样的。
单元测试时会用到。</p> <h2 id="observer-响应式变化"><a href="#observer-响应式变化" aria-hidden="true" class="header-anchor">#</a> observer(响应式变化)</h2> <h3 id="什么样的数据会更新"><a href="#什么样的数据会更新" aria-hidden="true" class="header-anchor">#</a> 什么样的数据会更新</h3> <ol><li><p>对象需要先声明存在，才能触发数据更新。</p></li> <li><p>数组需要改写，改写后length变化不能监听</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'push'</span><span class="token punctuation">,</span><span class="token string">'slice'</span><span class="token punctuation">,</span><span class="token string">'shift'</span><span class="token punctuation">,</span><span class="token string">'unshift'</span><span class="token punctuation">]</span>
 arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">method</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
   <span class="token keyword">let</span> oldPush<span class="token operator">=</span><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>method<span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>method<span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'数据更新了'</span><span class="token punctuation">)</span>
     <span class="token function">oldPush</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token comment">//别人身上的方法，想要使用到自己身上，就用call去调用</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span>
 obj<span class="token punctuation">.</span>age<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>值设置为对象才有效，需要修改某个值，可以使用vm.$set(vm.info,'address','zf');</p> <p>vm.info.address='world'//无效</p> <p>vm.info={address:'回龙观'}//有效，</p></li></ol> <h3 id="observer原理"><a href="#observer原理" aria-hidden="true" class="header-anchor">#</a> observer原理</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj<span class="token operator">=</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span><span class="token string">'jw'</span><span class="token punctuation">,</span>
    age<span class="token punctuation">:</span><span class="token punctuation">{</span>
    	age<span class="token punctuation">:</span><span class="token number">18</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//vue数据劫持 Object.defineProperty</span>
<span class="token keyword">function</span> <span class="token function">observer</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> obj<span class="token operator">==</span><span class="token string">'object'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">defineReactive</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span>key<span class="token punctuation">,</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">defineReactive</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span>key<span class="token punctuation">,</span>value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token function">observer</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//判断 value是不是对象，如果是对象，会继续监控</span>
  Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span>key<span class="token punctuation">,</span><span class="token punctuation">{</span>
    <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> value
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">set</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">observer</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//如果设置的值是对象 需要在进行这个对象的监控</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'数据更新了'</span><span class="token punctuation">)</span>
      value<span class="token operator">=</span>val<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">observer</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
obj<span class="token punctuation">.</span>age<span class="token punctuation">.</span>age<span class="token operator">=</span><span class="token string">'zf'</span>
</code></pre></div><h2 id="vue实例上的方法"><a href="#vue实例上的方法" aria-hidden="true" class="header-anchor">#</a> vue实例上的方法</h2> <h3 id="vm-el"><a href="#vm-el" aria-hidden="true" class="header-anchor">#</a> vm.$el</h3> <p>当前挂载的元素</p> <h3 id="vm-options"><a href="#vm-options" aria-hidden="true" class="header-anchor">#</a> vm.$options</h3> <p>当前实例的参数</p> <h3 id="vm-nexttick"><a href="#vm-nexttick" aria-hidden="true" class="header-anchor">#</a> vm.$nextTick(()=&gt;{...})</h3> <p>视图更新后再执行
(vue数据变化后更新视图操作是异步执行的)</p> <h3 id="vm-watch-info-xxx-function-newvalue-oldvalue"><a href="#vm-watch-info-xxx-function-newvalue-oldvalue" aria-hidden="true" class="header-anchor">#</a> vm.$watch('info.xxx',function(newValue,oldValue){...})</h3> <p>数据变化后执行
(多次更新只会触发一次)</p> <h3 id="vm-destroy-手动销毁组件"><a href="#vm-destroy-手动销毁组件" aria-hidden="true" class="header-anchor">#</a> vm.$destroy 手动销毁组件</h3> <h3 id="vm-on-click-change-绑定事件"><a href="#vm-on-click-change-绑定事件" aria-hidden="true" class="header-anchor">#</a> vm.$on('click',change) 绑定事件</h3> <h2 id="template"><a href="#template" aria-hidden="true" class="header-anchor">#</a> template</h2> <h3 id="取值表达式"><a href="#取值表达式" aria-hidden="true" class="header-anchor">#</a> 取值表达式{{}}</h3> <p>作用：</p> <ul><li>运算</li> <li>取值</li> <li>三元</li></ul> <p><strong>注：</strong></p> <ul><li>其中的this都是指代vm实例，可省略</li> <li>取值时放对象，加空格即可 {
  &quot;name&quot;: 1
}</li></ul> <h2 id="指令"><a href="#指令" aria-hidden="true" class="header-anchor">#</a> 指令</h2> <h3 id="v-once-v-html"><a href="#v-once-v-html" aria-hidden="true" class="header-anchor">#</a> v-once,v-html</h3> <h4 id="v-once"><a href="#v-once" aria-hidden="true" class="header-anchor">#</a> v-once</h4> <p>只渲染一次，数据变化了也不更新视图</p> <h4 id="v-html"><a href="#v-html" aria-hidden="true" class="header-anchor">#</a> v-html</h4> <p>渲染成dom元素</p> <p><strong>注：</strong>
v-html使用innerHTML,所以不要将用户输入的内容展现出来，内容必须为可信任
&lt;img src=&quot;x&quot; onerror=&quot;alert()&quot; /&gt; 图片找不到会走onerror事件，就会弹出alert框</p> <h3 id="v-if-v-else"><a href="#v-if-v-else" aria-hidden="true" class="header-anchor">#</a> v-if v-else</h3> <ul><li>必须是连一块的</li> <li>可使用template无意义标签来框起来</li></ul> <p><strong>v-if和v-show的区别：</strong>
v-if控制dom有没有，v-show控制样式不显示，v-show不支持template</p> <h3 id="v-for"><a href="#v-for" aria-hidden="true" class="header-anchor">#</a> v-for</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 循环数组 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(fruit,index) in fruits<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{fruit}}{{index}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 循环对象 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(value,key) in fruits<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>key<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{value}}{{key}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><p>循环谁就把它放在谁身上</p></li> <li><p>vue2.5以上要求必须使用key属性</p></li> <li><p>可使用template无意义标签来框起来</p></li></ul> <p><strong>注：</strong></p> <ol><li>key只能加在循环的元素上，不能加在template上，应该加在内部循环的元素上</li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>i in 3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${i}_1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${i}_2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="2"><li>key也可以用来区分元素</li></ol> <div class="language-html extra-class"><pre class="language-html"><code>//修改flag值后不会立刻渲染，因为认为是同一个东西，加了key之后就会立刻重新渲染
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>flag<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>珠峰<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>架构<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="3"><li>尽量不要用index来作为key，因为index再数据顺序变化后会消耗性能，如果有唯一标识，尽量用唯一标识</li></ol> <h3 id="v-model"><a href="#v-model" aria-hidden="true" class="header-anchor">#</a> v-model</h3> <h4 id="input"><a href="#input" aria-hidden="true" class="header-anchor">#</a> input</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>text<span class="token punctuation">'</span></span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>msg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@input</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>e=&gt;{msg=e.target.value}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
等价于  <span class="token comment">&lt;!-- v-model 是 @input + :value 的一个语法糖--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>text<span class="token punctuation">'</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>msg<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><h4 id="select-radio和checkbox"><a href="#select-radio和checkbox" aria-hidden="true" class="header-anchor">#</a> select,radio和checkbox</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//select</span>
data<span class="token punctuation">:</span><span class="token punctuation">{</span>
selectValue<span class="token punctuation">:</span><span class="token string">''</span><span class="token punctuation">,</span>
list<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'{value:'</span>菜单<span class="token number">1</span><span class="token string">',id:1}'</span><span class="token punctuation">,</span><span class="token string">'{value:'</span>菜单<span class="token number">2</span><span class="token string">',id:2}'</span><span class="token punctuation">,</span><span class="token string">'{value:'</span>菜单<span class="token number">3</span><span class="token string">',id:3}'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span>select v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;selectValue&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;0&quot;</span> disabled<span class="token operator">&gt;</span>请选择<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>option v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;item in list&quot;</span> <span class="token punctuation">:</span>key<span class="token operator">=</span><span class="token string">&quot;item.id&quot;</span> <span class="token punctuation">:</span>value<span class="token operator">=</span><span class="token string">&quot;item.id&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
<span class="token comment">//multiple，太丑一般不用</span>

<span class="token comment">//radio</span>
<span class="token comment">//根据v-model来分组</span>
data<span class="token punctuation">:</span><span class="token punctuation">{</span>
radioValue<span class="token punctuation">:</span><span class="token string">'男'</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">'radio'</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;radioValue&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;男&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">'radio'</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;radioValue&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;女&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">'radio'</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;radioValue&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;其他&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token comment">//checkbox</span>
<span class="token comment">//只要是多个就是数组</span>
data<span class="token punctuation">:</span><span class="token punctuation">{</span>
checkValue<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
checkValues<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
不给value，值就是<span class="token boolean">true</span><span class="token operator">/</span><span class="token boolean">false</span>，给了value，就是数组
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span><span class="token boolean">true</span><span class="token operator">/</span><span class="token boolean">false</span><span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">'checkbox'</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;checkValue&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>多选<span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">'checkbox'</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;checkValues&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;游泳&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">'checkbox'</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;checkValues&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;健身&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">'checkbox'</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;checkValues&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;看书&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span>checkValues<span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><h4 id="修饰符（可以连续修饰）"><a href="#修饰符（可以连续修饰）" aria-hidden="true" class="header-anchor">#</a> 修饰符（可以连续修饰）</h4> <div class="language-html extra-class"><pre class="language-html"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model.number</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>val<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{typeof val}}//只能数字
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model.trim</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>val<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{typeof val}}//清除空格
</code></pre></div><h3 id="v-on或-绑定事件"><a href="#v-on或-绑定事件" aria-hidden="true" class="header-anchor">#</a> v-on或@ 绑定事件</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>text<span class="token punctuation">'</span></span> <span class="token attr-name">@input</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>fn<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

methods:{
  fn(){...}
}
</code></pre></div><ul><li>绑定方法，写在method中，this指向vm实例，data中不能放方法，因为this指向window</li> <li>methods中不要写成fn:()=&gt;{}，否则this就指向window了</li> <li>方法传参：
<ol><li>需要传参就加括号写参数，无参数则不加括号</li> <li>默认有e事件参数，有传参时，保留$event参数作为事件参数</li></ol></li></ul> <h4 id="修饰符-可以连续修饰"><a href="#修饰符-可以连续修饰" aria-hidden="true" class="header-anchor">#</a> 修饰符(可以连续修饰)</h4> <p>@keyup.按键名称/按键unicode码//只有按了该按键才响应</p> <p>常用：.ctrl .esc .enter</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@keyup.enter</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>fn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@keyup.esc</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>fn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>vue配置一个键盘code别名,需要按fn+f1</p> <div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>keyCodes<span class="token operator">=</span><span class="token punctuation">{</span>
  <span class="token string">'f1'</span><span class="token punctuation">:</span><span class="token number">112</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="v-bind或-绑定属性"><a href="#v-bind或-绑定属性" aria-hidden="true" class="header-anchor">#</a> v-bind或: 绑定属性</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>text<span class="token punctuation">'</span></span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>msg<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><ul><li>绑定属性</li></ul> <blockquote><p>动态绑定样式
class</p></blockquote> <ol><li>等于对象</li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>abc<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{b:true}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>你好<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="2"><li>等于数组</li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>abc<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>['a','b',c]<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>你好<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>//c为data中定义的
</code></pre></div><p>style
等于对象或者数组</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">='</span><span class="token attr-value"><span class="token property">color</span><span class="token punctuation">:</span>red</span><span class="token punctuation">'</span></span> <span class="token attr-name">:</span><span class="token style-attr language-css"><span class="token attr-name"><span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token punctuation">{</span><span class="token property">background</span><span class="token punctuation">:</span><span class="token string">'blue'</span><span class="token punctuation">}</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">='</span><span class="token attr-value"><span class="token property">color</span><span class="token punctuation">:</span>red</span><span class="token punctuation">'</span></span> <span class="token attr-name">:</span><span class="token style-attr language-css"><span class="token attr-name"><span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token selector">[</span><span class="token punctuation">{</span><span class="token property">background</span><span class="token punctuation">:</span><span class="token string">'red'</span><span class="token punctuation">,</span><span class="token property">color</span><span class="token punctuation">:</span><span class="token string">'blue'</span><span class="token punctuation">}</span>]</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="computed"><a href="#computed" aria-hidden="true" class="header-anchor">#</a> computed</h2> <ul><li>methods getFullName()放取值表达式中会造成性能问题，每次其他数据更新都会重新执行这个方法</li> <li>computed也是通过Object.defineProperty来实现的，只有依赖的数据更新时才会执行（有缓存）</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>computed<span class="token punctuation">:</span><span class="token punctuation">{</span>
  <span class="token function">fullName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>firstName<span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>lastName<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="watch实现computed"><a href="#watch实现computed" aria-hidden="true" class="header-anchor">#</a> watch实现computed</h3> <div class="language-js extra-class"><pre class="language-js"><code>data<span class="token punctuation">:</span><span class="token punctuation">{</span>
  firstName<span class="token punctuation">:</span><span class="token string">'珠'</span><span class="token punctuation">,</span>
  lastName<span class="token punctuation">:</span><span class="token string">'峰'</span><span class="token punctuation">,</span>
  fullName<span class="token punctuation">:</span><span class="token string">''</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
methods<span class="token punctuation">:</span><span class="token punctuation">{</span>
  <span class="token function">getFullName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>fullName<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>firstName<span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>lastName<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
watch<span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token comment">//相当于vm.$watch('firstname',()=&gt;{})</span>
  <span class="token comment">//普通写法，需要mount来执行</span>
  <span class="token function">firstName</span><span class="token punctuation">(</span><span class="token parameter">newValue</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getFullName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">//其他写法</span>
  firstName<span class="token punctuation">:</span><span class="token punctuation">{</span>
    <span class="token function">handler</span><span class="token punctuation">(</span><span class="token parameter">newValue</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getFullName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//立即执行</span>
    immediate<span class="token punctuation">:</span><span class="token boolean">true</span>
  <span class="token punctuation">}</span>
  <span class="token function">lastName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getFullName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>computed和method的区别？
computed只有绑定的数据变了才会执行，method做绑定时所有数据变了都会执行</p></blockquote> <blockquote><p>computed和watch的区别？</p></blockquote> <ul><li>watch支持异步，可以实现一些简单的功能，一般会先考虑使用computed，不能再用watch</li></ul> <h3 id="computed实现双向绑定"><a href="#computed实现双向绑定" aria-hidden="true" class="header-anchor">#</a> computed实现双向绑定</h3> <div class="language-js extra-class"><pre class="language-js"><code>全选：<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;checkbox&quot;</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;checkAll&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;checkbox&quot;</span> v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;(item,key) in checks&quot;</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;item.value&quot;</span> <span class="token punctuation">:</span>key<span class="token operator">=</span><span class="token string">&quot;key&quot;</span><span class="token operator">&gt;</span>
data<span class="token punctuation">:</span><span class="token punctuation">{</span>
  checks<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>value<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>value<span class="token punctuation">:</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>value<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
computed<span class="token punctuation">:</span><span class="token punctuation">{</span>
  checkAll<span class="token punctuation">:</span><span class="token punctuation">{</span>
    <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>checks<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token parameter">check</span><span class="token operator">=&gt;</span>check<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">set</span><span class="token punctuation">(</span>kvalue<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>checks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">check</span><span class="token operator">=&gt;</span>check<span class="token punctuation">.</span>value<span class="token operator">=</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="生命周期"><a href="#生命周期" aria-hidden="true" class="header-anchor">#</a> 生命周期</h2> <p>初始化自己的生命周期，并且绑定自己的事件</p> <ul><li>this.$data
vm.data</li></ul> <h3 id="beforecreate"><a href="#beforecreate" aria-hidden="true" class="header-anchor">#</a> beforeCreate</h3> <p>实例尚未创建完成
初始化注入，和响应事件</p> <div class="language-js extra-class"><pre class="language-js"><code>data<span class="token punctuation">:</span><span class="token punctuation">{</span>
  a<span class="token punctuation">:</span><span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function">beforeCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token comment">//undefined</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">)</span><span class="token comment">//undefined</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="created"><a href="#created" aria-hidden="true" class="header-anchor">#</a> created</h3> <p>可以获取数据和调用方法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token comment">//存在</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">)</span><span class="token comment">//{a:1}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="beforemount"><a href="#beforemount" aria-hidden="true" class="header-anchor">#</a> beforeMount</h3> <p>渲染前，第一次调用渲染函数执行，可以拿到data,method等</p> <h3 id="mounted（重要）"><a href="#mounted（重要）" aria-hidden="true" class="header-anchor">#</a> mounted（重要）</h3> <p>渲染后，可获取真实dom，一般ajax请求放在这儿。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="beforeupdate"><a href="#beforeupdate" aria-hidden="true" class="header-anchor">#</a> beforeUpdate</h3> <p>更新前</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">beforeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="updated"><a href="#updated" aria-hidden="true" class="header-anchor">#</a> updated</h3> <p>一般不要操作数据，否则可能会死循环
更新后</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">updated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="beforedestroy（重要）"><a href="#beforedestroy（重要）" aria-hidden="true" class="header-anchor">#</a> beforeDestroy（重要）</h3> <p>销毁前（当前实例还可以用），一般会放销毁定时器等解绑操作</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">beforeDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="destroyed"><a href="#destroyed" aria-hidden="true" class="header-anchor">#</a> destroyed</h3> <p>销毁后（实例上的方法，监听，事件绑定都被移除）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">destroyed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>什么情况会走destroy?</p></blockquote> <ul><li><p>路由切换
一个组件切换到另一个组件，上一个组件要销毁</p></li> <li><p>vm.$destroy()
手动销毁</p></li></ul> <p><img src="/img/lifecycle.png" alt="vue生命周期"></p> <h2 id="组件-component"><a href="#组件-component" aria-hidden="true" class="header-anchor">#</a> 组件(component)</h2> <ul><li>data返回函数</li> <li>要用闭合标签</li> <li>子组件在父组件的模板中使用</li> <li>组件名定义时写大驼峰，使用时用<code>-</code>连接（因为html标签不能有大写字母）</li></ul> <h3 id="优点："><a href="#优点：" aria-hidden="true" class="header-anchor">#</a> 优点：</h3> <ul><li>一个页面分为几个组件开发，方便协作，方便维护，可复用</li> <li>为了每个组件的数据，互不影响，</li></ul> <h3 id="使用-vue文件开发两种方法"><a href="#使用-vue文件开发两种方法" aria-hidden="true" class="header-anchor">#</a> 使用.vue文件开发两种方法</h3> <ul><li><p>安装vue-cli脚手架
npm install @vue/cli -g</p></li> <li><p>安装service-global
npm install -g @vue/cli-service-global</p></li></ul> <div class="language- extra-class"><pre class="language-text"><code>vue serve App.vue
</code></pre></div><p>//http://localhost:8080/直接访问组件页面</p> <h3 id="分类"><a href="#分类" aria-hidden="true" class="header-anchor">#</a> 分类</h3> <ul><li>全局组件</li> <li>局部组件（声明在某个组件之内
）</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 父组件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>app<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-button</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-button</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-button</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// 全局组件</span>
  Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'my-button'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    template<span class="token punctuation">:</span><span class="token template-string"><span class="token string">`&lt;button&gt;{{msg}}&lt;/button&gt;`</span></span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        msg<span class="token punctuation">:</span><span class="token string">'点我啊'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    el<span class="token punctuation">:</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 子组件</span>
    components<span class="token punctuation">:</span><span class="token punctuation">{</span>
      <span class="token string">'MyButton'</span><span class="token punctuation">:</span><span class="token punctuation">{</span>
        <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span>msg<span class="token punctuation">:</span><span class="token string">'点我啊'</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        template<span class="token punctuation">:</span><span class="token template-string"><span class="token string">`&lt;button&gt;{{}}&lt;/button&gt;`</span></span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h3 id="props-属性父传子"><a href="#props-属性父传子" aria-hidden="true" class="header-anchor">#</a> props(属性父传子)</h3> <ul><li>命名在 HTML 中是 kebab-case 的,在 js 中是 camelCase 的</li> <li>v-bind=对象，传入对象的所有属性</li> <li>this.$attrs 所有属性</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 简单传值 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>blog-post</span> <span class="token attr-name">msg-title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>hello!<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>blog-post</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 传入数组 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>blog-post</span>
  <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item in arr<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">v-bind:</span>key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">v-bind:</span>title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item.title<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>blog-post</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    el<span class="token punctuation">:</span><span class="token string">'app'</span><span class="token punctuation">,</span>
    componets<span class="token punctuation">:</span><span class="token punctuation">{</span>
      <span class="token string">'MyButton'</span><span class="token punctuation">:</span><span class="token punctuation">{</span>
        <span class="token comment">//禁用特性(没有使用的属性 保留在this.$attrs中，不会显示在dom结构上了)</span>
        inheritAttrs<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        props<span class="token punctuation">:</span><span class="token punctuation">{</span>
          msgTitle<span class="token punctuation">:</span><span class="token punctuation">{</span>
            <span class="token comment">//类型(String/Number/Boolean/Array/Object/Function/Promise)</span>
            type<span class="token punctuation">:</span>String<span class="token punctuation">,</span>
            <span class="token comment">//默认值</span>
            <span class="token keyword">default</span><span class="token punctuation">:</span><span class="token string">'点我啊'</span><span class="token punctuation">,</span>
            <span class="token comment">//验证</span>
            <span class="token function">validator</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
              <span class="token keyword">return</span> value<span class="token operator">&gt;</span><span class="token number">3</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          arr<span class="token punctuation">:</span><span class="token punctuation">{</span>
            type<span class="token punctuation">:</span>Array<span class="token punctuation">,</span>
            <span class="token comment">//属性校验中，如果是数组/对象，需要将默认值返回</span>
            <span class="token function-variable function">default</span><span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//箭头函数后面是括号表示[1,2]是个返回值</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="子组件触发父级的方法"><a href="#子组件触发父级的方法" aria-hidden="true" class="header-anchor">#</a> 子组件触发父级的方法</h3> <ul><li>this.$attrs 获取当前组件所有的属性</li> <li>this.$listeners 获取当前组件所有的绑定事件</li> <li>v-bind=$attrs 绑定所有的属性</li> <li>v-on=$listeners 绑定所有的方法</li> <li>给子组件最外层元素绑定
<code>@click.native</code></li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-button</span> <span class="token attr-name">@click.native</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>change<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">let</span> vm<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    el<span class="token punctuation">:</span><span class="token string">'#app'</span><span class="token punctuation">,</span>
    data<span class="token punctuation">:</span><span class="token punctuation">{</span>
      content<span class="token punctuation">:</span><span class="token string">'点我啊'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    methods<span class="token punctuation">:</span><span class="token punctuation">{</span>
      <span class="token function">change</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    components<span class="token punctuation">:</span><span class="token punctuation">{</span>
      <span class="token string">'MyButton'</span><span class="token punctuation">:</span><span class="token punctuation">{</span>
        template<span class="token punctuation">:</span><span class="token template-string"><span class="token string">`&lt;button&gt;点我啊&lt;/button&gt;`</span></span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>组件的某个子元素触发父级方法
<ul><li>（调用自己属性上的父级的方法），有三种方法。
<ul><li>@click=&quot;$listeners.click()&quot;</li> <li>@click=&quot;this.$emit('click')&quot;</li> <li>v-on=&quot;$listeners&quot;</li></ul></li></ul></li></ul> <div class="language-html extra-class"><pre class="language-html"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--相当于 this.on('click',change)--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>change<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@mouseup</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>change<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 第一种 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span>“$listeners.click()”</span><span class="token punctuation">&gt;</span></span>点我啊<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 第二种 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$emit('click')<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 第三种,所有事件全绑上去 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">v-on</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$listeners<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="parent和-children"><a href="#parent和-children" aria-hidden="true" class="header-anchor">#</a> $parent和$children</h3> <ul><li><p>$parent
获取父组件的实例</p></li> <li><p>$children
获取所有的子组件</p></li> <li><p>slot插槽
name：</p></li></ul> <ol><li>default</li> <li>自定义:hello
<code>v-slot:</code> <code>#</code> <code>&lt;slot&gt;</code></li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>hello</span><span class="token punctuation">&gt;</span></span>
  ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 或者 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">#:</span>hello</span><span class="token punctuation">&gt;</span></span>
  ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 或者 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>wrap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>demo</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 手风琴效果组件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collapse</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collapse-item</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>react<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>内容1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>collapse-item</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collapse-item</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>vue<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>内容2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>collapse-item</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collapse-item</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>node<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>内容3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>collapse-item</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>collapse</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'Collapse'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    methods<span class="token punctuation">:</span><span class="token punctuation">{</span>
      <span class="token function">cut</span><span class="token punctuation">(</span><span class="token parameter">childId</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">child</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
          <span class="token keyword">if</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span>_uid<span class="token operator">!==</span>childId<span class="token punctuation">)</span><span class="token punctuation">{</span>
            child<span class="token punctuation">.</span>show<span class="token operator">=</span><span class="token boolean">false</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    template<span class="token punctuation">:</span><span class="token template-string"><span class="token string">`&lt;div class=&quot;wrap&quot;&gt;
      &lt;slot&gt;&lt;/slot&gt;
    &lt;/div&gt;`</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'CollapseItem'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    props<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        show<span class="token punctuation">:</span><span class="token boolean">false</span>
      <span class="token punctuation">}</span>
      
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    methods<span class="token punctuation">:</span><span class="token punctuation">{</span>
      <span class="token function">change</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$parent<span class="token punctuation">.</span><span class="token function">cut</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_uid<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>show<span class="token operator">=</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>show<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    template<span class="token punctuation">:</span><span class="token template-string"><span class="token string">`&lt;div&gt;
      &lt;div class=&quot;title&quot; @click=&quot;change&quot;&gt;{{title}}&lt;/div&gt;
      &lt;div v-show=&quot;show&quot;&gt;
        &lt;slot&gt;&lt;/slot&gt;
      &lt;/div&gt;
    &lt;/div&gt;`</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> vm<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    el<span class="token punctuation">:</span><span class="token string">'#app'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="provide和inject"><a href="#provide和inject" aria-hidden="true" class="header-anchor">#</a> provide和inject</h3> <ul><li>在根组件上提供属性，所有的子组件都可以获取</li> <li>可实现组件传值</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'my'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    inject<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    template<span class="token punctuation">:</span><span class="token string">&quot;&lt;div&gt;{{a}}&lt;/div&gt;&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> vm<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    el<span class="token punctuation">:</span><span class="token string">'#app'</span><span class="token punctuation">,</span>
    provide<span class="token punctuation">:</span><span class="token punctuation">{</span>
      a<span class="token punctuation">:</span><span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_uid<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="refs"><a href="#refs" aria-hidden="true" class="header-anchor">#</a> $refs</h3> <p>获取所有引用</p> <ul><li>ref名不能重复，重复会覆盖。但如果遇到循环，就会成数组形式</li> <li>子组件给一个ref,父组件调用this.$refs.com.show传值，父组件调用子组件的方法</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>i in 3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>my<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>我的dom元素<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-component</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>com<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-component</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">let</span> vm<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        el<span class="token punctuation">:</span><span class="token string">'#app'</span><span class="token punctuation">,</span>
        <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>my<span class="token punctuation">)</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>com<span class="token punctuation">.</span>show<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        components<span class="token punctuation">:</span><span class="token punctuation">{</span>
            <span class="token string">'myComponent'</span><span class="token punctuation">:</span><span class="token punctuation">{</span>
                methods<span class="token punctuation">:</span><span class="token punctuation">{</span>
                    <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                template<span class="token punctuation">:</span><span class="token template-string"><span class="token string">`&lt;div&gt;my-component&lt;/div&gt;`</span></span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="总结：组件间通信"><a href="#总结：组件间通信" aria-hidden="true" class="header-anchor">#</a> 总结：组件间通信</h3> <p>props emit | $attrs $listeners | $parent $children</p> <ol><li>prop和$emit
父组件向子组件传递通过prop,子组件向父组件传递通过$emit</li> <li>$attrs和$listeners
Vue2.4开始提供$attrs和$listeners传递值</li> <li>$parent,$children</li> <li>$refs
获取实例</li> <li>provider和inject
父组件通过provider提供变量，子组件通过inject来注入变量</li> <li>eventBus
平级组件数据传递，可使用中央事件总线方式</li> <li>vuex状态管理</li></ol> <h3 id="自定义指令-directive"><a href="#自定义指令-directive" aria-hidden="true" class="header-anchor">#</a> 自定义指令(directive)</h3> <ul><li>Vue自带指令：
<code>v-model</code> <code>v-html</code> <code>v-text</code> <code>{{}}</code> <code>v-cloak</code> <code>v-if/v-else</code> <code>v-show</code> <code>v-pre</code>有十几种</li> <li>自定义指令有全局和局部</li> <li>分为默认函数形式和bind,update形式</li> <li>指令函数中的this是window，所以不能用this</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 1. 默认函数形式</span>
Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span>bindings<span class="token punctuation">,</span>vnode</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token operator">...</span>  
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 2. bind和update形式</span>
Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span>bindings<span class="token punctuation">,</span>vnode</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// 数据更新时指令生效</span>
      <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span>bindings<span class="token punctuation">,</span>vnode</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token operator">...</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// 用户绑定时指令生效</span>
      <span class="token function">bind</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span>bindings<span class="token punctuation">,</span>vnode</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          Vue<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
              <span class="token comment">//dom渲染出来后绑定事件</span>
              el<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// dom渲染完成后执行，相当于bind加了nextTick</span>
      <span class="token function">inserted</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        el<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>demo</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 自定义只取长度为三的字符串的指令且双向绑定的指令 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-split.3.xxx</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>msg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'split'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
        <span class="token function">bind</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span>bindings<span class="token punctuation">,</span>vnode</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">let</span> ctx<span class="token operator">=</span>vnode<span class="token punctuation">.</span>context<span class="token punctuation">;</span><span class="token comment">//当前指令所在的组件</span>
            <span class="token keyword">let</span> <span class="token punctuation">[</span><span class="token punctuation">,</span>len<span class="token punctuation">]</span><span class="token operator">=</span>bindings<span class="token punctuation">.</span>rawName<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                <span class="token keyword">let</span> val<span class="token operator">=</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>
                ctx<span class="token punctuation">[</span>bingdings<span class="token punctuation">.</span>expression<span class="token punctuation">]</span><span class="token operator">=</span>val<span class="token punctuation">;</span>
                el<span class="token punctuation">.</span>value<span class="token operator">=</span>val<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token comment">//赋予默认值</span>
            el<span class="token punctuation">.</span>value<span class="token operator">=</span>ctx<span class="token punctuation">[</span>bingdings<span class="token punctuation">.</span>expression<span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> vm<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        el<span class="token punctuation">:</span><span class="token string">'#app'</span><span class="token punctuation">,</span>
        data<span class="token punctuation">:</span><span class="token punctuation">{</span>
            msg<span class="token punctuation">:</span><span class="token string">'a'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="过滤器-filter"><a href="#过滤器-filter" aria-hidden="true" class="header-anchor">#</a> 过滤器(filter)</h3> <ul><li>可用computed替代(过滤器只改变数据的展示形式 不改变原数据)</li> <li>分为全局和局部过滤器</li> <li>过滤器函数中的this是window，所以不能用this</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 字符串前两个数字变大写 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    {{name | capitalize(2)}}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// 全局过滤器</span>
    Vue<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token string">'capitalize'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span>len</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> value<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>value<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> vm<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        el<span class="token punctuation">:</span><span class="token string">'#app'</span><span class="token punctuation">,</span>
        data<span class="token punctuation">:</span><span class="token punctuation">{</span>
            flag<span class="token punctuation">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
            name<span class="token punctuation">:</span><span class="token string">'zfjq'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 局部过滤器</span>
        <span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span>len</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token operator">...</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="异步组件"><a href="#异步组件" aria-hidden="true" class="header-anchor">#</a> 异步组件</h3> <ul><li>组件在异步加载完成后再显示出来，一般需要配合webpack的懒加载来使用</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'my-component'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            template<span class="token punctuation">:</span><span class="token string">'&lt;h1&gt;hello&lt;/h1&gt;'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="递归组件"><a href="#递归组件" aria-hidden="true" class="header-anchor">#</a> 递归组件</h3> <p>.vue文件组件</p> <ul><li>组件大写可辨认<code>MenuItem</code></li> <li>使用
<ol><li>定义组件</li> <li>引用组件</li> <li>注册组件</li></ol></li> <li>用于树结构，菜单等</li> <li>组件中使用<code>name:'ReSub'</code>给自己命名,使用<code>&lt;ReSub&gt;&lt;/ReSub&gt;</code>可以调用自己，实现递归组件。</li> <li>把共同的循环的部分抽离成组件，然后在组件中调用自己。</li></ul> <div class="language-html extra-class"><pre class="language-html"><code>//App.vue
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Menu</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>menu in menuList<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MenuItem</span> 
                    <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>menu.title<span class="token punctuation">&quot;</span></span> 
                    <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>!menu.children<span class="token punctuation">&quot;</span></span>
                <span class="token punctuation">&gt;</span></span>
                    {menu.title}
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MenuItem</span><span class="token punctuation">&gt;</span></span>
                <span class="token comment">&lt;!-- 把重复的部分抽离出去 --&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ReSubMenu</span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>menu.title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-else</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>menu.children<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ReSubMenu</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Menu</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">//.vue可省略</span>
<span class="token keyword">import</span> Menu <span class="token keyword">from</span> <span class="token string">'./Menu'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> MenuItem <span class="token keyword">from</span> <span class="token string">'./MenuItem'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> SubMenu <span class="token keyword">from</span> <span class="token string">'./SubMenu'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReSubMenu <span class="token keyword">from</span> <span class="token string">'./ReSubMenu'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            menuList<span class="token punctuation">:</span><span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    title<span class="token punctuation">:</span><span class="token string">'菜单1'</span><span class="token punctuation">,</span>
                    children<span class="token punctuation">:</span><span class="token punctuation">[</span>
                        <span class="token punctuation">{</span>
                            title<span class="token punctuation">:</span><span class="token string">'菜单1-1'</span><span class="token punctuation">,</span>
                            children<span class="token punctuation">:</span><span class="token punctuation">[</span>
                                <span class="token punctuation">{</span>title<span class="token punctuation">:</span><span class="token string">'菜单1-1-1'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                                <span class="token punctuation">{</span>title<span class="token punctuation">:</span><span class="token string">'菜单1-1-2'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                                <span class="token punctuation">{</span>title<span class="token punctuation">:</span><span class="token string">'菜单1-1-3'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                            <span class="token punctuation">]</span>
                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
                        <span class="token punctuation">{</span>title<span class="token punctuation">:</span><span class="token string">'菜单1-1'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                        <span class="token punctuation">{</span>title<span class="token punctuation">:</span><span class="token string">'菜单1-1'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">]</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                    title<span class="token punctuation">:</span><span class="token string">'菜单2'</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                    title<span class="token punctuation">:</span><span class="token string">'菜单3'</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    components<span class="token punctuation">:</span><span class="token punctuation">{</span>
        Menu<span class="token punctuation">,</span>MenuItem<span class="token punctuation">,</span>SubMenu<span class="token punctuation">,</span>ReSubMenu
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">#app</span><span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- Menu.vue --&gt;</span>

</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- MenuItem.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>msg<span class="token punctuation">:</span><span class="token string">'hello'</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- SubMenu.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>change<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>flag<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>sub<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>flag<span class="token punctuation">:</span><span class="token boolean">false</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    methods<span class="token punctuation">:</span><span class="token punctuation">{</span>
        <span class="token function">change</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>flag<span class="token operator">=</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>flag<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">.sub</span><span class="token punctuation">{</span>
        <span class="token property">padding-left</span><span class="token punctuation">:</span>20px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- ReSubMenu.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SubMenu</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#title</span><span class="token punctuation">&gt;</span></span>
            {{data.title}}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>child in data.children<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MenuItem</span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>child.title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>!child.children<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{child.title}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MenuItem</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ReSub</span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>child.title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-else</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>child<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ReSub</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>SubMenu</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> SubMenu <span class="token keyword">from</span> <span class="token string">'./SubMenu'</span>
<span class="token keyword">import</span> MenuItem <span class="token keyword">from</span> <span class="token string">'./MenuItem'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span><span class="token string">'ReSub'</span><span class="token punctuation">,</span><span class="token comment">//可以使用递归组件</span>
    props<span class="token punctuation">:</span><span class="token punctuation">{</span>
        data<span class="token punctuation">:</span><span class="token punctuation">{</span>
            type<span class="token punctuation">:</span>Object<span class="token punctuation">,</span>
            <span class="token function-variable function">default</span><span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    components<span class="token punctuation">:</span><span class="token punctuation">{</span>
        SubMenu<span class="token punctuation">,</span>MenuItem
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="vue-cli-3-0"><a href="#vue-cli-3-0" aria-hidden="true" class="header-anchor">#</a> vue-cli 3.0</h2> <h3 id="创建项目"><a href="#创建项目" aria-hidden="true" class="header-anchor">#</a> 创建项目</h3> <ol><li><p>vue create xxx/vue ui(可视化)
vue create vue-router-apply</p></li> <li><p>选手动
default(babel,eslint)//默认配置(包括babel和eslint)
Manually select features//手动配置</p></li> <li><p>选配置
babel,CSS</p></li> <li><p>配置放独立文件</p></li> <li><p>进入项目文件夹
cd vue-router-apply
yarn serve</p></li> <li><p>可新建vue.config.js来重置webpack配置
//vue.config.js基于node,node不支持import语法</p></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//webpack配置</span>
<span class="token keyword">let</span> path<span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token comment">//baseURL</span>
    <span class="token comment">//默认环境变量 NODE_ENV production devlopment</span>
    <span class="token comment">//打包后的结果带域名，开发中不带</span>
    publicPath<span class="token punctuation">:</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token operator">===</span><span class="token string">'production'</span><span class="token operator">?</span><span class="token string">'http://www.zhufeng.cn'</span><span class="token punctuation">:</span><span class="token string">'/'</span><span class="token punctuation">,</span>
    <span class="token comment">//assets打包成一个独立文件assets</span>
    assetsDir<span class="token punctuation">:</span><span class="token string">'asserts'</span><span class="token punctuation">,</span>
    <span class="token comment">//打包目录</span>
    outputDir<span class="token punctuation">:</span><span class="token string">'./my-dist'</span><span class="token punctuation">,</span>
    <span class="token comment">//使用模板方式 一般不使用 render改成template</span>
    runtimeCompiler<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">//打包不再使用sourcemap</span>
    productionSourceMap<span class="token punctuation">:</span><span class="token boolean">false</span><span class="token punctuation">,</span> 
    <span class="token comment">//修改webpack内部配置（获取webpack配置并给它添加自己的逻辑）</span>
    <span class="token function-variable function">chainWebpack</span><span class="token punctuation">:</span><span class="token parameter">config</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token comment">//给目录src配置了别名'+'，路径可以用+代替src</span>
        config<span class="token punctuation">.</span>resolve<span class="token punctuation">.</span>alias<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'+'</span><span class="token punctuation">,</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//新增其他webpack配置</span>
    configureWebpack<span class="token punctuation">:</span><span class="token punctuation">{</span>
        plugins<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        module<span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//配置开发服务时使用</span>
    devServer<span class="token punctuation">:</span><span class="token punctuation">{</span>
        <span class="token comment">//代理解决跨域：8080 -&gt; 自己的8080服务器 =&gt; 3000，服务访问服务是不受限的。</span>
        <span class="token comment">//开发环境使用，生产环境前端+后台=&gt;同一个服务器，就没有跨域问题了</span>
        <span class="token comment">//一般情况下如果不是没有后端程序员不需要用代理，直接请求头复制一下。</span>
        proxy<span class="token punctuation">:</span><span class="token punctuation">{</span>
            <span class="token comment">//http://localhost:8080/getUser帮我代理到http://localhost:3000/getUser</span>
            <span class="token string">'/getUser'</span><span class="token punctuation">:</span><span class="token punctuation">{</span>
                target<span class="token punctuation">:</span><span class="token string">&quot;http://localhost:3000&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//第三方插件配置</span>
    <span class="token comment">//可以使用三种方法配置插件：1. vue ui 安装插件 2. vue add style-resources-loader，相当于npm install @vue/cli-style-resource-loader 3. 在这儿配置</span>
    pluginOptions<span class="token punctuation">:</span><span class="token punctuation">{</span>
        <span class="token comment">//会给每个组件都引入这样一个样式文件</span>
        <span class="token string">'style-resources-loader'</span><span class="token punctuation">:</span><span class="token punctuation">{</span>
            preProcessor<span class="token punctuation">:</span><span class="token string">'less'</span><span class="token punctuation">,</span>
            patterns<span class="token punctuation">:</span><span class="token punctuation">[</span>
                path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'src/assets/common.less'</span><span class="token punctuation">)</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- HelloWorld.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>hello<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    123
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'HelloWorld'</span><span class="token punctuation">,</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    msg<span class="token punctuation">:</span> String
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//没写默认是`http://localhost:8080/getUser`</span>
    axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'getUser'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><p>scope
限制当前css只在当前组件上使用</p></li> <li><p>lang
使用语言设置
less/</p></li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token atrule"><span class="token rule">@import</span> <span class="token string">'../assets/common.less'</span><span class="token punctuation">;</span></span>
<span class="token selector">.hello</span><span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span>@color
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>less文件</li></ul> <div class="language-less extra-class"><pre class="language-less"><code><span class="token comment">//common.less</span>
<span class="token variable">@color<span class="token punctuation">:</span></span>red<span class="token punctuation">;</span>
</code></pre></div><h3 id="打包"><a href="#打包" aria-hidden="true" class="header-anchor">#</a> 打包</h3> <p>npm run build，出现dist目录</p> <ul><li>vue 启动服务通过express，所以内置了express.</li></ul> <h3 id="defer-async-preload-prefetch"><a href="#defer-async-preload-prefetch" aria-hidden="true" class="header-anchor">#</a> defer &amp; async /preload &amp; prefetch</h3> <h3 id="基于vue-cli编写组件-小球滚动组件"><a href="#基于vue-cli编写组件-小球滚动组件" aria-hidden="true" class="header-anchor">#</a> 基于vue-cli编写组件---小球滚动组件</h3> <ul><li>组件的id问题，<code>_uid</code>用于标识组件的每个实例</li> <li>属性(校验 ,计算属性)</li> <li>双向通信(props+emit / v-model / .sync),三种一种比一种简单,其中v-model用的最多</li> <li>数据绑定($refs 拿到子组件的方法，来调用组件中的方法)</li> <li>注意：子组件中的this.observer.define拦截，而this.timer不需要。直接赋值就行了。</li> <li>h5的requestAnimationFrame、cancelAnimationFrame代替setTimeout</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- App.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 第三种   :value.sync=&quot;xxx&quot;=:xxx + this.$emit('update:xxx')--&gt;</span>
    <span class="token comment">&lt;!-- pos5是pos4得语法糖 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ScrollBall</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>red<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:target</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:value.sync</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>pos5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ball5<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>红球<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ScrollBall</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ScrollBall</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>red<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>pos4<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:target</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">@update:</span>value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>value=&gt;pos4=value<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>红球<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ScrollBall</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 第二种   v-model=:value+input --&gt;</span>
    <span class="token comment">&lt;!-- pos3是pos1得语法糖 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ScrollBall</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>red<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>pos3<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:target</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>红球<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ScrollBall</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ScrollBall</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>red<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>pos1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:target</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@input</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>input<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>红球<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ScrollBall</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 第一种   props+emit --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ScrollBall</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>blue<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>pos2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:target</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>500<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>蓝球<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ScrollBall</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>getPosition<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>获取球1的位置<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>stop<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>停<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> ScrollBall <span class="token keyword">from</span> <span class="token string">'./components/ScrollBall'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'app'</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      pos1<span class="token punctuation">:</span><span class="token number">50</span><span class="token punctuation">,</span>
      pos2<span class="token punctuation">:</span><span class="token number">100</span><span class="token punctuation">,</span>
      pos3<span class="token punctuation">:</span><span class="token number">60</span><span class="token punctuation">,</span>
      pos4<span class="token punctuation">:</span><span class="token number">200</span><span class="token punctuation">,</span>
      pos5<span class="token punctuation">:</span><span class="token number">190</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  components<span class="token punctuation">:</span><span class="token punctuation">{</span>
    ScrollBall<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span><span class="token punctuation">{</span>
    <span class="token function">getPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">input</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>pos1<span class="token operator">=</span>value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>ball5<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- ScrollBall.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ball<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:</span><span class="token style-attr language-css"><span class="token attr-name"><span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value">style</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">:id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ballId<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span><span class="token string">'scroll-ball'</span><span class="token punctuation">,</span>
    props<span class="token punctuation">:</span><span class="token punctuation">{</span>
        color<span class="token punctuation">:</span><span class="token punctuation">{</span>
            type<span class="token punctuation">:</span>String<span class="token punctuation">,</span>
            <span class="token keyword">default</span><span class="token punctuation">:</span><span class="token string">'white'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        value<span class="token punctuation">:</span><span class="token punctuation">{</span>
            type<span class="token punctuation">:</span>Number<span class="token punctuation">,</span>
            <span class="token keyword">default</span><span class="token punctuation">:</span><span class="token number">0</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        target<span class="token punctuation">:</span><span class="token punctuation">{</span>
            type<span class="token punctuation">:</span>Number<span class="token punctuation">,</span>
            <span class="token keyword">default</span><span class="token punctuation">:</span><span class="token number">300</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    methods<span class="token punctuation">:</span><span class="token punctuation">{</span>
        <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timer<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//单向数据流 子组件通知父亲，当前自己的位置，父亲更新位置，再传递给子组件</span>
        <span class="token keyword">let</span> ball<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ballId<span class="token punctuation">)</span>
        <span class="token keyword">let</span> <span class="token function-variable function">fn</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">let</span> left<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>left<span class="token operator">&gt;=</span><span class="token keyword">this</span><span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timer<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span>left<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'update:value'</span><span class="token punctuation">,</span>left<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span>
            ball<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform<span class="token operator">=</span><span class="token template-string"><span class="token string">`translate(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px)`</span></span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>timer<span class="token operator">=</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//requestAnimationFrame根据浏览器刷新频率来设置，性能比setTimeout高一点</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>timer<span class="token operator">=</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    computed<span class="token punctuation">:</span><span class="token punctuation">{</span>
        <span class="token function">ballId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//通过uid来区分组件的实例</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`ball_`</span></span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>_uid
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">style</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>background<span class="token punctuation">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>color<span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>


<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">.ball</span><span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span>100px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
        <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
        <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
        <span class="token property">line-height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
        <span class="token property">border</span><span class="token punctuation">:</span> 1px solid red<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="vue-router"><a href="#vue-router" aria-hidden="true" class="header-anchor">#</a> vue-router</h2> <h3 id="安装"><a href="#安装" aria-hidden="true" class="header-anchor">#</a> 安装</h3> <p>yarn add vue-router</p> <h3 id="路由的两种方式"><a href="#路由的两种方式" aria-hidden="true" class="header-anchor">#</a> 路由的两种方式</h3> <ul><li><code>#</code>哈希值</li></ul> <p>url加#xxx</p> <ul><li>history(h5api)</li></ul> <p>history.pushState({},null,'/a')</p> <p>问题：刷新时浏览器会找不到路径</p> <h3 id="路由配置文件"><a href="#路由配置文件" aria-hidden="true" class="header-anchor">#</a> 路由配置文件</h3> <ul><li>第三方插件 引入后要使用Vue.use() =&gt; install</li> <li>install注册了两个全局组件：
<code>router-link</code> 链接
<code>router-view</code> 路由视图</li> <li>install定义了两个变量：
<code>$router</code>,<code>this.$router</code>,包含方法
<code>$route</code>,<code>this.$route</code>,包含属性</li> <li>导出路由配置</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//router/index.js</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> VueRouter <span class="token keyword">from</span> <span class="token string">'vue-router'</span><span class="token punctuation">;</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueRouter<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//默认导出</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">//路由形式(默认hash，history)</span>
    mode<span class="token punctuation">:</span><span class="token string">'hash / history'</span><span class="token punctuation">,</span>
    <span class="token comment">//路由映射表(建议单独一个routes.js文件导出routes)</span>
    routes<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//routes.js</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">'_v/Home'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Name <span class="token keyword">from</span> <span class="token string">'_v/Name.vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Version <span class="token keyword">from</span> <span class="token string">'_v/Version.vue'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">[</span>
    <span class="token comment">//首页显示</span>
    <span class="token punctuation">{</span>
        path<span class="token punctuation">:</span><span class="token string">'/'</span><span class="token punctuation">,</span>
        <span class="token comment">//重定向去首页(需要用path)</span>
        redirect<span class="token punctuation">:</span><span class="token punctuation">{</span>path<span class="token punctuation">:</span><span class="token string">'/home'</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        path<span class="token punctuation">:</span><span class="token string">'/home'</span><span class="token punctuation">,</span>
        name<span class="token punctuation">:</span><span class="token string">'home'</span><span class="token punctuation">,</span>
        <span class="token comment">//一个路由多个组件</span>
        components<span class="token punctuation">:</span><span class="token punctuation">{</span>
            <span class="token keyword">default</span><span class="token punctuation">:</span>Home<span class="token punctuation">,</span>
            name<span class="token punctuation">:</span>Name<span class="token punctuation">,</span>
            version<span class="token punctuation">:</span>Version
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        path<span class="token punctuation">:</span><span class="token string">'/login'</span><span class="token punctuation">,</span>
        name<span class="token punctuation">:</span><span class="token string">'login'</span><span class="token punctuation">,</span>
        <span class="token comment">//组件懒加载(现在是页面进入所有组件都加载。希望点击时才加载组件,使用`懒加载`,但可能会导致白屏问题)</span>
        <span class="token function-variable function">component</span><span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'_v/Login.vue'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        path<span class="token punctuation">:</span><span class="token string">'/profile'</span><span class="token punctuation">,</span>
        name<span class="token punctuation">:</span><span class="token string">'profile'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'_v/Profile.vue'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        path<span class="token punctuation">:</span><span class="token string">'/user'</span><span class="token punctuation">,</span>
        name<span class="token punctuation">:</span><span class="token string">'user'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'_v/User.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">//子路由(//path'/'代表根目录，所以'/add'表示根目录下的add,'add'表示'/user/add')</span>
        children<span class="token punctuation">:</span><span class="token punctuation">[</span>
            <span class="token comment">//设置默认显示（使用时必须用路径跳转，不能使用name）</span>
            <span class="token punctuation">{</span>
                path<span class="token punctuation">:</span><span class="token string">''</span><span class="token punctuation">,</span>
                <span class="token function-variable function">component</span><span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'_v/UserAdd'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                path<span class="token punctuation">:</span><span class="token string">'add'</span><span class="token punctuation">,</span>
                name<span class="token punctuation">:</span><span class="token string">'userAdd'</span><span class="token punctuation">,</span>
                <span class="token function-variable function">component</span><span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'_v/UserAdd'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                path<span class="token punctuation">:</span><span class="token string">'list'</span><span class="token punctuation">,</span>
                name<span class="token punctuation">:</span><span class="token string">'userList'</span><span class="token punctuation">,</span>
                <span class="token function-variable function">component</span><span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'_v/UserList'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//路由都匹配不到的情况</span>
    <span class="token punctuation">{</span>
        path<span class="token punctuation">:</span><span class="token string">'*'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'_v/404'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><ul><li>导入文件目录太繁琐应定义别名</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//vue.config.js</span>
config<span class="token punctuation">.</span>resolve<span class="token punctuation">.</span>alias<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'_'</span><span class="token punctuation">,</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'src/components'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

config<span class="token punctuation">.</span>resolve<span class="token punctuation">.</span>alias<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'_v'</span><span class="token punctuation">,</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'src/views'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="在vue实例中引用路由"><a href="#在vue实例中引用路由" aria-hidden="true" class="header-anchor">#</a> 在Vue实例中引用路由</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//main.js</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span>
Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>productionTip <span class="token operator">=</span> <span class="token boolean">false</span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  router<span class="token punctuation">,</span><span class="token comment">//在实例中引用路由</span>
  <span class="token function-variable function">render</span><span class="token punctuation">:</span> <span class="token parameter">h</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>

</code></pre></div><h3 id="在vue实例模板中显示路由视图"><a href="#在vue实例模板中显示路由视图" aria-hidden="true" class="header-anchor">#</a> 在Vue实例模板中显示路由视图</h3> <ul><li>一个路由一个组件</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- App.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'app'</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><ul><li>一个路由多个组件</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>version<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="点击路由跳转-声明式路由跳转"><a href="#点击路由跳转-声明式路由跳转" aria-hidden="true" class="header-anchor">#</a> 点击路由跳转(声明式路由跳转)</h3> <p>router-link</p> <ul><li>to属性
<ul><li>to='home'</li> <li>to='/home'</li> <li>:to='{path:'/home'}'</li> <li>:to='{name:'home'}'</li> <li>to='/user/detail?id=1'</li></ul></li> <li>tag属性
<ul><li>链接无下划线</li> <li>tag='span'</li></ul></li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>/home<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>login<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{name:'profile'}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>个人中心<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{path:'/user'}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>用户<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 传参1(问号传参/query传参) --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/user/detail?id=1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>用户详情<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{ path: '/user/detail', query: { id: 1 }}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>用户详情<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
{{this.$route.query.id}}

<span class="token comment">&lt;!-- 传参2(路径传参) --&gt;</span>
{
  path:'detail/:id',
  name:'userDetail,
  component:()=&gt;import('_v/UserDetail.vue)
}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/user/detail/1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>用户详情<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
{{this.$route.params.id}}

</code></pre></div><ul><li>bootstrap
yarn add bootstrap3</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//main.js中全局引用</span>
<span class="token keyword">import</span> <span class="token string">'bootstrap/dist/css/bootstrap.css'</span>
</code></pre></div><h3 id="编程式路由跳转"><a href="#编程式路由跳转" aria-hidden="true" class="header-anchor">#</a> 编程式路由跳转</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 字符串</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'home'</span><span class="token punctuation">)</span>

<span class="token comment">// 对象</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'home'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 命名的路由</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'user'</span><span class="token punctuation">,</span> params<span class="token punctuation">:</span> <span class="token punctuation">{</span> userId<span class="token punctuation">:</span> <span class="token string">'123'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>userId<span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token comment">// 带查询参数，变成 /register?plan=private</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'register'</span><span class="token punctuation">,</span> query<span class="token punctuation">:</span> <span class="token punctuation">{</span> plan<span class="token punctuation">:</span> <span class="token string">'private'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>plan<span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="路由钩子函数"><a href="#路由钩子函数" aria-hidden="true" class="header-anchor">#</a> 路由钩子函数</h3> <p>例如：离开一个组件前即一个组件销毁前提示是否离开。</p> <ul><li>参数next：继续函数<code>next()</code> <code>next(path)</code>,可选择去的路由。</li></ul> <h4 id="组件中的路由钩子"><a href="#组件中的路由钩子" aria-hidden="true" class="header-anchor">#</a> 组件中的路由钩子</h4> <ul><li>beforeRouteLeave</li> <li>beforeRouterEnter</li> <li>beforeRouterUpdate</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//login.vue</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">//离开钩子(离开组建，组件销毁时)</span>
  <span class="token function">beforeRouteLeave</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>username<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> confirm<span class="token operator">=</span>window<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">'你需要切换吗'</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>confirm<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//进入之前钩子</span>
  <span class="token function">beforeRouterEnter</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//此方法中不能拿到this</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">from</span><span class="token punctuation">.</span>name<span class="token operator">===</span><span class="token string">'userAdd'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'是这里过来的'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token parameter">vm</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token comment">//组件渲染完成后会回调，可以在这里拿到当前实例</span>
        console<span class="token punctuation">.</span><span class="token function">og</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">//当前路由更新钩子(相当于监控$route,一般与mount配合使用，当属性变化时，并没有重新加载组件，但会触发这个)</span>
  <span class="token function">beforeRouterUpdate</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  watch<span class="token punctuation">:</span><span class="token punctuation">{</span>
      <span class="token function">$route</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre></div><h4 id="路由配置中的路由钩子-在组件之前触发"><a href="#路由配置中的路由钩子-在组件之前触发" aria-hidden="true" class="header-anchor">#</a> 路由配置中的路由钩子(在组件之前触发)</h4> <ul><li>beforeEnter</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//routes.js</span>
<span class="token punctuation">{</span>
    path<span class="token punctuation">:</span><span class="token string">'/profile'</span><span class="token punctuation">,</span>
    name<span class="token punctuation">:</span><span class="token string">'profile'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'_v/Profile.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    beforeEnter<span class="token punctuation">:</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span><span class="token keyword">from</span><span class="token punctuation">,</span>next<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="全局路由钩子-在组件，路由配置之前，对所有路由有效"><a href="#全局路由钩子-在组件，路由配置之前，对所有路由有效" aria-hidden="true" class="header-anchor">#</a> 全局路由钩子(在组件，路由配置之前，对所有路由有效)</h4> <ul><li>router.beforeEach</li> <li>router.beforeResolve</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//main.js</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span>

<span class="token comment">//进入当前路由之前触发</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span><span class="token keyword">from</span><span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//当前路由解析后触发</span>
router<span class="token punctuation">.</span><span class="token function">beforeResolve</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span><span class="token keyword">from</span><span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//当前路由进入完毕后触发</span>
router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  router<span class="token punctuation">,</span>
  <span class="token function-variable function">render</span><span class="token punctuation">:</span> <span class="token parameter">h</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="路由钩子总结"><a href="#路由钩子总结" aria-hidden="true" class="header-anchor">#</a> 路由钩子总结</h4> <p>当组件切换时：</p> <ol><li>离开钩子(组件beforeRouterLeave)</li> <li>进入新页面之前(全局beforeEach--&gt;路由配置beforeEnter--&gt;组件beforeRouterEnter)</li> <li>路由解析完成(全局beforeResolve)</li> <li>页面进入完成(全局afterEach)</li> <li>属性变化，但没有重新加载组件(组件beforeRouteUpdate)</li> <li>组件渲染完成(组件beforeRouterEnter回调)</li></ol> <h4 id="【官网】完整的导航解析流程（背）"><a href="#【官网】完整的导航解析流程（背）" aria-hidden="true" class="header-anchor">#</a> 【官网】完整的导航解析流程（背）</h4> <ol><li>导航被触发。</li> <li>在失活的组件里调用离开守卫。</li> <li>调用全局的 beforeEach 守卫。</li> <li>在重用的组件里调用 beforeRouteUpdate 守卫 (2.2+)。</li> <li>在路由配置里调用 beforeEnter。</li> <li>解析异步路由组件。</li> <li>在被激活的组件里调用 beforeRouteEnter。</li> <li>调用全局的 beforeResolve 守卫 (2.5+)。</li> <li>导航被确认。</li> <li>调用全局的 afterEach 钩子。</li> <li>触发 DOM 更新。</li> <li>用创建好的实例调用 beforeRouteEnter 守卫中传给 next 的回调函数。</li></ol> <h4 id="拦截登录"><a href="#拦截登录" aria-hidden="true" class="header-anchor">#</a> 拦截登录</h4> <ul><li>设置路由备注，在全局beforeEach中拦截</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//routes.js</span>
<span class="token punctuation">{</span>
    path<span class="token punctuation">:</span><span class="token string">'/profile'</span><span class="token punctuation">,</span>
    name<span class="token punctuation">:</span><span class="token string">'profile'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'_v/Profile.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">//路由元信息(备注)</span>
    meta<span class="token punctuation">:</span><span class="token punctuation">{</span>needLogin<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//main.js</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span><span class="token keyword">from</span><span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token comment">//是否需要登录</span>
  <span class="token keyword">let</span> flag<span class="token operator">=</span>to<span class="token punctuation">.</span>matched<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token parameter">match</span><span class="token operator">=&gt;</span>match<span class="token punctuation">.</span>meta<span class="token operator">&amp;&amp;</span>match<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>needLogin<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//是否已登录</span>
  <span class="token keyword">let</span> isLogin<span class="token operator">=</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'login'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>flag<span class="token punctuation">,</span>isLogin<span class="token punctuation">)</span>
  
  <span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//需要登录</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>isLogin<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span><span class="token comment">//不需要登录</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//是登陆页且已经登录</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>name<span class="token operator">===</span><span class="token string">'login'</span><span class="token operator">&amp;&amp;</span>isLogin<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="路由面试考点"><a href="#路由面试考点" aria-hidden="true" class="header-anchor">#</a> 路由面试考点</h4> <ul><li>钩子函数</li> <li>$router方法 $route属性
<ul><li>$route.path当前路由</li></ul></li> <li>meta备注</li> <li>redirect重定向</li></ul> <h2 id="vuex"><a href="#vuex" aria-hidden="true" class="header-anchor">#</a> vuex</h2> <p>组件之间的传值多且复杂，所以用它把数据统一存放起来</p> <ul><li>面试考点
<img src="https://vuex.vuejs.org/vuex.png" alt="vuex图"></li> <li>vue是单向数据流，组件变动不能驱动数据，而是数据变动驱动组件</li> <li>组件驱动数据
<ul><li>同步情况，调用mutation改数据</li> <li>异步情况，派发action，调用api，再在action里调用mutation改数据。
<ul><li>好处：调用api逻辑不分散地放在组件里，而是独立出来，方便复用。
| vue组件 | vuex |
| :-------: | :------: |
| data | state |
| computed | getters |
| methods | mutations/actions |</li></ul></li></ul></li></ul> <h3 id="安装-2"><a href="#安装-2" aria-hidden="true" class="header-anchor">#</a> 安装</h3> <p>yarn add vuex</p> <h3 id="新建store文件夹"><a href="#新建store文件夹" aria-hidden="true" class="header-anchor">#</a> 新建store文件夹</h3> <ul><li><p>新建src/store/state.js</p></li> <li><p>新建src/store/getters.js</p></li> <li><p>新建src/store/mutations.js</p></li> <li><p>新建src/store/actions.js</p></li> <li><p>新建src/store/index.js</p></li></ul> <h3 id="store配置"><a href="#store配置" aria-hidden="true" class="header-anchor">#</a> store配置</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//index.js</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>

<span class="token keyword">import</span> actions <span class="token keyword">from</span> <span class="token string">'./actions'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> mutations <span class="token keyword">from</span> <span class="token string">'./mutations'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> state <span class="token keyword">from</span> <span class="token string">'./state'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> getters <span class="token keyword">from</span> <span class="token string">'./getters'</span>

<span class="token keyword">import</span> user <span class="token keyword">from</span> <span class="token string">'./mudules/user'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>vuex<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">//子模块</span>
    modules<span class="token punctuation">:</span><span class="token punctuation">{</span>
        user<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//严格模式(开发下使用，严格模式下不可以直接赋值修改状态)</span>
    strict<span class="token punctuation">:</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token operator">!==</span><span class="token string">'production'</span>
    actions<span class="token punctuation">,</span>
    mutations<span class="token punctuation">,</span>
    state<span class="token punctuation">,</span>
    getters
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//state.js(公共数据)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    lesson<span class="token punctuation">:</span><span class="token string">'珠峰培训'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>新建 <code>/store/modules/user.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//user.js(子模块数据)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token comment">//命名空间，true</span>
    namespaced<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    state<span class="token punctuation">:</span><span class="token punctuation">{</span>
      userName<span class="token punctuation">:</span><span class="token string">'姜文'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    action<span class="token punctuation">:</span><span class="token punctuation">{</span>
      <span class="token function">change_user</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>commit<span class="token punctuation">}</span><span class="token punctuation">,</span>payload</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
              <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'change_user'</span><span class="token punctuation">,</span>payload<span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    mutations<span class="token punctuation">:</span><span class="token punctuation">{</span>
      <span class="token function">change_user</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>payload</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          state<span class="token punctuation">.</span>userName<span class="token operator">=</span>payload<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    getters<span class="token punctuation">:</span><span class="token punctuation">{</span>
      <span class="token function">getNewUserName</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token string">'帅'</span><span class="token operator">+</span>state<span class="token punctuation">.</span>userName
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="在实例中引用store"><a href="#在实例中引用store" aria-hidden="true" class="header-anchor">#</a> 在实例中引用store</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// main.js</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>

<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store/index'</span>
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">render</span><span class="token punctuation">:</span> <span class="token parameter">h</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">,</span>
  store
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="数据获取和修改"><a href="#数据获取和修改" aria-hidden="true" class="header-anchor">#</a> 数据获取和修改</h3> <ul><li>如果页面中注入了store 每个实例上都会存在一个属性 <code>$store</code></li> <li>注意事项：
<ul><li>如果子模块没有开启namespace,只有state需要通过模块.属性获取。如果开启了namespace，所有的都需要通过模块.属性获取</li> <li>异步需要从action绕一下
<ul><li>好处：
action里可以多次调用接口，action里可以调用其他action</li></ul></li> <li>使用模块最好使用辅助函数</li></ul></li> <li>总结：
<ul><li>同步修改状态 commit mapMutation</li> <li>异步修改状态 dispatch mapAction</li> <li>不要赋值修改状态，严格模式下不合法</li></ul></li></ul> <h4 id="直接使用-store"><a href="#直接使用-store" aria-hidden="true" class="header-anchor">#</a> 直接使用$store</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- App.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 获取数据公共 --&gt;</span>
    {{$store.state.lesson}}
    {{$store.getters.getNewName}}
    <span class="token comment">&lt;!-- 获取数据子模块 --&gt;</span>
    {{$store.state.user.userName}}
    {{$store.getters.user.getNewName}}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'app'</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span><span class="token punctuation">{</span>
    <span class="token function">change</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// 同步修改数据子模块</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'user/change'</span><span class="token punctuation">,</span><span class="token string">'jw'</span><span class="token punctuation">)</span>
      <span class="token comment">// 异步修改数据子模块</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'user/change_user'</span><span class="token punctuation">,</span><span class="token string">'jw'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="辅助函数"><a href="#辅助函数" aria-hidden="true" class="header-anchor">#</a> 辅助函数</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- App.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>app<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
    {{lesson}}
    {{userName}}
    {{u}}
    {{getNewName}}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span>mapState<span class="token punctuation">,</span>mapGetters<span class="token punctuation">,</span>mapMutations<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'app'</span><span class="token punctuation">,</span>
  computed<span class="token punctuation">:</span><span class="token punctuation">{</span>
    <span class="token comment">// 获取数据公共</span>
    <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'lesson'</span><span class="token punctuation">,</span><span class="token string">'className'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'getNewName'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment">// 获取数据子模块</span>
    <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'userName'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'getNewUserName'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token comment">//起别名:对象形式</span>
    <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token function-variable function">u</span><span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>state<span class="token punctuation">.</span>userName<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span><span class="token punctuation">{</span>
    <span class="token comment">// 同步修改数据子模块</span>
    <span class="token operator">...</span><span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'change_user'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">change</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token string">'change_user'</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token string">'jw'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 异步修改数据子模块</span>
    <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'change_user'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token string">'change_user'</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token string">'jw'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>模块引用可使用<code>createNamespaceHelpers</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>createNamespaceHelpers<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span>mapState<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">createNamespaceHelpers</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'app'</span><span class="token punctuation">,</span>
  computed<span class="token punctuation">:</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>mapState<span class="token punctuation">[</span><span class="token string">'userName'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><h2 id="vue源码"><a href="#vue源码" aria-hidden="true" class="header-anchor">#</a> vue源码</h2> <h2 id="jsonwebtoken-jwt"><a href="#jsonwebtoken-jwt" aria-hidden="true" class="header-anchor">#</a> jsonwebtoken(jwt)</h2> <h2 id="iview-axios"><a href="#iview-axios" aria-hidden="true" class="header-anchor">#</a> iview,axios</h2> <h2 id="express-jsonwebtoken-jwt-bodyparser"><a href="#express-jsonwebtoken-jwt-bodyparser" aria-hidden="true" class="header-anchor">#</a> express,jsonwebtoken(jwt),bodyparser</h2> <h2 id="axios-获取数据"><a href="#axios-获取数据" aria-hidden="true" class="header-anchor">#</a> axios 获取数据</h2> <h2 id="jwt-实现-权限-vuex-jwt-鉴权"><a href="#jwt-实现-权限-vuex-jwt-鉴权" aria-hidden="true" class="header-anchor">#</a> jwt 实现 权限 vuex+jwt 鉴权</h2> <h2 id="报错"><a href="#报错" aria-hidden="true" class="header-anchor">#</a> 报错</h2> <ul><li>No ESLint configuration found
npm install eslint --save-dev
./node_modules/.bin/eslint --init 初始化配置文件.eslintrc.js</li></ul> <h2 id="google调试工具"><a href="#google调试工具" aria-hidden="true" class="header-anchor">#</a> google调试工具</h2> <ul><li>vuetools<div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 根实例 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Root</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- App实例 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>App</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>App</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Root</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <h2 id="vue-http请求头加token"><a href="#vue-http请求头加token" aria-hidden="true" class="header-anchor">#</a> vue.http请求头加token</h2> <div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span>http<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'Warning/Warning'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      request<span class="token punctuation">.</span>headers<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'auth'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>user<span class="token punctuation">.</span>Token<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">6/4/2019, 3:16:44 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/Frontend/css.html" class="prev">
          css
        </a></span> <span class="next"><a href="/Frontend/webpack.html">
          webpack
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.22eba307.js" defer></script><script src="/assets/js/29.d1cb8dc1.js" defer></script>
  </body>
</html>
